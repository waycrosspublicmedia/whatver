/* Copyright ABCya.com, LLC 
 Sat, 09 May 2015 18:29:24 GMT */
!function(a){function b(a){this.initialize(a)}a.abcya=a.abcya||{},b.prototype=new createjs.Container,b.prototype.mousie=null,b.prototype.cheese=null,b.prototype.circleBg=null,b.prototype.progTxtContainer=null,b.prototype.spriteSheet=null,b.prototype.maxAngleDiff=180,b.prototype.cheeseAngle=0,b.prototype.progValue=null,b.prototype.progressComplete=null,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){this.Container_initialize(),this.spriteSheet=a,this.progressComplete=!1,this.progValue=0,this.cheeseAngle=0,this.circleBg=new createjs.Sprite(this.spriteSheet,"circle"),this.circleBg.regX=this.circleBg.getBounds().width/2,this.circleBg.regY=this.circleBg.getBounds().height/2,this.addChild(this.circleBg),this.circleBg.scaleX=this.circleBg.scaleY=0,this.circleBg.alpha=0,createjs.Tween.get(this.circleBg).to({scaleX:1,scaleY:1,alpha:1},600,createjs.Ease.elasticOut);var b=this.cheeseAngle-this.maxAngleDiff;this.mousie=new createjs.Sprite(this.spriteSheet,"mouse"),this.mousie.regX=this.mousie.getBounds().width/2;var c=this.getRotatedPoint(b,this.circleBg.getBounds().width/2+this.mousie.getBounds().height);this.mousie.x=c.x,this.mousie.y=c.y,this.mousie.rotation=180*Math.atan2(this.mousie.y,this.mousie.x)/Math.PI+90,this.mousie.curAngle=b,this.addChild(this.mousie),this.cheese=new createjs.Sprite(this.spriteSheet,"cheese"),this.cheese.regX=this.cheese.getBounds().width/2;var d=this.getRotatedPoint(this.cheeseAngle,this.circleBg.getBounds().width/2+this.cheese.getBounds().height);this.cheese.x=d.x,this.cheese.y=d.y,this.cheese.rotation=180*Math.atan2(this.cheese.y,this.cheese.x)/Math.PI+90,this.addChild(this.cheese),this.progTxtContainer=new createjs.Container,this.progTxtContainer.txt=new createjs.BitmapText("0",this.spriteSheet),this.progTxtContainer.addChild(this.progTxtContainer.txt),this.addChild(this.progTxtContainer),this.alpha=0},b.prototype.setProgress=function(a){this.alpha=1,this.progValue=a},b.prototype.tick=function(){if(0==this.progressComplete&&(this.cheeseAngle-=7,this.cheeseAngle<=-180&&(this.cheeseAngle+=360),this.placeOnCircle(this.cheese,this.cheeseAngle),this.progValue>0)){var a=this.cheeseAngle+(this.maxAngleDiff-this.maxAngleDiff*this.progValue)+10;this.placeOnCircle(this.mousie,a),this.progTxtContainer.txt.text=Math.round(100*this.progValue).toString(),this.progTxtContainer.txt.x=-(this.progTxtContainer.txt.getBounds().width/2),this.progTxtContainer.txt.y=-(this.progTxtContainer.txt.getBounds().height/2),this.progValue>=1&&(this.progressComplete=!0)}},b.prototype.showNext=function(){this.cheese.regY=this.cheese.getBounds().height/2,createjs.Tween.get(this.cheese).to({alpha:0,scaleX:1.5,scaleY:1.5},300,createjs.Ease.quadOut);var a=this.mousie.x,b=this.mousie.y,c=this.getRotatedPoint(this.mousie.curAngle,this.circleBg.getBounds().width/2+2*this.mousie.getBounds().height);createjs.Tween.get(this.mousie).wait(100).to({x:c.x,y:c.y},200,createjs.Ease.quadIn).to({x:a,y:b},200,createjs.Ease.quadOut).to({alpha:0},100),this.progTxtContainer.removeChild(this.progTxtContainer.txt);var d=new createjs.Sprite(this.spriteSheet,"next-arrow");d.regX=d.getBounds().width/2,d.regY=d.getBounds().height/2,d.x=15,d.scaleX=d.scaleY=0,this.addChild(d),createjs.Tween.get(d).to({scaleX:1,scaleY:1},600,createjs.Ease.elasticOut)},b.prototype.placeOnCircle=function(a,b){var c=this.getRotatedPoint(b,this.circleBg.getBounds().width/2+a.getBounds().height);a.x=c.x,a.y=c.y,a.rotation=180*Math.atan2(a.y,a.x)/Math.PI+90,a.curAngle=b},b.prototype.getRotatedPoint=function(a,b){var c=.0174532925,d=b*Math.cos(a*c),e=b*Math.sin(a*c),f=new createjs.Point(d,e);return f},a.abcya.PreloadBar=b}(window),function(a){function b(){this.initialize()}a.abcya=a.abcya||{},b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.bg=null,b.prototype.logoPic=null,b.prototype.progressBar=null,b.prototype.btnGo=null,b.prototype.assetsSheet=null,b.prototype.isAdded=null,b.prototype.tickListener=null,b.prototype.setUpComplete=null,b.prototype.initialize=function(){this.Container_initialize(),this.isAdded=!1,this.setUpComplete=!1,this.assetsSheet=new createjs.SpriteSheet(game.assets.getAsset("preload-assets"));for(var a=0;a<abcya.GameConfig.GAME_FONTS.length;a++){var b=new createjs.Text(".","18pt "+abcya.GameConfig.GAME_FONTS[a],"#000");this.addChild(b)}this.bg=new createjs.Shape;var c=this.bg.graphics;c.beginFill("#66CCEC"),c.drawRect(0,0,game.screen_width,game.screen_height),this.addChild(this.bg),this.progressBar=new abcya.PreloadBar(this.assetsSheet),this.tickListener=createjs.Ticker.on("tick",this.updatePreloader,this)},b.prototype.setUpPreloader=function(){var a=this.bg.graphics;a.clear(),a.beginFill("#8AC53F"),a.drawRect(0,0,game.screen_width,game.screen_height),this.logoPic=new createjs.Sprite(this.assetsSheet,"logoImage"),this.logoPic.regX=this.logoPic.getBounds().width/2,this.logoPic.regY=this.logoPic.getBounds().height/2,this.logoPic.endScale="Portrait"==abcya.GameConfig.GAME_ORIENTATION&&game.isWidescreen===!0?.85:1,this.addChild(this.logoPic),this.addChild(this.progressBar),this.layoutRatio(),this.logoPic.scaleY=this.logoPic.scaleX=0,this.logoPic.alpha=0,createjs.Tween.get(this.logoPic).to({scaleX:this.logoPic.endScale,scaleY:this.logoPic.endScale,alpha:1},300,createjs.Ease.quadOut),game.stage.update(),this.setUpComplete=!0},b.prototype.setProgress=function(a){this.progressBar&&this.progressBar.setProgress(a)},b.prototype.addClick=function(){this.progressBar.showNext(),this.progressBar.on("click",this.startClick,this)},b.prototype.startClick=function(){for(createjs.Ticker.off("tick",this.tickListener),this.tickListener=null;this.numChildren>0;)this.removeChildAt(0);this.logoPic=null,this.progressBar=null,this.dispatchEvent(new createjs.Event("PRELOAD_CLICK")),createjs.Sound.play("clickSound")},b.prototype.layoutRatio=function(){this.bg.x=0,this.bg.y=0;var a=this.bg.graphics;a.clear(),a.beginFill("#8AC53F"),a.drawRect(0,0,game.screen_width,game.screen_height),this.progressBar&&this.logoPic&&(this.logoPic.x=game.screen_width/2,this.logoPic.y=game.screen_height/2-this.logoPic.getBounds().height/2*this.logoPic.endScale-30,this.progressBar.x=game.screen_width/2,this.progressBar.y=game.screen_height/2+this.progressBar.circleBg.getBounds().height/2+30)},b.prototype.updatePreloader=function(a){0==this.isAdded&&null!=this.getStage()&&null!=game.screen_width&&(this.isAdded=!0,this.setUpPreloader()),1==this.setUpComplete&&(this.progressBar&&this.progressBar.tick(a),game.stage.update(a))},a.abcya.PreloadScreen=b}(window);