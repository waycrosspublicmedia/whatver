/* Copyright ABCya.com, LLC 
 Thu, 13 Jul 2017 20:26:30 GMT */
function getUrlParams(){var a={};return window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d}),a}function getRandom(a,b){return Math.floor(Math.random()*(b-a+1))+a}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function str_pad_left(a,b,c){return(new Array(c+1).join(b)+a).slice(-c)}function shuffleArray(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}function eliminateArrayDupes(a){var b,c=a.length,d=[],e={};for(b=0;b<c;b++)e[a[b]]=0;for(b in e)d.push(b);return d}function pxValue(a){return a+"px"}function createCenteredText(a,b,c,d){for(var e=new createjs.Container,f=a.split("\n"),g=0;g<f.length;g++){var h=new createjs.Text(f[g],b+"pt "+c,d);h.textBaseline="hanging",h.x=h.getMeasuredWidth()/2*-1,g>0&&(h.y=f[g-1].y+f[g-1].getMeasuredHeight()+5),e.addChild(h),f[g]=h}return e}function createCenteredTextField(a,b,c,d){""===c&&(c="asap_regular");var e=new createjs.Text(a,b+"pt "+c,d);return e.textAlign="center",e.verticalAlign="center",e.textBaseline="middle",e}function createLeftTextField(a,b,c,d){""===c&&(c="asap_regular");var e=new createjs.Text(a,b+"pt "+c,d);return e.textAlign="left",e.verticalAlign="center",e.textBaseline="middle",e}function hexToRgb(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{red:parseInt(b[1],16),green:parseInt(b[2],16),blue:parseInt(b[3],16)}:null}function RGB2Color(a,b,c){return"#"+byte2Hex(a)+byte2Hex(b)+byte2Hex(c)}function byte2Hex(a){var b="0123456789ABCDEF";return String(b.substr(a>>4&15,1))+b.substr(15&a,1)}function rgbToHex(a,b,c){return"#"+componentToHex(a)+componentToHex(b)+componentToHex(c)}function dotPop(a,b,c,d){return d||(d=!0),c||(c=0),b||(b=320),createjs.Tween.get(a,{override:!0}).wait(c).to({scaleX:1.6,scaleY:1.6,alpha:1},240,createjs.Ease.quadIn).to({scaleX:1,scaleY:1,alpha:1},b,createjs.Ease.quadOut)}function checkRectIntersection(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)}function snapToFloor(a,b,c){return"undefined"==typeof c&&(c=0),0===b?a:(a-=c,a=b*Math.floor(a/b),c+a)}function snapTo(a,b,c){return"undefined"==typeof c&&(c=0),0===b?a:(a-=c,a=b*Math.round(a/b),c+a)}function fuzzyEqual(a,b,c){return"undefined"==typeof c&&(c=1e-4),Math.abs(a-b)<c}!function(a){function b(){this.commonAudioPath=abcya.GameConstants.COMMON_AUDIO_ASSETS_PATH,this.commonImagePath=abcya.GameConstants.COMMON_IMAGE_ASSETS_PATH,this.localAudioPath=abcya.GameConstants.AUDIO_ASSETS_PATH,this.localImagePath=abcya.GameConstants.IMAGE_ASSETS_PATH,this.localDataPath=abcya.GameConstants.DATA_ASSETS_PATH,this.preload=new createjs.LoadQueue,this.preload.setMaxConnections(4),this.preload.installPlugin(createjs.Sound),createjs.Sound.alternateExtensions=["mp3"]}a.abcya=a.abcya||{},b.prototype={},b.prototype.preload=null,b.prototype.ondownloadcompleted=null,b.prototype.preloadUpdater=null,b.prototype.spritesheet=null,b.prototype.dialogSheet=null,b.prototype.animationsheet=null,b.prototype.numbers=null,b.prototype.startPreload=function(){this.preload.addEventListener("complete",this.handlePreloadComplete.bind(this)),this.preload.addEventListener("progress",this.handlePreloadProgress.bind(this));var a=abcya.GameConstants.COMMON_IMAGE_ASSETS_PATH,b=[{id:"preload-assets",src:"preload-assets.json"}];this.preload.loadManifest(b,!1,a),this.preload.load()},b.prototype.handlePreloadProgress=function(a){},b.prototype.handlePreloadComplete=function(a){this.preload.removeAllEventListeners(),this.ondownloadcompleted()},b.prototype.startDownload=function(){this.preload.addEventListener("complete",this.handleDownloadComplete.bind(this)),this.preload.addEventListener("progress",this.handleDownloadProgress.bind(this));var a=abcya.GameConstants.IMAGE_ASSETS_PATH,b=[{id:"mainBg",src:game.orientation+"MainBackground_4x3.png"},{id:"mainBgWide",src:game.orientation+"MainBackground_16x9.png"},{id:"gameAssetsData",src:"game-assets.json"},{id:"gameAssetsSheet",src:"game-assets.png"},{id:"gameAnimationsData",src:"dragon.json"},{id:"gameAnimationsSheet",src:"dragon.png"},{id:"numbersData",src:"numbers.json"},{id:"numbersSheet",src:"numbers.png"}];this.preload.loadManifest(b,!1,a),a=abcya.GameConstants.AUDIO_ASSETS_PATH,b=[{id:"themeMusic",src:"flappydragontheme.ogg",data:1,type:"sound"},{id:"speed_boost",src:"speed_boost.ogg",data:2,type:"sound"},{id:"scoreSound",src:"1point.ogg",data:1,type:"sound"},{id:"jumpSound",src:"jump2.ogg",data:3,type:"sound"},{id:"hitSound",src:"hit.ogg",data:1,type:"sound"},{id:"gameoverSound",src:"gameOver.ogg",type:"sound"},{id:"click",src:"click.ogg",data:1,type:"sound"}],this.preload.loadManifest(b,!1,a),this.preload.load()},b.prototype.handleDownloadProgress=function(a){this.preloadUpdater&&this.preloadUpdater.setProgress(a.progress)},b.prototype.handleDownloadComplete=function(a){this.preload.removeAllEventListeners(),this.spritesheet=new createjs.SpriteSheet(this.getAsset("gameAssetsData")),this.animationsheet=new createjs.SpriteSheet(this.getAsset("gameAnimationsData")),this.numbers=new createjs.SpriteSheet(this.getAsset("numbersData")),this.ondownloadcompleted(),this.ondownloadcompleted=null,this.preloadUpdater=null},b.prototype.setDownloadCompleted=function(a){this.ondownloadcompleted=a},b.prototype.setPreloadViewUpdate=function(a){this.preloadUpdater=a},b.prototype.getAsset=function(a){return this.preload.getResult(a)},a.abcya.AssetsManager=b}(window),function(){window.abcya=window.abcya||{};var a={FPS:60,DO_ORIENTATION_BLOCK:!0,EXIT_URL:"../../../",FORCE_NORMAL_RATIO:!1,GAME_ORIENTATION:"Landscape",GAME_FONTS:["vagrounded_btregular"],USES_STORAGE:!0,STORAGE_PREFIX:"fdjr",STORAGE_TYPE:"local",GAME_NAME:"flappy_dragon",GAME_MODE:"flappy"};window.abcya.GameConfig=a}(),function(){window.abcya=window.abcya||{};var a={GS_PRELOAD:0,GS_RUNSCENE:1,GS_INTRO:3,GS_GAME:10},b={GE_GO_CLICK:"show_round_select",GE_SHOW_GAME:"show_game"},c={PS_BEGIN:0,PS_PLAY:5,PS_GAME_OVER:10},d={NORMAL_JUMP:222,WIDE_JUMP:200,NORMAL_PIPE_MIN:45,NORMAL_PIPE_MAX:500,WIDE_PIPE_MIN:32,WIDE_PIPE_MAX:300,PIPE_WAIT_TIME:3.4,NORMAL_GAPS:[[220,205],[205,190],[190,175],[175,160],[160,140]],JR_GAPS:[[320,305],[305,290],[290,275],[275,260],[260,240]]};window.abcya.GameStates=a,window.abcya.GameStateEvents=b,window.abcya.GamePlayStates=c,window.abcya.GameSettings=d}(),function(a){function b(){this.platformData=null,this.canvas=null,this.gameWrapper=null,this.stage=null,this.screen_width=null,this.screen_height=null,this.isWidescreen=null,this.hasFocus=!0,this.isMobile=!1,this.deviceType=null,this.tranformTypePrefix="",this.preloader=null,this.sceneManager=null,this.assets=null,this.orientation=null,this.orientationDimensions=null,this.isMuted=!1,this.isPaused=!1,this.force43=!1,this.curCSSLeft=null,this.curCSSTop=null,this.curCSSScale=null,this.initialize()}a.abcya=a.abcya||{};var c=b.prototype={};c.initialize=function(){this.platformData=abcyaWindow.abcya.platformData,this.orientation=abcya.GameConfig.GAME_ORIENTATION,this.isMobile=this.platformData.isMobile,this.force43=this.platformData.force43,this.tranformTypePrefix=this.platformData.tranformTypePrefix,this.deviceType=this.platformData.deviceType,this.canvas=document.getElementById("gameCanvas"),this.gameWrapper=document.getElementById("gameWrapper"),this.stage=new createjs.Stage(this.canvas),this.orientation===abcya.GameConstants.PORTRAIT?this.orientationDimensions={normal:{width:abcya.GameConstants.ORIENTATION_DIMS[1],height:abcya.GameConstants.ORIENTATION_DIMS[0]},widescreen:{width:abcya.GameConstants.ORIENTATION_DIMS[2],height:abcya.GameConstants.ORIENTATION_DIMS[0]}}:this.orientationDimensions={normal:{width:abcya.GameConstants.ORIENTATION_DIMS[0],height:abcya.GameConstants.ORIENTATION_DIMS[1]},widescreen:{width:abcya.GameConstants.ORIENTATION_DIMS[0],height:abcya.GameConstants.ORIENTATION_DIMS[2]}},this.stage.width=this.orientationDimensions.normal.width,this.stage.height=this.orientationDimensions.normal.height,this.platformData.allowsTouch===!0&&createjs.Touch.isSupported()&&createjs.Touch.enable(this.stage),this.platformData.allowsMouseover===!0&&this.stage.enableMouseOver(),this.platformData.pauseEvent&&a.parent.addEventListener(this.platformData.pauseEvent,this.handleViewFocusEvent.bind(this),!1),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.maxDelta=50,createjs.Ticker.setFPS(abcya.GameConfig.FPS)},c.setGameRatio=function(){if(this.force43===!0)return void this.force4x3();var b=a.innerWidth,c=a.innerHeight,d=Math.max(b,c),e=Math.min(b,c),f=d/e,g=this.isWidescreen;f<1.4?(this.isWidescreen=!1,this.stage.canvas.width=this.orientationDimensions.normal.width,this.stage.canvas.height=this.orientationDimensions.normal.height):(this.isWidescreen=!0,this.stage.canvas.width=this.orientationDimensions.widescreen.width,this.stage.canvas.height=this.orientationDimensions.widescreen.height),this.screen_width=this.canvas.width,this.screen_height=this.canvas.height,this.updateBgImage(),game&&g!=this.isWidescreen&&this.layoutScreens()},c.force4x3=function(){var a=this.isWidescreen;this.isWidescreen=!1,this.stage.canvas.width=this.orientationDimensions.normal.width,this.stage.canvas.height=this.orientationDimensions.normal.height,this.screen_width=this.canvas.width,this.screen_height=this.canvas.height,this.updateBgImage(),game&&a!=this.isWidescreen&&this.layoutScreens()},c.updateBgImage=function(){if(!abcya.GameConfig.HAS_BG_IMG){var a=this.isWidescreen?"BlankBackground_16x9.png":"BlankBackground_4x3.png";document.getElementById("bg").src=abcya.GameConstants.COMMON_IMAGE_ASSETS_PATH+this.orientation+a}},c.resizeGame=function(){a.top.scrollTo(0,0),this.setGameRatio();var b,c=a.innerWidth,d=a.innerHeight,e=this.screen_width/this.screen_height,f=a.innerWidth,g=a.innerHeight,h=f/g,i=0,j=0;h>e?(f=g*e,b=f/this.screen_width):(g=f/e,b=g/this.screen_height),this.platformData.maxViewScale>0&&b>this.platformData.maxViewScale?(b=1,j=(d-game.screen_height)/2,i=(c-game.screen_width)/2):(j=(d-g)/2,i=(c-f)/2),this.curCSSLeft=i,this.curCSSTop=j,this.curCSSScale=b,this.gameWrapper.style.left=pxValue(i),this.gameWrapper.style.top=pxValue(j),this.canvas.style.left=pxValue(i),this.canvas.style.top=pxValue(j);var k=document.getElementById("bg");k.setAttribute("style",this.tranformTypePrefix+"transform:scale("+b+")"),this.canvas.setAttribute("style",this.tranformTypePrefix+"transform:scale("+b+")"),this.sceneManager&&this.sceneManager.gameResized&&this.sceneManager.gameResized()},c.focusCheck=function(a){"pagehide"==a.type||"blur"==a.type||1==document.hidden||1==document.webkitHidden?game.hasFocus=!1:game.hasFocus=!0,game.isPaused||game.sceneManager&&game.sceneManager.forcePauseState&&game.sceneManager.forcePauseState(!game.hasFocus)},c.handleViewFocusEvent=function(a){this.setPaused(a.detail.paused)},c.setPaused=function(a){this.isPaused=a,game.sceneManager&&game.sceneManager.forcePauseState&&game.sceneManager.forcePauseState(this.isPaused)},c.initGame=function(){a.onresize=this.resizeGame.bind(this),this.resizeGame(),document.addEventListener("visibilitychange",this.focusCheck,!1),document.addEventListener("webkitvisibilitychange",this.focusCheck,!1),document.addEventListener("pagehide",this.focusCheck,!1),document.addEventListener("pageshow",this.focusCheck,!1),this.assets=new abcya.AssetsManager,game.assets=this.assets,this.assets.setDownloadCompleted(this.handlePreloadComplete.bind(this)),this.assets.startPreload()},c.handlePreloadComplete=function(){this.preloader=new abcya.PreloadScreen,this.preloader.on("PRELOAD_CLICK",this.startGame,this),this.stage.addChild(this.preloader),this.stage.update(),this.assets.setDownloadCompleted(this.gameAssetsReady.bind(this)),this.assets.setPreloadViewUpdate(this.preloader),this.assets.startDownload(),this.gameWrapper.style.visibility="visible"},c.gameAssetsReady=function(){this.preloader.addClick(),abcya.GameConfig.DELAYED_SOUND_QUEUE&&abcya.GameConfig.DELAYED_SOUND_QUEUE.length>0&&this.assets.startDelayedDownload()},c.startGame=function(a){this.stage.removeChild(this.preloader),this.preloader=null,this.sceneManager=new abcya.SceneManager},c.playSound=function(a,b,c){var d=null;if(b||(b=0),b===!0&&(b=-1),c||(c=0),!game.isMuted){var e=(new createjs.PlayPropsConfig).set({interrupt:createjs.Sound.INTERRUPT_ANY,loop:b,delay:c});d=createjs.Sound.play(a,e)}return d},c.layoutScreens=function(){this.preloader?this.preloader.layoutRatio():this.sceneManager&&this.sceneManager.layoutScreens()},a.abcya.GameMain=b}(window),function(a){function b(){this.initialize()}a.abcya=a.abcya||{},b.prototype={},b.prototype.currentScene=null,b.prototype.currentStateFunction=null,b.prototype.gameBg=null,b.prototype.gameButtons=null,b.prototype.showfps=!1,b.prototype.fpsLabel=null,b.prototype.initialize=function(){abcya.GameConfig.USES_STORAGE&&(game.storage=new abcya.GameStorage(abcya.GameConfig.STORAGE_PREFIX));var a=game.isWidescreen?"mainBgWide":"mainBg";this.gameBg=new createjs.Bitmap(game.assets.getAsset(a)),game.stage.addChild(this.gameBg),this.showfps&&(this.fpsLabel=new createjs.Text("--fps","12pt Arial","#000"),this.fpsLabel.x=5,this.fpsLabel.y=40,game.stage.addChild(this.fpsLabel)),createjs.Ticker.on("tick",this.gameLoop,this),this.changeState(abcya.GameStates.GS_INTRO)},b.prototype.changeState=function(a){switch(a){case abcya.GameStates.GS_RUNSCENE:this.currentStateFunction=this.gameStateRunScene;break;case abcya.GameStates.GS_INTRO:this.currentStateFunction=this.gameStateShowIntro;break;case abcya.GameStates.GS_GAME:this.currentStateFunction=this.gameStateShowGame}this.gameButtons&&game.stage.addChild(this.gameButtons)},b.prototype.gameStateRunScene=function(a){this.currentScene.tick&&game.hasFocus&&this.currentScene.tick(a)},b.prototype.gameStateShowIntro=function(a){var b=new abcya.IntroScreen;b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),game.stage.addChild(b),this.currentScene&&game.stage.removeChild(this.currentScene),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},b.prototype.gameStateShowGame=function(a){var b=new abcya.MainGameScreen;b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),game.stage.addChild(b),this.gameButtons&&this.gameButtons.pushConfirm(),this.currentScene&&game.stage.removeChild(this.currentScene),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE),this.showfps&&game.stage.addChild(this.fpsLabel)},b.prototype.onStateEvent=function(a,b){this.changeState(b.state)},b.prototype.gameLoop=function(a){null!=this.currentStateFunction&&this.currentStateFunction(a),this.showfps&&(this.fpsLabel.text=Math.floor(createjs.Ticker.getMeasuredFPS())+" FPS"),game.stage.update()},b.prototype.forcePauseState=function(a){createjs.Ticker.paused=a,this.currentScene&&this.currentScene.pauseGame&&this.currentScene.pauseGame(a)},b.prototype.layoutScreens=function(){if(this.currentScene){var a=game.isWidescreen?"mainBgWide":"mainBg";this.gameBg.image=game.assets.getAsset(a),this.currentScene.layoutRatio&&this.currentScene.layoutRatio()}},a.abcya.SceneManager=b}(window);var resizeDimensions=function(a,b,c,d){var e=a,f=b,g=1;return e>f?e>c?(g=c/e,f*=g,e=c):f>d&&(g=d/f,e*=g,f=d):f>d?(g=d/f,e*=g,f=d):e>c&&(g=c/e,f*=g,e=c),{width:e,height:f,scale:g}},createCenteredSprite=function(a,b){var c=new createjs.Sprite(a,b);return c.regX=Math.floor(c.getBounds().width/2),c.regY=Math.floor(c.getBounds().height/2),c},centerSprite=function(a){a.regX=Math.floor(a.getBounds().width/2),a.regY=Math.floor(a.getBounds().height/2)},centerShape=function(a){a.regX=Math.floor(a.workingWidth/2),a.regY=Math.floor(a.workingHeight/2)},makeHitShape=function(a,b,c){var d=new createjs.Shape;d.graphics.beginFill("#ffffff").drawRect(0,0,b,c),a.hitArea=d},scaleSprite=function(a,b){a.scaleX=a.scaleY=b},makeHitRect=function(a){var b=new createjs.Shape;b.graphics.beginFill("#ffffff").drawRect(0,0,a.getBounds().width,a.getBounds().height),a.hitArea=b},setHitRect=function(a,b,c){var d=new createjs.Shape;d.graphics.beginFill("#ffffff").drawRect(0,0,b,c),a.hitArea=d},sortNumber=function(a,b){return a-b};!function(){function a(a){this.gamePrefix=a,this.initialize()}window.abcya=window.abcya||{},a.prototype={},this.gamePrefix=null,a.prototype.initialize=function(){},a.prototype.setValue=function(a,b){localStorage.setItem(this.gamePrefix+a,b)},a.prototype.getValue=function(a){var b=localStorage.getItem(this.gamePrefix+a);return b},window.abcya.GameStorage=a}(),function(a){function b(a,b,c){this.curColor=c,this.curWidth=a,this.curHeight=b,this.Shape_constructor(),this.setup()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Shape);c.curColor=null,c.curWidth=null,c.curHeight=null,c.fillCommand=null,c.sizeCommand=null,c.setup=function(){this.fillCommand=this.graphics.beginFill(this.curColor).command,this.sizeCommand=this.graphics.drawRect(0,0,this.curWidth,this.curHeight),this.cache(0,0,this.curWidth,this.curHeight)},c.resizeShape=function(a,b){this.curWidth=a,this.curHeight=b,this.graphics.clear(),this.fillCommand=this.graphics.beginFill(this.curColor).command,this.sizeCommand=this.graphics.drawRect(0,0,this.curWidth,this.curHeight),this.cache(0,0,this.curWidth,this.curHeight)},a.abcya.ShapeBackground=createjs.promote(b,"Shape")}(window),function(){window.abcya=window.abcya||{};var a=function(a,b,c){this.pool=[];for(var d=b;--d>-1;)this.pool[d]=new a(c)};a.prototype.getSprite=function(){return this.pool.length>0?this.pool.pop():null},a.prototype.returnSprite=function(a){this.pool.push(a)},window.abcya.SpritePool=a}(),function(a){function b(a,b){this.baseSpawnTime=a,this.parentRef=b,this.Container_constructor(),this.setup()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.parentRef=null,c.baseSpawnTime=null,c.gems=null,c.gemPool=null,c.gemWaitTime=null,c.gemWaiter=null,c.baseGemSpeed=-160,c.latestGap=null,c.powerup=null,c.powerupWaiter=null,c.minPowerupWait=11,c.maxPowerupWait=20,c.fastSpawning=!1,c.setup=function(){this.latestGap={top:0,bottom:0},this.gemPool=new abcya.SpritePool(abcya.Gem,2),this.baseSpawnTime=3.5,this.powerupWaiter=this.baseSpawnTime+this.baseSpawnTime*getRandom(this.minPowerupWait,this.maxPowerupWait)},c.spawnPowerup=function(){var a=this.latestGap.top+(this.latestGap.bottom-this.latestGap.top)/2;null===this.powerup&&(this.powerup=this.gemPool.getSprite(),this.powerup.vX=-186,this.powerup.makeStar(a),this.addChild(this.powerup))},c.returnPowerup=function(){this.removeChild(this.powerup),this.gemPool.returnSprite(this.powerup),this.powerup=null},c.changeSpeed=function(a){this.worldSpeed=a},c.startPowerup=function(){this.fastSpawning=!0},c.endPowerup=function(a,b){this.fastSpawning=!1,this.powerupWaiter=this.baseSpawnTime*getRandom(this.minPowerupWait,this.maxPowerupWait)},c.checkCollision=function(a){if(this.powerup){var b=ndgmr.checkPixelCollision(a,this.powerup.sprite);b&&(this.parentRef.dragonHitPowerup(b.x,b.y),this.returnPowerup())}},c.cleanup=function(){this.powerup&&this.returnPowerup(),this.powerupWaiter=4},c.resetTimers=function(){this.powerupWaiter=4},c.tick=function(a){this.powerup&&(this.powerup.tick(a),this.powerup.x<-100&&this.returnPowerup()),this.powerupWaiter<=0?this.fastSpawning?this.powerupWaiter=this.baseSpawnTime*getRandom(this.minPowerupWait,this.maxPowerupWait):(this.spawnPowerup(),this.powerupWaiter=this.baseSpawnTime*getRandom(this.minPowerupWait,this.maxPowerupWait)):this.powerupWaiter-=a},a.abcya.ActiveObjects=createjs.promote(b,"Container")}(window),function(a){function b(){this.initialize()}a.game=a.game||{},b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.clouds1=null,b.prototype.clouds2=null,b.prototype.cloudSpeed=null,b.prototype.ground1=null,b.prototype.ground2=null,b.prototype.groundSpeed=null,b.prototype.layerWidth=1024,b.prototype.layers=null,b.prototype.baseCloudSpeed=76,b.prototype.baseGroundSpeed=180,b.prototype.initialize=function(){this.Container_initialize(),this.cloudLayer=new createjs.Container,this.pipeLayer=new createjs.Container,this.groundLayer=new createjs.Container,this.cloudSpeed=76,this.clouds1=new createjs.Sprite(game.assets.spritesheet,"CloudLayer"),this.addChild(this.clouds1),this.clouds2=new createjs.Sprite(game.assets.spritesheet,"CloudLayer"),this.clouds2.x=game.screen_width,this.cloudLayer.addChild(this.clouds2),this.groundSpeed=180,this.ground1=new createjs.Sprite(game.assets.spritesheet,"ground1"),this.ground1.y=game.screen_height-this.ground1.getBounds().height,this.groundLayer.addChild(this.ground1),this.ground2=new createjs.Sprite(game.assets.spritesheet,"ground2"),this.ground2.x=game.screen_width,this.ground2.y=game.screen_height-this.ground2.getBounds().height,this.groundLayer.addChild(this.ground2),this.addChild(this.cloudLayer,this.pipeLayer,this.groundLayer)},b.prototype.tick=function(a){if(this.clouds1.x<=-game.screen_width){var b=this.clouds1;b.x=this.clouds2.x+this.layerWidth,this.clouds1=this.clouds2,this.clouds2=b}if(this.clouds1.x-=this.cloudSpeed*(a.delta/1e3),this.clouds2.x-=this.cloudSpeed*(a.delta/1e3),this.ground1.x<=-game.screen_width){var b=this.ground1;b.x=this.ground2.x+this.layerWidth,this.ground1=this.ground2,this.ground2=b}this.ground1.x-=this.groundSpeed*(a.delta/1e3),this.ground2.x-=this.groundSpeed*(a.delta/1e3)},b.prototype.changeSpeed=function(a){this.cloudSpeed=this.baseCloudSpeed*a,this.groundSpeed=this.baseGroundSpeed*a},b.prototype.layoutRatio=function(){this.ground1.y=game.screen_height-this.ground1.getBounds().height,this.ground2.y=game.screen_height-this.ground2.getBounds().height},a.abcya.BackgroundLayers=b}(window),function(a){function b(a){this.parentRef=a,this.initialize()}a.abcya=a.abcya||{},b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.parentRef=null,b.prototype.getReadyText=null,b.prototype.arrowUp=null,b.prototype.deviceItem=null,b.prototype.helperHand=null,b.prototype.clickyClick=null,b.prototype.waitTween=null,b.prototype.isActive=null,b.prototype.initialize=function(){this.Container_initialize(),this.isActive=!1,this.getReadyText=new createjs.Sprite(game.assets.spritesheet,"GetReady"),this.getReadyText.x=game.screen_width/2-this.getReadyText.getBounds().width/2,this.addChild(this.getReadyText),this.arrowUp=new createjs.Sprite(game.assets.spritesheet,"Arrow"),this.arrowUp.x=game.screen_width/2-this.arrowUp.getBounds().width/2,this.arrowUp.alpha=0,this.addChild(this.arrowUp);var a=null;game.isMobile?(a="ShowTap",this.deviceItem=new createjs.Sprite(game.assets.spritesheet,a),a="InstructTap",this.helperHand=new createjs.Sprite(game.assets.spritesheet,a),this.helperHand.x=game.screen_width/2-this.helperHand.getBounds().width/2,a="TapClick",this.clickyClick=new createjs.Sprite(game.assets.spritesheet,a),this.clickyClick.x=this.helperHand.x+98):(a="ShowClick",this.deviceItem=new createjs.Sprite(game.assets.spritesheet,a),a="InstructClick",this.helperHand=new createjs.Sprite(game.assets.spritesheet,a),this.helperHand.x=game.screen_width/2-this.helperHand.getBounds().width/2,a="ClickClick",this.clickyClick=new createjs.Sprite(game.assets.spritesheet,a),this.clickyClick.x=this.helperHand.x+86),this.deviceItem.x=game.screen_width/2-this.deviceItem.getBounds().width/2,this.addChild(this.deviceItem),this.helperHand.alpha=0,this.helperHand.x=game.screen_width/2-this.helperHand.getBounds().width/2,this.addChild(this.helperHand),this.clickyClick.alpha=0,this.addChild(this.clickyClick),this.layoutRatio()},b.prototype.activate=function(){this.isActive=!0,this.clickyClick.alpha=0,this.arrowUp.alpha=0,this.helperHand.alpha=0,this.deviceItem.alpha=0,createjs.Tween.get(this.deviceItem).to({alpha:1},200),this.layoutRatio(),this.waitTween=createjs.Tween.get(this).wait(200).call(this.fakeClick1,null,this)},b.prototype.deactivate=function(){this.isActive=!1,createjs.Tween.removeAllTweens(this)},b.prototype.fakeClick1=function(){this.parentRef.fakeClick(),createjs.Tween.get(this.clickyClick,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},110,createjs.Ease.quadOut),createjs.Tween.get(this.helperHand,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},110,createjs.Ease.quadOut),this.waitTween=createjs.Tween.get(this).wait(800).call(this.fakeClick2,null,this)},b.prototype.fakeClick2=function(){this.parentRef.fakeClick(),createjs.Tween.get(this.clickyClick,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},80,createjs.Ease.quadOut),createjs.Tween.get(this.helperHand,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},80,createjs.Ease.quadOut),this.arrowUp.y=this.parentRef.dragon.y+18,createjs.Tween.get(this.arrowUp,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},210,createjs.Ease.quadOut),this.waitTween=createjs.Tween.get(this).wait(800).call(this.fakeClick3,null,this)},b.prototype.fakeClick3=function(){this.parentRef.fakeClick(),createjs.Tween.get(this.clickyClick,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},80,createjs.Ease.quadOut),createjs.Tween.get(this.helperHand,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},80,createjs.Ease.quadOut),this.arrowUp.y=this.parentRef.dragon.y+18,createjs.Tween.get(this.arrowUp,{override:!0}).to({alpha:1},300,createjs.Ease.quadIn).to({alpha:0},210,createjs.Ease.quadOut),this.waitTween=createjs.Tween.get(this).wait(2500).call(this.fakeClick1,null,this)},b.prototype.layoutRatio=function(){game.isWidescreen?(this.getReadyText.y=game.screen_height/2-200,this.helperHand.y=game.screen_height/2+53,this.deviceItem.y=this.helperHand.y):(this.getReadyText.y=game.screen_height/2-240,this.helperHand.y=game.screen_height/2+88,this.deviceItem.y=this.helperHand.y),this.clickyClick.y=this.helperHand.y-20},a.abcya.BeginGameOverlay=b}(window),function(a){function b(){this.Sprite_constructor(game.assets.animationsheet,"dragonidle"),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Sprite);c.gravity=null,c.jumpSpeed=null,c.vY=null,c.nY=null,c.isDead=!1,c.isWaiting=!0,c.idleY=null,c.maxY=null,c.poweredUp=!1,c.initialize=function(){this.Sprite_initialize(game.assets.animationsheet,"dragonidle"),this.idleY=game.screen_height/2,this.vY=1400,this.jumpSpeed=game.isWidescreen?abcya.GameSettings.WIDE_JUMP:abcya.GameSettings.NORMAL_JUMP,this.gravity=280,this.isDead=!1,this.maxY=game.screen_height-85},c.start=function(){this.isWaiting=!1},c.jump=function(){this.vY=-this.jumpSpeed,"dragonjump"!==this.currentAnimation&&this.gotoAndPlay("dragonjump"),game.playSound("jumpSound")},c.die=function(){this.isDead=!0,this.gotoAndPlay("dragondead"),game.playSound("hitSound")},c.reset=function(){this.isDead=!1,this.isWaiting=!0,this.gotoAndPlay("dragonidle")},c.powerup=function(){this.poweredUp=!0},c.powerdown=function(){this.poweredUp=!1},c.tick=function(a){if(this.vY+=this.gravity*(a.delta/1e3),this.y+=a.delta/1e3*this.vY,this.y>this.maxY&&(this.y=this.maxY),this.isWaiting)return void(this.y>this.idleY&&(this.y=this.idleY))},a.abcya.Dragon=createjs.promote(b,"Sprite")}(window),function(a){function b(a){this.parentRef=a,this.initialize()}a.abcya=a.abcya||{},b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.parentRef=null,b.prototype.title=null,b.prototype.lblScore=null,b.prototype.lblBest=null,b.prototype.txtScore=null,b.prototype.txtBest=null,b.prototype.btnGo=null,b.prototype.initialize=function(){this.Container_initialize(),this.title=new createjs.Sprite(game.assets.spritesheet,"GameOver"),this.title.x=game.screen_width/2-this.title.getBounds().width/2,this.addChild(this.title),this.lblScore=new createjs.Sprite(game.assets.spritesheet,"LabelScore"),this.lblScore.x=game.screen_width/2-this.lblScore.getBounds().width/2,this.addChild(this.lblScore),this.txtScore=new createjs.BitmapText("10",game.assets.numbers),this.txtScore.x=this.lblScore.x+this.lblScore.getBounds().width+15,this.txtScore.scaleX=this.txtScore.scaleY=.7,this.addChild(this.txtScore),this.lblBest=new createjs.Sprite(game.assets.spritesheet,"LabelBest"),this.lblBest.x=game.screen_width/2-this.lblBest.getBounds().width/2,this.addChild(this.lblBest),this.txtBest=new createjs.BitmapText("11",game.assets.numbers),this.txtBest.x=this.lblBest.x+this.lblBest.getBounds().width+17,this.txtBest.scaleX=this.txtBest.scaleY=.7,this.addChild(this.txtBest),this.btnGo=new createjs.Sprite(game.assets.spritesheet,"BtnGo"),this.btnGo.on("mousedown",this.clickRestart,this),this.btnGo.x=game.screen_width/2-this.btnGo.getBounds().width/2,this.btnGo.y=game.screen_height-220,this.addChild(this.btnGo)},b.prototype.clickRestart=function(a){this.parentRef.restartGame(),a.stopImmediatePropagation()},b.prototype.updateScores=function(a,b){this.txtBest.text=b.toString(),this.txtScore.text=a.toString()},b.prototype.layoutRatio=function(){game.isWidescreen?this.title.y=game.screen_height/2-200:this.title.y=game.screen_height/2-200,this.lblScore.y=this.title.y+100,this.txtScore.y=this.lblScore.y-6,this.lblBest.y=this.lblScore.y+80,this.txtBest.y=this.lblBest.y-4},a.abcya.GameOverOverlay=b}(window),function(a){function b(){this.Container_constructor(),this.setup()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.vX=-160,c.active=!1,c.isBonus=!1,c.setup=function(){this.sprite=new createjs.Sprite(game.assets.spritesheet,"Star"),this.addChild(this.sprite)},c.reset=function(a){this.y=a,this.x=game.screen_width,this.active=!0,this.sprite.gotoAndPlay("Star")},c.makeStar=function(a){this.y=a,this.x=game.screen_width,this.active=!0,this.sprite.gotoAndPlay("Star")},c.tick=function(a){this.x+=a*this.vX},a.abcya.Gem=createjs.promote(b,"Container")}(window),function(a){function b(a){this.parentRef=a,this.initialize()}a.abcya=a.abcya||{},b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.parentRef=null,b.prototype.beginOverlay=null,b.prototype.scoreDisplay=null,b.prototype.coverShape=null,b.prototype.gameOverOverlay=null,b.prototype.initialize=function(){this.Container_initialize(),this.scoreDisplay=new createjs.BitmapText("0",game.assets.numbers),this.scoreDisplay.x=game.screen_width/2-this.scoreDisplay.getBounds().width/2,this.scoreDisplay.y=22,this.addChild(this.scoreDisplay),this.coverShape=new abcya.ShapeBackground(game.screen_width,game.screen_height,"#fff"),this.coverShape.alpha=.4,this.beginOverlay=new abcya.BeginGameOverlay(this.parentRef),this.gameOverOverlay=new abcya.GameOverOverlay(this.parentRef)},b.prototype.activateBegin=function(){this.addChild(this.beginOverlay),this.beginOverlay.activate()},b.prototype.deactivateBegin=function(){this.removeChild(this.beginOverlay),this.beginOverlay.deactivate(),this.addChild(this.scoreDisplay)},b.prototype.displayGameOver=function(a,b){this.removeChild(this.scoreDisplay),this.gameOverOverlay.layoutRatio(),this.gameOverOverlay.updateScores(a,b),this.addChild(this.coverShape),this.addChild(this.gameOverOverlay)},b.prototype.restart=function(){this.removeChild(this.coverShape),this.removeChild(this.gameOverOverlay),this.updateScore(0),this.activateBegin()},b.prototype.updateScore=function(a){this.scoreDisplay.text=a.toString()},a.abcya.HudDisplay=b}(window),function(a){function b(){this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Sprite);c.workingWidth=null,c.workingHeight=null,c.vX=null,c.pWidth=null,c.pHeight=null,c.isBottom=!1,c.isActive=!1,c.blinking=!1,c.blinkWaiter=.5,c.initialize=function(){this.Sprite_initialize(game.assets.spritesheet,"Pipe"),this.pWidth=this.getBounds().width,this.pHeight=this.getBounds().height,this.vX=-160,this.workingWidth=this.getBounds().width,this.workingHeight=this.getBounds().height},c.resetTop=function(a,b){this.vX=-160*b,this.isBottom=!1,this.gotoAndPlay("PipeTop"),this.y=a-550,this.x=game.screen_width,this.isActive=!0,this.alpha=1,this.blinking=!1},c.resetBottom=function(a,b){this.vX=-160*b,
this.isBottom=!0,this.gotoAndPlay("Pipe"),this.scaleY=this.scaleX=1,this.y=a,this.x=game.screen_width,this.isActive=!0,this.alpha=1,this.blinking=!1},c.changeSpeed=function(a){this.vX=-160*a},c.startBlink=function(){this.alpha=.8,this.blinkWaiter=.5},c.endBlink=function(){this.alpha=1},c.tick=function(a){var b=a.delta/1e3;this.x+=b*this.vX},a.abcya.Pipe=createjs.promote(b,"Sprite")}(window),function(a){function b(){this.Sprite_constructor(game.assets.spritesheet,"Sparkle_3"),this.setup()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Sprite);c.mass=1,c.gravity=20,c.k=0,c.pos=null,c.vel=null,c.lifetime=2,c.age=0,c.halflife=0,c.gravityForce=null,c.totalForce=null,c.curAnim=1,c.maxAnim=4,c.animationWaiter=.5,c.setup=function(){this.gravityForce=new abcya.Vector2d,this.dragForce=new abcya.Vector2d,this.totalForce=new abcya.Vector2d,abcya.Forces.constantGravity(this.mass,this.gravity,this.gravityForce),this.pos=new abcya.Vector2d,this.vel=new abcya.Vector2d,this.leftLimit=0,this.rightLimit=game.screen_width,this.bottomLimit=game.screen_height-60,this.topLimit=-200},c.reset=function(a,b,c,d,e,f){this.pos.x=a,this.pos.y=b,this.vel.x=c,this.vel.y=d,this.gravityForce.x=-getRandom(200,400),f&&(this.gravityForce.x*=2),this.lifetime=e,this.halflife=e/2,this.age=0,this.alpha=1,this.gotoAndPlay("Sparkle_1"),this.curAnim=getRandom(1,4),this.gotoAndPlay("Sparkle_"+this.curAnim),centerSprite(this),this.update()},c.move=function(a){this.pos.addScaled(this.vel,a)},c.calcForce=function(a){0===this.k?this.dragForce.reset(0,0):(this.dragForce.reset(this.vel.x,this.vel.y),abcya.Forces.linearDrag(this.k,this.vel,this.dragForce)),abcya.Forces.add([this.gravityForce,this.dragForce],this.totalForce)},c.updateAccel=function(a){this.totalForce.multiply(1/this.mass)},c.updateVelocity=function(a){this.vel.addScaled(this.totalForce,a)},c.tick=function(a){return this.move(a),this.calcForce(a),this.updateAccel(a),this.updateVelocity(a),this.animationWaiter<=0?(this.curAnim<this.maxAnim?this.curAnim++:this.curAnim=1,this.gotoAndPlay("Sparkle_"+this.curAnim),this.animationWaiter=.09):this.animationWaiter-=a,this.age+=a,this.age>this.halflife&&(this.alpha-=.8*a),this.age<this.lifetime},c.update=function(){this.x=this.pos.x,this.y=this.pos.y},a.abcya.Sparkle=createjs.promote(b,"Sprite")}(window),function(a){function b(){}a.abcya=a.abcya||{},b.constantGravity=function(a,b,c){c.x=0,c.y=a*b},b.gravity=function(a,b,c,d){d.multiply(-a*b*c/(d.lengthSquared()*d.getLength()))},b.linearDrag=function(a,b,c){var d=b.getLength();d>0?c.multiply(-a):c.reset(0,0)},b.add=function(a,b){b.reset(0,0);for(var c=0;c<a.length;c++){var d=a[c];b.incrementBy(d.x,d.y)}},b.damping=function(a,b,c){var d=b.getLength();d>0?(c.reset(b.x,b.y),c.multiply(-a)):c.reset(0,0)},b.spring=function(a,b,c){a.x=c.x*-b,a.y=c.y*-b},a.abcya.Forces=b}(window),function(a){function b(a,b){"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=0),this.x=a,this.y=b}a.abcya=a.abcya||{};var c=b.prototype={};c.x=0,c.y=0,c.reset=function(a,b){this.x=a,this.y=b},c.add=function(a,b){this.x+=a,this.y+=b},c.addScaled=function(a,b){this.x+=a.x*b,this.y+=a.y*b},c.incrementBy=function(a,b){this.x+=a,this.y+=b},c.subtract=function(a){this.x-=a.x,this.y-=a.y},c.decrementBy=function(a,b){this.x-=a,this.y-=b},c.multiply=function(a){this.x*=a,this.y*=a},c.scaleBy=function(a){this.x*=a,this.y*=a},c.setFromDifference=function(a,b){this.x=a.x-b.x,this.y=a.y-b.y},c.lengthSquared=function(){return this.x*this.x+this.y*this.y},c.getLength=function(){return Math.sqrt(this.lengthSquared())},c.getDistanceFrom=function(a,b){var c=a,d=b,e=this.x,f=this.y,g=c-e,h=d-f;return Math.atan2(g,h)/Math.PI*180},c.projection=function(a){var b=this.getLength(),c=a.getLength(),d=null;return d=0===b||0===c?0:(this.x*a.x+this.y*a.y)/c},c.project=function(a,b){this.para(this.projection(a),!0,b)},c.para=function(a,b,c){"undefined"==typeof b&&(b=!0);var d=this.getLength();c.reset(this.x,this.y),b?c.multiply(a/d):c.multiply(-a/d)},c.projection2=function(a){var b,c=this.getLength(),d=a.getLength();return b=0==c||0==d?0:(this.x*a.x+this.y*a.y)/d},c.project2=function(a){return a.para2(this.projection(a))},c.unit=function(a){var b=this.getLength();b>0?(a.x=this.x/b,a.y=this.y/b):a.x=a.y=0},c.para2=function(a,b){"undefined"==typeof b&&(b=!0);var c=this.getLength(),d=new abcya.Vector2d(this.x,this.y);return b?d.scaleBy(a/c):d.scaleBy(-a/c),d},c.clone=function(){return new abcya.Vector2d(this.x,this.x)},a.abcya.Vector2d=b}(window),function(a){function b(){this.initialize()}a.abcya=a.abcya||{},b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.title=null,b.prototype.dragonPreview=null,b.prototype.btnGo=null,b.prototype.clouds=null,b.prototype.pipe=null,b.prototype.pipe2=null,b.prototype.pipe3=null,b.prototype.pipe4=null,b.prototype.clouds1=null,b.prototype.ground=null,b.prototype.jrStamp=null,b.prototype.initialize=function(){this.Container_initialize(),game.playSound("themeMusic",!0),this.clouds1=new createjs.Sprite(game.assets.spritesheet,"CloudLayer"),this.addChild(this.clouds1),this.dragonPreview=new createjs.Sprite(game.assets.spritesheet,"IntroDragon"),this.dragonPreview.x=game.screen_width/2-this.dragonPreview.getBounds().width/2,this.addChild(this.dragonPreview),this.pipe=new createjs.Sprite(game.assets.spritesheet,"Pipe"),this.pipe.x=120,this.pipe.y=game.screen_height-200,this.addChild(this.pipe),this.pipe2=new createjs.Sprite(game.assets.spritesheet,"Pipe"),this.pipe2.x=920-this.pipe2.getBounds().width,this.pipe2.y=game.screen_height-400,this.addChild(this.pipe2),this.pipe3=new createjs.Sprite(game.assets.spritesheet,"Pipe"),this.pipe3.scaleX=this.pipe3.scaleY=-1,this.pipe3.x=120+this.pipe2.getBounds().width,this.pipe3.y=400,this.addChild(this.pipe3),this.pipe4=new createjs.Sprite(game.assets.spritesheet,"Pipe"),this.pipe4.scaleX=this.pipe4.scaleY=-1,this.pipe4.x=920,this.pipe4.y=200,this.addChild(this.pipe4),this.ground=new createjs.Sprite(game.assets.spritesheet,"ground1"),this.addChild(this.ground),this.title=new createjs.Sprite(game.assets.spritesheet,"TitleText"),this.title.x=game.screen_width/2-this.title.getBounds().width/2,this.title.y=20,this.title.alpha=0,this.addChild(this.title),"jr"===abcya.GameConfig.GAME_MODE&&(this.jrStamp=new createjs.Sprite(game.assets.spritesheet,"JR"),this.jrStamp.x=this.title.x+this.title.getBounds().width-20,this.jrStamp.y=this.title.y+20,this.addChild(this.jrStamp)),this.btnGo=new createjs.Sprite(game.assets.spritesheet,"BtnGo"),this.btnGo.on("mousedown",this.goClick,this),this.btnGo.regX=Math.round(this.btnGo.getBounds().width/2),this.btnGo.regY=Math.round(this.btnGo.getBounds().height/2),this.btnGo.x=game.screen_width/2,this.btnGo.scaleX=this.btnGo.scaleY=0,this.addChild(this.btnGo),this.layoutRatio(),createjs.Tween.get(this.btnGo).to({scaleX:1,scaleY:1},300,createjs.Ease.quadOut),createjs.Tween.get(this.title).to({alpha:1},300,createjs.Ease.quadOut)},b.prototype.goClick=function(){this.startTransitionOut()},b.prototype.startTransitionOut=function(){createjs.Tween.get(this.pipe).to({alpha:0},300,createjs.Ease.quadOut),createjs.Tween.get(this.pipe2).to({alpha:0},300,createjs.Ease.quadOut),createjs.Tween.get(this.pipe3).to({alpha:0},300,createjs.Ease.quadOut),createjs.Tween.get(this.pipe4).to({alpha:0},300,createjs.Ease.quadOut),createjs.Tween.get(this.btnGo).to({alpha:0},500,createjs.Ease.quadOut),createjs.Tween.get(this.title).to({alpha:0},500,createjs.Ease.quadOut),this.jrStamp&&createjs.Tween.get(this.jrStamp).to({alpha:0},300,createjs.Ease.quadOut),createjs.Tween.get(this.dragonPreview).to({x:-170,y:20,scaleX:.5,scaleY:.5},1100,createjs.Ease.quadOut).call(this.transitionFinished,null,this)},b.prototype.transitionFinished=function(){this.dispatchEvent(new createjs.Event(abcya.GameStateEvents.GE_SHOW_GAME))},b.prototype.layoutRatio=function(){var a=game.isWidescreen?120:160;this.btnGo.y=game.screen_height-a,this.pipe.y=game.screen_height-200,this.pipe2.y=game.screen_height-400,this.pipe3.y=game.isWidescreen?200:400,this.pipe4.y=game.isWidescreen?50:200,this.ground.y=game.screen_height-this.ground.getBounds().height,this.dragonPreview.y=game.screen_height/2-this.dragonPreview.getBounds().height/2},a.abcya.IntroScreen=b}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.bgs=null,c.dragon=null,c.dragonWaiting=!1,c.pipes=null,c.pipePool=null,c.pipeWaitTime=null,c.pipeWaiter=null,c.hud=null,c.isGameOver=!0,c.curScore=null,c.minSpawnY=null,c.maxSpawnY=null,c.gapLevel=0,c.minGap=null,c.maxGap=null,c.isInvincable=!1,c.powerupTimer=0,c.windDownTimer=0,c.worldSpeed=1,c.activeItems=null,c.basePipeSpawnTime=0,c.sparkles=null,c.sparklePool=null,c.blinking=!1,c.initialize=function(){this.sparkles=[],this.sparklePool=new abcya.SpritePool(abcya.Sparkle,180),this.curScore=0,this.bestScore=0,this.bestScore=parseInt(game.storage.getValue("bestScore")),this.bestScore||(this.bestScore=0),this.minSpawnY=game.isWidescreen?abcya.GameSettings.WIDE_PIPE_MIN:abcya.GameSettings.NORMAL_PIPE_MIN,this.maxSpawnY=game.isWidescreen?abcya.GameSettings.WIDE_PIPE_MAX:abcya.GameSettings.NORMAL_PIPE_MAX,this.gapLevel=0,this.minGap=abcya.GameSettings.NORMAL_GAPS[this.gapLevel][0],this.maxGap=abcya.GameSettings.NORMAL_GAPS[this.gapLevel][1],this.bgs=new abcya.BackgroundLayers,this.addChild(this.bgs),this.dragon=new abcya.Dragon,this.dragon.x=-160,this.dragon.y=game.screen_height/2-140,this.dragonWaiting=!0,createjs.Tween.get(this.dragon).to({x:game.screen_width/2-this.dragon.getBounds().width/2},600,createjs.Ease.quadIn).call(this.dragonPlaced,null,this),this.addChild(this.dragon),this.pipePool=new abcya.SpritePool(abcya.Pipe,10,this),this.pipes=[],this.pipeWaiter=0,this.basePipeSpawnTime=this.pipeWaitTime=3.4;var a=this.pipePool.getSprite();this.pipeHeight=a.workingHeight,this.pipeWidth=a.workingWidth,this.pipePool.returnSprite(a),"jr"===abcya.GameConfig.GAME_MODE&&(this.basePipeSpawnTime=this.pipeWaitTime=6.2,this.minGap=abcya.GameSettings.JR_GAPS[this.gapLevel][0]-40,this.maxGap=abcya.GameSettings.JR_GAPS[this.gapLevel][1]-25,this.minSpawnY=game.isWidescreen?20:abcya.GameSettings.NORMAL_PIPE_MIN,this.maxSpawnY=game.isWidescreen?abcya.GameSettings.WIDE_PIPE_MAX-122:abcya.GameSettings.NORMAL_PIPE_MAX-122),this.activeItems=new abcya.ActiveObjects(this.basePipeSpawnTime,this),this.addChild(this.activeItems),this.hud=new abcya.HudDisplay(this),this.addChild(this.hud),this.playState=abcya.GamePlayStates.PS_BEGIN,game.stage.on("mousedown",this.onClick,this)},c.dragonPlaced=function(){this.hud.activateBegin(),this.dragonWaiting=!1},c.spawnUpperPipe=function(a){var b=this.pipePool.getSprite();b.resetTop(a,this.worldSpeed),this.bgs.pipeLayer.addChild(b),this.pipes.push(b)},c.spawnLowerPipe=function(a){var b=this.pipePool.getSprite();b.resetBottom(a,this.worldSpeed),this.bgs.pipeLayer.addChild(b),this.pipes.push(b)},c.spawnPipePair=function(){var a=this.getGap(null);this.spawnUpperPipe(a.top),this.spawnLowerPipe(a.bottom),this.activeItems.latestGap.top=a.top,this.activeItems.latestGap.bottom=a.bottom},c.returnPipe=function(a){this.bgs.pipeLayer.removeChild(this.pipes[a]),this.pipePool.returnSprite(this.pipes[a]),this.pipes.splice(a,1)},c.cleanPipes=function(){for(var a=this.pipes.length-1,b=a;b>=0;b--)this.returnPipe(b)},c.makeSparkles=function(a,b,c,d){"undefined"==typeof d&&(d=!1),c||(c=12);for(var e,f,g=null,h=300,i=-300,j=0;j<c;j++){if(e=(Math.random()-.5)*h,f=(Math.random()-.5)*i,g=this.sparklePool.getSprite(),null===g)return;var k=1.4;d===!0&&(e=-getRandom(200,420),k*=.75),g.reset(a,b,e,f,k,d),this.sparkles.push(g),this.addChild(g)}},c.returnSparkle=function(a){var b=this.sparkles[a];this.removeChild(b),this.sparklePool.returnSprite(b),this.sparkles.splice(a,1)},c.onClick=function(a){this.playState!==abcya.GamePlayStates.PS_BEGIN||this.dragonWaiting||(this.hud.deactivateBegin(),this.beginLevel()),this.isGameOver||this.dragon.jump()},c.fakeClick=function(a){this.dragon.jump()},c.tick=function(a){var b=a.delta/1e3;if(this.dragon.tick(a),(this.dragon.y<-44||this.dragon.y>game.screen_height-86)&&(this.dragon.isDead||this.dragonOut()),this.isInvincable&&(this.powerupTimer-=b,this.powerupTimer<=0))if(null===this.windDownTimer)this.windDownTimer=1.5,this.dragon.powerdown();else if(this.windDownTimer<=0){this.worldSpeed=1,this.bgs.changeSpeed(this.worldSpeed),this.isInvincable=!1,this.activeItems.endPowerup(this.worldSpeed,this.isInvincable);for(var c=this.pipes.length-1,d=c;d>=0;d--)this.pipes[d].changeSpeed(this.worldSpeed)}else if(this.windDownTimer-=b,this.worldSpeed>0){this.worldSpeed-=.5*b,this.worldSpeed<1?this.worldSpeed=1:(this.bgs.changeSpeed(this.worldSpeed),this.activeItems.changeSpeed(this.worldSpeed));for(var c=this.pipes.length-1,d=c;d>=0;d--)this.pipes[d].changeSpeed(this.worldSpeed)}this.playState===abcya.GamePlayStates.PS_PLAY&&(this.bgs.tick(a),this.activeItems.tick(b),this.activeItems.checkCollision(this.dragon),this.pipeCheck(a)),!this.isGameOver&&this.pipeWaiter<0?(this.spawnPipePair(),this.addChild(this.hud),this.pipeWaiter=this.pipeWaitTime):this.pipeWaiter-=b*this.worldSpeed;for(var c=this.sparkles.length-1,e=!1,d=c;d>=0;d--)e=this.sparkles[d].tick(b),e===!1?this.returnSparkle(d):this.sparkles[d].update()},c.layoutRatio=function(){this.bgs.layoutRatio(),this.beginOverlay&&this.beginOverlay.isActive&&this.beginOverlay.layoutRatio()},c.beginLevel=function(){this.dragon.start(),this.isGameOver=!1,this.playState=abcya.GamePlayStates.PS_PLAY,this.activeItems.resetTimers()},c.addScore=function(){game.playSound("scoreSound"),this.curScore++,this.hud.updateScore(this.curScore),this.gapLevel<abcya.GameSettings.NORMAL_GAPS.length-1&&this.curScore%5===0&&(this.gapLevel++,this.minGap=abcya.GameSettings.NORMAL_GAPS[this.gapLevel][0],this.maxGap=abcya.GameSettings.NORMAL_GAPS[this.gapLevel][1],"jr"===abcya.GameConfig.GAME_MODE&&(this.minGap=abcya.GameSettings.JR_GAPS[this.gapLevel][0],this.maxGap=abcya.GameSettings.JR_GAPS[this.gapLevel][1]))},c.dragonHitPipe=function(){this.dragon.die(),this.doGameOver()},c.dragonOut=function(){this.dragon.die(),this.doGameOver()},c.dragonHitGem=function(a,b){this.addScore(),this.makeSparkles(a,b,30,this.isInvincable)},c.dragonHitPowerup=function(){game.playSound("speed_boost"),this.isInvincable=!0,this.powerupTimer=8,this.windDownTimer=null,this.worldSpeed=3;for(var a=this.pipes.length-1,b=a;b>=0;b--)this.pipes[b].changeSpeed(this.worldSpeed),this.pipes[b].isBottom?this.pipes[b].y=game.screen_height-85:this.pipes[b].y=this.minSpawnY-550;this.activeItems.changeSpeed(this.worldSpeed),this.activeItems.startPowerup(),this.bgs.changeSpeed(this.worldSpeed),this.dragon.powerup()},c.doGameOver=function(){this.isGameOver=!0,game.playSound("gameoverSound"),this.playState=abcya.GamePlayStates.PS_GAME_OVER,this.bestScore=Math.max(this.bestScore,this.curScore),this.curScore===this.bestScore&&game.storage.setValue("bestScore",this.bestScore.toString()),this.hud.displayGameOver(this.curScore,this.bestScore),this.activeItems.endPowerup()},c.restartGame=function(){this.worldSpeed=1,this.bgs.changeSpeed(this.worldSpeed),this.isInvincable=!1,this.activeItems.cleanup(),this.cleanPipes(),this.gapLevel=0,this.minGap=abcya.GameSettings.NORMAL_GAPS[this.gapLevel][0],this.maxGap=abcya.GameSettings.NORMAL_GAPS[this.gapLevel][1],"jr"===abcya.GameConfig.GAME_MODE&&(this.minGap=abcya.GameSettings.JR_GAPS[this.gapLevel][0],this.maxGap=abcya.GameSettings.JR_GAPS[this.gapLevel][1]),this.curScore=0,this.hud.restart(),this.dragon.reset(),this.dragon.y=game.screen_height/2-140,this.playState=abcya.GamePlayStates.PS_BEGIN},c.getGap=function(a){var b=getRandom(this.minGap,this.maxGap),c=getRandom(this.minSpawnY,this.maxSpawnY),d=c+b;this.isInvincable&&(c=this.minSpawnY,d=game.screen_height-85);var e={top:c,bottom:d};return e},c.pipeCheck=function(a){for(var b=this.pipes.length-1,c=b;c>=0;c--){var d=this.pipes[c];d&&(ndgmr.checkPixelCollision(d,this.dragon)&&this.dragonHitPipe(),d.isBottom&&d.isActive&&d.x<this.dragon.x-this.dragon.getBounds().width&&(this.addScore(),d.isActive=!1),d.x<-130?this.returnPipe(c):d.tick(a))}},c.checkIntersection=function(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)},a.abcya.MainGameScreen=createjs.promote(b,"Container")}(window);