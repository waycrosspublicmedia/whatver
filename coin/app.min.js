/* Copyright ABCya.com, LLC 
 Thu, 13 Jul 2017 20:21:38 GMT */
function centerRegPoints(a){a.regX=a.getBounds().width/2,a.regY=a.getBounds().height/2}function log(a){setTimeout(function(){throw new Error(a)},0)}function randomNumber(a,b){var c=b-a+1;return Math.round(Math.random()*c+a-.5)}function randomUniqueArray(a,b,c){if(c>b-a+1)return null;for(var d=[],e=a;e<b+1;e++)d.push(e);for(var f=[],g=0;g<c;g++){var h=randomNumber(0,d.length-1),i=d[h];f.push(i),removeItemFromArray(d,i)}return f}function randomizeArray(a){for(var b=[],c=randomUniqueArray(0,a.length-1,a.length),d=0;d<c.length;d++){var e=c[d],f=a[e];b.push(f)}return b}function waitDoFunction(a,b,c,d){if(null==c&&(c=!1),null==d){var e=createjs.Tween.get(this,{loop:c}).wait(a).call(b,[],this);return e}for(var f=0,g=0;g<d;g++)f+=a,createjs.Tween.get(this).wait(f).call(b,[],this)}function removeItemFromArray(a,b){for(var c in a)if(a[c]==b){a.splice(c,1);break}}function log(a){}function permuteArrays(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];log("here");for(var f=0;f<b.length;f++){var g=b[f];c.push([e,g])}}return c}function makeHexColor(a,b,c){var d="#"+a.toString(16)+b.toString(16)+c.toString(16);return d}function createSprite(a,b){var c=null;return c=null==b?new createjs.Bitmap(game.assets.getAsset(a)):new createjs.Sprite(b,a),centerRegPoints(c),c.name=a,c}!function(a){function b(){this.preload=new createjs.LoadQueue,this.preload.installPlugin(createjs.Sound),this.preload.setMaxConnections(4)}a.abcya=a.abcya||{},b.prototype.preload=null,b.prototype.onDownloadCompleted=null,b.prototype.preloadUpdater=null,b.prototype.levelData=null,b.prototype.dialogSheet=null,b.prototype.spriteSheet=null,b.prototype.characterSheet=null,b.prototype.backgroundSheet=null,b.prototype.levelData=null,b.prototype.introSheet=null,b.prototype.piecesSheet=null,b.prototype.pieces2Sheet=null,b.prototype.startPreload=function(){this.preload.addEventListener("complete",this.handlePreloadComplete.bind(this)),this.preload.addEventListener("progress",this.handlePreloadProgress.bind(this));var a=abcya.GameConstants.COMMON_IMAGE_ASSETS_PATH,b=[{id:"preload-assets",src:"preload-assets.json"},{id:"portraitBlocker",src:"Orientation-768x1024.png"},{id:"mainBg",src:game.orientation+"BlankBackground_4x3.png"},{id:"mainBgWide",src:game.orientation+"BlankBackground_16x9.png"}];this.preload.loadManifest(b,!1,a),this.preload.load()},b.prototype.handlePreloadProgress=function(){},b.prototype.handlePreloadComplete=function(){this.preload.removeAllEventListeners(),this.onDownloadCompleted()},b.prototype.startDownload=function(){this.preload.addEventListener("complete",this.handleDownloadComplete.bind(this)),this.preload.addEventListener("progress",this.handleDownloadProgress.bind(this));var a=abcya.GameConstants.COMMON_IMAGE_ASSETS_PATH,b=abcya.GameConfig.COMMON_IMAGE_MANIFEST;this.preload.loadManifest(b,!1,a),a=abcya.GameConstants.COMMON_AUDIO_ASSETS_PATH,b=abcya.GameConfig.COMMON_SOUND_MANIFEST,createjs.Sound.alternateExtensions=["ogg"],this.preload.loadManifest(b,!1,a),a=abcya.GameConfig.GROUP_IMAGE_ASSETS_PATH,b=abcya.GameConfig.GROUP_IMAGE_MANIFEST,this.preload.loadManifest(b,!1,a),a=abcya.GameConfig.GROUP_AUDIO_ASSETS_PATH,b=abcya.GameConfig.GROUP_SOUND_MANIFEST,createjs.Sound.alternateExtensions=["ogg"],this.preload.loadManifest(b,!1,a),a=abcya.GameConfig.GAME_IMAGE_ASSETS_PATH,b=abcya.GameConfig.LOCAL_IMAGE_MANIFEST,this.preload.loadManifest(b,!1,a),a=abcya.GameConfig.GAME_AUDIO_ASSETS_PATH,b=abcya.GameConfig.LOCAL_SOUND_MANIFEST,createjs.Sound.alternateExtensions=["ogg"],this.preload.loadManifest(b,!1,a),a=abcya.GameConfig.DATA_ASSETS_PATH,this.preload.load()},b.prototype.handleDownloadProgress=function(a){this.preloadUpdater&&this.preloadUpdater.setProgress(a.progress)},b.prototype.handleDownloadComplete=function(){this.preload.removeAllEventListeners(),this.dialogSheet=new createjs.SpriteSheet(this.getAsset("confirmData")),this.spriteSheet=new createjs.SpriteSheet(this.getAsset("gameItemData")),this.characterSheet=new createjs.SpriteSheet(this.getAsset("charactersData")),this.backgroundSheet=new createjs.SpriteSheet(this.getAsset("bgItemData")),this.introSheet=new createjs.SpriteSheet(this.getAsset("introData")),this.piecesSheet=new createjs.SpriteSheet(this.getAsset("piecesData")),this.pieces2Sheet=new createjs.SpriteSheet(this.getAsset("pieces2Data")),this.onDownloadCompleted(),this.onDownloadCompleted=null,this.preloadUpdater=null},b.prototype.setDownloadCompleted=function(a){this.onDownloadCompleted=a},b.prototype.setPreloadViewUpdate=function(a){this.preloadUpdater=a},b.prototype.getAsset=function(a){return this.preload.getResult(a)},a.abcya.AssetsManager=b}(window),this.createjs=this.createjs||{},function(a){"use strict";function b(a,b,c,d){b=b>>0||a.width||300,c=c>>0||a.height||150;var e=this.canvas=f(b,c),g=this.context=e.getContext("2d");this.name=null,a&&g.drawImage(a,0,0),void 0!==d&&this.fillRect(new createjs.Rectangle(0,0,b,c),d),this._imageData=g.getImageData(0,0,b,c),this._contextChanged=!1}function c(a,b,c,d,e){for(;a<=b;){for(;a<=b&&this.getPixel32(a,c)!==d;)a++;if(b<a)break;for(a++;a<=b&&this.getPixel32(a,c)===d;)a++;e.push(new createjs.Point(a-1,c))}}function d(a,b){var c=a.width,d=a.height,e=b.width,f=b.height;if(0===c||0===d||0===e||0===f)return 0;var g=a.x,h=g+c,i=a.y,j=i+d,k=b.x,l=k+e,m=b.y,n=m+f;if(g<l&&i<n&&k<h&&m<j){var o=g<k?k:g,p=l<h?l:h,q=i<m?m:i,r=n<j?n:j;return new createjs.Rectangle(o,q,p-o,r-q)}return 0}function e(a){switch(a){case"<":return function(a,b){return a<b};case"<=":return function(a,b){return a<=b};case">":return function(a,b){return a>b};case">=":return function(a,b){return a>=b};case"==":return function(a,b){return a==b};case"!=":return function(a,b){return a!=b}}}function f(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c}function g(a,c,d){var e;if(a instanceof b)e=a.context;else if(a instanceof HTMLCanvasElement)e=a.getContext("2d");else if(a instanceof createjs.Stage)e=a.canvas.getContext("2d");else if(a instanceof createjs.DisplayObject){if(!a.cacheCanvas)throw new Error("The source must be called DisplayObject.cache().");e=a.cacheCanvas.getContext("2d")}else if(a instanceof HTMLImageElement||a instanceof HTMLVideoElement){var g=f(c,d);e=g.getContext("2d"),e.drawImage(a,0,0)}return e}var h=b;h.VERSION="1.1.1",h.getBitmapData=function(a){var c,d,e;if(a instanceof createjs.DisplayObject){if(!a.cacheCanvas)throw new Error("The object must be called DisplayObject.cache().");return c=Object.create(b.prototype),d=c.canvas=a.cacheCanvas,e=c.context=d.getContext("2d"),c._imageData=e.getImageData(0,0,d.width,d.height),c.name=null,c._contextChanged=!1,c}};var i=b.prototype={get width(){return this.canvas.width},get height(){return this.canvas.height},get rect(){return new createjs.Rectangle(0,0,this.canvas.width,this.canvas.height)}};i.constructor=b,i.applyFilter=function(a,c,d,e){var g=c.x>>0,h=c.y>>0,i=c.width>>0,j=c.height>>0,k=d.x>>0,l=d.y>>0;if(a instanceof b||a instanceof createjs.Stage)a=a.canvas;else if(a instanceof createjs.DisplayObject){if(!a.cacheCanvas)throw new Error("The source of BitmapData.applyFilter(), must be called DisplayObject.cache().");a=a.cacheCanvas}var m=f(i,j),n=m.getContext("2d");n.drawImage(a,-g,-h),e.applyFilter(n,0,0,i,j),this.context.drawImage(m,k,l),this._contextChanged=!0},i.clearRect=function(a,b,c,d){this.context.clearRect(a,b,c,d),this._contextChanged=!0},i.clone=function(){var a=Object.create(b.prototype),c=this.canvas.width,d=this.canvas.height,e=a.canvas=f(c,d),g=a.context=e.getContext("2d");return this._contextChanged&&this.updateImageData(),g.putImageData(this._imageData,0,0),a._imageData=g.getImageData(0,0,c,d),a.name=this.name,a._contextChanged=!1,a},i.colorTransform=function(a,b){for(var c=a.x>>0,d=a.y>>0,e=a.width>>0,f=a.height>>0,g=this.context,h=g.getImageData(c,d,e,f),i=h.data,j=0,k=i.length;j<k;j+=4){var l=j,m=j+1,n=j+2,o=j+3;i[l]=i[l]*b.redMultiplier+b.redOffset,i[m]=i[m]*b.greenMultiplier+b.greenOffset,i[n]=i[n]*b.blueMultiplier+b.blueOffset,i[o]=i[o]*b.alphaMultiplier+b.alphaOffset}g.putImageData(h,c,d),this._contextChanged=!0},i.compare=function(a){var c=a.width,d=a.height;if(this.canvas.width!==c)return-3;if(this.canvas.height!==d)return-4;var e=g(a,c,d),h=e.getImageData(0,0,c,d),i=h.data;this._contextChanged&&this.updateImageData();var j=this._imageData,k=j.data;if(Array.prototype.slice.call(k).toString()===Array.prototype.slice.call(i).toString())return 0;for(var l=Object.create(b.prototype),m=l.canvas=f(c,d),n=l.context=m.getContext("2d"),o=l._imageData=n.createImageData(c,d),p=o.data,q=0,r=k.length;q<r;q+=4){var s=q,t=q+1,u=q+2,v=q+3,w=k[s]===i[s]&&k[t]===i[t]&&k[u]===i[u],x=k[v]===i[v];w?x||(p[s]=p[t]=p[u]=255,p[v]=k[v]-i[v]):(p[s]=k[s]-i[s]&255,p[t]=k[t]-i[t]&255,p[u]=k[u]-i[u]&255,p[v]=255)}return n.putImageData(o,0,0),l},i.copyChannel=function(a,b,c,d,e){for(var f=b.x>>0,h=b.y>>0,i=b.width>>0,j=b.height>>0,l=c.x>>0,m=c.y>>0,n=g(a,f+i,h+j),o=n.getImageData(f,h,i,j),p=o.data,q=k.getChannelIndex(d),r=this.context,s=r.getImageData(l,m,i,j),t=s.data,u=k.getChannelIndex(e),v=0,w=t.length;v<w;v+=4)t[v+u]=p[v+q];r.putImageData(s,l,m),this._contextChanged=!0},i.copyPixels=function(a,b,c,d,e,f){var h=b.x>>0,i=b.y>>0,j=b.width>>0,k=b.height>>0,l=c.x>>0,m=c.y>>0,n=g(a,h+j,i+k),o=n.getImageData(h,i,j,k);if(d){var p,q;e?(p=e.x>>0,q=e.y>>0):(p=0,q=0);for(var r=g(d,p+j,q+k),s=r.getImageData(p,q,j,k),t=o.data,u=s.data,v=3,w=t.length;v<w;v+=4)t[v]=u[v];f?(n.putImageData(o,h,i),this.context.drawImage(n.canvas,h,i,j,k,l,m,j,k)):this.context.putImageData(o,l,m)}else this.context.putImageData(o,l,m);this._contextChanged=!0},i.dispose=function(){delete this._imageData,delete this.context,delete this.canvas},i.draw=function(a,c,d,e,g,h){if(a instanceof b||a instanceof createjs.Stage)a=a.canvas;else if(a instanceof createjs.DisplayObject){if(!a.cacheCanvas)throw new Error("The source of BitmapData.draw(), must be called DisplayObject.cache().");a=a.cacheCanvas}else if(a instanceof HTMLImageElement||a instanceof HTMLVideoElement){var i=f(a.width,a.height),j=i.getContext("2d");j.drawImage(a,0,0),a=i}c=c||new createjs.Matrix2D;var k;if(d){var l=a.width,m=a.height;k=new b(a,l,m),k.colorTransform(new createjs.Rectangle(0,0,l,m),d),a=k.canvas}h=!!h;var n=this.context;n.save(),e&&(n.globalCompositeOperation=e),n.imageSmoothingEnabled=h,n.webkitImageSmoothingEnabled=h,n.mozImageSmoothingEnabled=h,g&&(n.rect(g.x,g.y,g.width,g.height),n.clip()),n.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),n.drawImage(a,0,0),n.restore(),k&&k.dispose(),this._contextChanged=!0},i.drawImage=function(a,c,d,e,f,g,h,i,j){if(a instanceof b||a instanceof createjs.Stage)a=a.canvas;else if(a instanceof createjs.DisplayObject){if(!a.cacheCanvas)throw new Error("The source of BitmapData.drawImage(), must be called DisplayObject.cache().");a=a.cacheCanvas}void 0!==g?this.context.drawImage(a,c,d,e,f,g,h,i,j):void 0!==e?(g=c,h=d,i=e,j=f,this.context.drawImage(a,g,h,i,j)):(g=c||0,h=d||0,this.context.drawImage(a,g,h)),this._contextChanged=!0},i.expand=function(a){var b=a.x,c=a.y,d=Math.ceil,e=d(a.width),g=d(a.height),h=f(this.canvas.width+e,this.canvas.height+g),i=h.getContext("2d");i.drawImage(this.canvas,-b,-c),this.canvas=h,this.context=i,this._contextChanged=!0},i.fillRect=function(a,b){if(!isNaN(b)){var c=b>>16&255,d=b>>8&255,e=255&b,f=(b>>24&255)/255;b=0===f?"rgb("+c+","+d+","+e+")":"rgba("+c+","+d+","+e+","+f+")"}var g=this.context;g.save(),g.fillStyle=b,g.fillRect(a.x,a.y,a.width,a.height),g.restore(),this._contextChanged=!0},i.floodFill=function(a,b,d){this._contextChanged&&this.updateImageData();var e=this._imageData,f=e.width,g=e.height;if(a>>=0,b>>=0,!(a<0||b<0||f<=a||g<=b)){var h=this.getPixel32(a,b);if(h!==d){for(var i=(e.data,[new createjs.Point(a,b)]);i.length;){var j=i.shift(),k=j.x,l=j.y;if(this.getPixel32(k,l)!==d){for(var m=k;0<m&&this.getPixel32(m-1,l)===h;m--);for(var n=k;n<f-1&&this.getPixel32(n+1,l)===h;n++);for(var o=m;o<=n;o++)this.setPixel32(o,l,d);l+1<g&&c.call(this,m,n,l+1,h,i),0<=l-1&&c.call(this,m,n,l-1,h,i)}}this.updateContext()}}},i.getColorBoundsRect=function(a,b,c){void 0===c&&(c=!0),this._contextChanged&&this.updateImageData();for(var d=this._imageData,e=d.width,f=d.height,g=d.data,h=NaN,i=NaN,j=NaN,k=NaN,l=0,m=g.length;l<m;l+=4){var n=((g[l+3]<<24|g[l]<<16|g[l+1]<<8|g[l+2])&a)>>>0;if(c&&n===b||!c&&n!==b){var o=l/4,p=o%e,q=o/e>>0;isNaN(h)?(h=i=p,j=k=q):(p<h&&(h=p),i<p&&(i=p),q<j&&(j=q),k<q&&(k=q))}if(0===h&&i===e-1&&0===j&&k===f-1)break}return isNaN(h)?new createjs.Rectangle:new createjs.Rectangle(h,j,i-h+1,k-j+1)},i.getPixel=function(a,b){if(a<0||b<0)return 0;a>>=0,b>>=0,this._contextChanged&&this.updateImageData();var c=this._imageData,d=c.width,e=c.height;if(d<=a||e<=b)return 0;var f=c.data,g=4*(d*b+a),h=f[g],i=f[++g],j=f[++g];return h<<16|i<<8|j},i.getPixel32=function(a,b){if(a<0||b<0)return 0;a>>=0,b>>=0,this._contextChanged&&this.updateImageData();var c=this._imageData,d=c.width,e=c.height;if(d<=a||e<=b)return 0;var f=c.data,g=4*(d*b+a),h=f[g],i=f[++g],j=f[++g],k=f[++g];return(k<<24|h<<16|i<<8|j)>>>0},i.getPixels=function(a){return this.context.getImageData(a.x>>0,a.y>>0,a.width>>0,a.height>>0).data},i.histogram=function(a){for(var b=[[],[],[],[]],c=0,d=256;c<d;c++)b[0][c]=0,b[1][c]=0,b[2][c]=0,b[3][c]=0;var e=this.context.getImageData(a.x>>0,a.y>>0,a.width>>0,a.height>>0),f=e.data;for(c=0,d=f.length;c<d;c+=4)b[0][f[c]]++,b[1][f[c+1]]++,b[2][f[c+2]]++,b[3][f[c+3]]++;return b},i.hitTest=function(a,b,c,e,f){var h=a.x>>0,i=a.y>>0,j=this.canvas.width,k=this.canvas.height;this._contextChanged&&this.updateImageData();var l,m,n=this._imageData.data;if(c instanceof createjs.Point)return l=(c.x>>0)-h,m=(c.y>>0)-i,!(j<=l||k<=m||l<0||m<0)&&b<=n[4*(j*m+l)+3];var o,p,q,r,s;if(c instanceof createjs.Rectangle){if(c.x=(c.x>>0)-h,c.y=(c.y>>0)-i,o=d(new createjs.Rectangle(0,0,j,k),c),0===o)return!1;for(q=o.y,s=q+o.height;q<s;q++)for(p=o.x,r=p+o.width;p<r;p++)if(b<=n[4*(j*q+p)+3])return!0;return!1}var t=g(c,c.width,c.height);if(!t)throw new Error("The secondObject must be Point, Rectangle, BitmapData, cached DisplayObject.");e=e||new createjs.Point,f=f||1,l=(e.x>>0)-h,m=(e.y>>0)-i;var u=t.canvas;if(o=d(new createjs.Rectangle(0,0,j,k),new createjs.Rectangle(l,m,u.width,u.height)),0===o)return!1;var v=o.x,w=o.y,x=o.width,y=o.height,z=t.getImageData(v-l,w-m,x,y),A=z.data;for(q=w,s=q+y;q<s;q++)for(p=v,r=p+x;p<r;p++)if(f<=A[4*(x*(q-w)+(p-v))+3]&&b<=n[4*(j*q+p)+3])return!0;return!1},i.merge=function(a,b,c,d,e,f,h){for(var i=b.x>>0,j=b.y>>0,k=b.width>>0,l=b.height>>0,m=c.x>>0,n=c.y>>0,o=g(a,i+k,j+l),p=o.getImageData(i,j,k,l),q=p.data,r=this.context,s=r.getImageData(m,n,k,l),t=s.data,u=0,v=t.length;u<v;u+=4){var w=u,x=u+1,y=u+2,z=u+3;t[w]=(q[w]*d+t[w]*(256-d))/256,t[x]=(q[x]*e+t[x]*(256-e))/256,t[y]=(q[y]*f+t[y]*(256-f))/256,t[z]=(q[z]*h+t[z]*(256-h))/256}r.putImageData(s,m,n),this._contextChanged=!0},i.noise=function(a,b,c,d){a=a||0,b=b||255;var e=b-a;c=c||7,d=!!d;for(var f=Object.create(k),g=(c&f.RED)===f.RED,h=(c&f.GREEN)===f.GREEN,i=(c&f.BLUE)===f.BLUE,j=(c&f.ALPHA)===f.ALPHA,l=this._imageData.data,m=0,n=l.length;m<n;m+=4){var o=m,p=m+1,q=m+2,r=m+3;d?l[o]=l[p]=l[q]=(Math.random()*e>>0)+a:(l[o]=g?(Math.random()*e>>0)+a:0,l[p]=h?(Math.random()*e>>0)+a:0,l[q]=i?(Math.random()*e>>0)+a:0),l[r]=j?(Math.random()*e>>0)+a:255}this.updateContext()},i.paletteMap=function(a,b,c,d,e,f,h){for(var i=b.x>>0,j=b.y>>0,k=b.width>>0,l=b.height>>0,m=c.x>>0,n=c.y>>0,o=g(a,i+k,j+l),p=o.getImageData(i,j,k,l),q=p.data,r=this.context,s=r.getImageData(m,n,k,l),t=s.data,u=0,v=t.length;u<v;u+=4){var w=u,x=u+1,y=u+2,z=u+3,A=d?d[q[w]]:q[w]<<16,B=e?e[q[x]]:q[x]<<8,C=f?f[q[y]]:q[y],D=h?h[q[z]]:q[z]<<24>>>0;t[w]=((A>>16&255)+(B>>16&255)+(C>>16&255)+(D>>16&255))%256,t[x]=((A>>8&255)+(B>>8&255)+(C>>8&255)+(D>>8&255))%256,t[y]=((255&A)+(255&B)+(255&C)+(255&D))%256,t[z]=((A>>24&255)+(B>>24&255)+(C>>24&255)+(D>>24&255))%256}r.putImageData(s,m,n),this._contextChanged=!0},i.perlinNoise=function(a,b,c,d,e,f,g,h,i,l){if(0===c)return void this.fillRect(new createjs.Rectangle(0,0,this.canvas.width,this.canvas.height),0);a=a||1,b=b||1,e=!!e,f=!!f,g=g||7,h=!!h,i=i||[],l=l||"linear",j.setProperties(d,l);var m=[],n=Object.create(k);if(!h)var o=m[0]=(g&n.RED)===n.RED,p=m[1]=(g&n.GREEN)===n.GREEN,q=m[2]=(g&n.BLUE)===n.BLUE;for(var r=m[3]=(g&n.ALPHA)===n.ALPHA,s=this._imageData.data,t=0,u=this.canvas.height;t<u;t++)for(var v=0,w=this.canvas.width;v<w;v++){var x;x=e?j.getStitchNoises(v,t,w,u,a,b,c,f,m,h,i):j.getNoises(v,t,a,b,c,f,m,h,i);var y=4*(w*t+v),z=y+1,A=y+2,B=y+3;h?s[y]=s[z]=s[A]=256*x[0]:(s[y]=o?256*x[0]:0,s[z]=p?256*x[1]:0,s[A]=q?256*x[2]:0),s[B]=r?256*x[3]:255}this.updateContext()};var j=function(){function a(){}function b(a,b,d,e,f,g,i,j,k){for(var l=i[0],m=i[1],n=i[2],o=i[3],p=[0,0,0,0],q=[],r=0;r<f;r++){var s,t,u=r+1,v=Math.pow(2,u),w=Math.pow(h,u);k[r]?(s=k[r].x,t=k[r].y):s=t=0;var x=(a+s)/d*v,y=(b+t)/e*v;j?q[0]=c(x,y,0):(l&&(q[0]=c(x,y,0)),m&&(q[1]=c(x,y,1)),n&&(q[2]=c(x,y,2))),o&&(q[3]=c(x,y,3));for(var z=0,A=4;z<A;z++){var B=q[z];void 0!==B&&(g?B=.6*B+.2:B*=B,p[z]+=B*w)}}return p}function c(a,b,c){var d=a>>0,e=b>>0,h=a-d,i=b-e,j=d+1,k=e+1,l=f(d,e,c),m=f(j,e,c),n=f(d,k,c),o=f(j,k,c),p=g(l,m,h),q=g(n,o,h);return g(p,q,i)}function d(a,b,c){return a*(1-c)+b*c}function e(a,b,c){var d=c*Math.PI,e=.5*(1-Math.cos(d));return a*(1-e)+b*e}function f(a,b,c){var d=(l+a)*(b+c^j);return d=4294967295&(d<<13^d),(i*d+j&k)/(k+1)}var g,h=.5,i=1103515245,j=12345,k=2147483647,l=1;return a.setProperties=function(a,b){0!==a&&(l=a%16777215),g="cos"===b?e:d},a.getStitchNoises=function(a,c,d,e,f,g,h,i,j,k,l){var m=a+d,n=c+e,o=b(a,c,f,g,h,i,j,k,l),p=b(m,c,f,g,h,i,j,k,l),q=b(a,n,f,g,h,i,j,k,l),r=b(m,n,f,g,h,i,j,k,l),s=a/d,t=c/e,u=1-s,v=1-t,w=[0,0,0,0];return(k||j[0])&&(w[0]=o[0]*s*t+p[0]*u*t+q[0]*s*v+r[0]*u*v),!k&&j[1]&&(w[1]=o[1]*s*t+p[1]*u*t+q[1]*s*v+r[1]*u*v),!k&&j[2]&&(w[2]=o[2]*s*t+p[2]*u*t+q[2]*s*v+r[2]*u*v),j[3]&&(w[3]=o[3]*s*t+p[3]*u*t+q[3]*s*v+r[3]*u*v),w},a.getNoises=b,a}();i.pixelDissolve=function(a,b,c,d,e,f){var h=this.canvas.width,i=this.canvas.height,j=b.x>>0,k=b.y>>0,l=b.width>>0,m=b.height>>0,n=c.x>>0,o=c.y>>0;e=e||l*m/30>>0,f=f||0;var p,q,r,s,t=this===a;t&&(p=f>>16&255,q=f>>8&255,r=255&f,s=f>>24&255);var u=g(a,j+l,k+m),v=u.getImageData(j,k,l,m),w=v.data;this._contextChanged&&this.updateImageData();var x=this._imageData.data;if(!d){d=[];for(var y=0,z=l*m;y<z;y++)d[y]=y}for(;0<e;){var A=Math.random()*(d.length-1)>>0,B=d.splice(A,1)[0],C=B%l,D=B/l>>0,E=C+n,F=D+o;if(!(E<0||F<0||h<=E||i<=F)){var G=4*(h*F+E);if(t)x[G]=p,x[++G]=q,x[++G]=r,x[++G]=s;else{var H=4*B;x[G]=w[H],x[++G]=w[++H],x[++G]=w[++H],x[++G]=w[++H]}if(0===d.length)return this.updateContext(),0;e--}}return this.updateContext(),d},i.scroll=function(a,b){var c=this.context;this._contextChanged&&this.updateImageData(),c.putImageData(this._imageData,a>>0,b>>0),this._contextChanged=!0},i.setPixel=function(a,b,c){if(!(a<0||b<0)){a>>=0,b>>=0,this._contextChanged&&this.updateImageData();var d=this._imageData,e=d.width,f=d.height;if(!(e<=a||f<=b)){var g=d.data,h=4*(e*b+a);g[h]=c>>16&255,g[++h]=c>>8&255,g[++h]=255&c}}},i.setPixel32=function(a,b,c){if(!(a<0||b<0)){a>>=0,b>>=0,this._contextChanged&&this.updateImageData();var d=this._imageData,e=d.width,f=d.height;if(!(e<=a||f<=b)){var g=d.data,h=4*(e*b+a);g[h]=c>>16&255,g[++h]=c>>8&255,g[++h]=255&c,g[++h]=c>>24&255}}},i.setPixels=function(a,b){for(var c=this.context,d=c.createImageData(a.width>>0,a.height>>0),e=d.data,f=0,g=e.length;f<g;f++)e[f]=b[f];c.putImageData(d,a.x>>0,a.y>>0),this._contextChanged=!0},i.threshold=function(a,b,c,d,f,h,i,j){var k=b.x>>0,l=b.y>>0,m=b.width>>0,n=b.height>>0,o=c.x>>0,p=c.y>>0,q=e(d);h=h||0;var r=h>>16&255,s=h>>8&255,t=255&h,u=h>>24&255;void 0===i&&(i=4294967295);for(var v=g(a,k+m,l+n),w=v.getImageData(k,l,m,n),x=w.data,y=this.context,z=y.getImageData(o,p,m,n),A=z.data,B=0,C=A.length;B<C;B+=4){var D=B,E=B+1,F=B+2,G=B+3,H=(x[G]<<24|x[D]<<16|x[E]<<8|x[F])>>>0;q(H&i,f&i)?(A[D]=r,A[E]=s,A[F]=t,A[G]=u):j&&(A[D]=x[D],A[E]=x[E],A[F]=x[F],A[G]=x[G])}y.putImageData(z,o,p),this._contextChanged=!0},i.toString=function(){return"[BitmapData (name="+this.name+")]"},i.updateContext=function(){this.context.putImageData(this._imageData,0,0)},i.updateImageData=function(){this._imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this._contextChanged=!1};var k={ALPHA:8,BLUE:4,GREEN:2,RED:1,getChannelIndex:function(a){switch(a){case k.RED:return 0;case k.GREEN:return 1;case k.BLUE:return 2;case k.ALPHA:return 3}}},l=function(){function a(a,b,c,d,e,f,g,h){void 0!==a&&(this.redMultiplier=a),void 0!==b&&(this.greenMultiplier=b),void 0!==c&&(this.blueMultiplier=c),void 0!==d&&(this.alphaMultiplier=d),void 0!==e&&(this.redOffset=e),void 0!==f&&(this.greenOffset=f),void 0!==g&&(this.blueOffset=g),void 0!==h&&(this.alphaOffset=h)}var b=a.prototype={get color(){return(this.redOffset<<16|this.greenOffset<<8|this.blueOffset)>>>0},set color(a){this.redMultiplier=this.greenMultiplier=this.blueMultiplier=0,this.redOffset=a>>16&255,this.greenOffset=a>>8&255,this.blueOffset=255&a}};return b.constructor=a,b.redMultiplier=1,b.greenMultiplier=1,b.blueMultiplier=1,b.alphaMultiplier=1,b.redOffset=0,b.greenOffset=0,b.blueOffset=0,b.alphaOffset=0,b.clone=function(){var b=Object.create(a.prototype);return this.hasOwnProperty("redMultiplier")&&(b.redMultiplier=this.redMultiplier),this.hasOwnProperty("greenMultiplier")&&(b.greenMultiplier=this.greenMultiplier),this.hasOwnProperty("blueMultiplier")&&(b.blueMultiplier=this.blueMultiplier),this.hasOwnProperty("alphaMultiplier")&&(b.alphaMultiplier=this.alphaMultiplier),this.hasOwnProperty("redOffset")&&(b.redOffset=this.redOffset),this.hasOwnProperty("greenOffset")&&(b.redOffset=this.redOffset),this.hasOwnProperty("blueOffset")&&(b.redOffset=this.redOffset),this.hasOwnProperty("alphaOffset")&&(b.redOffset=this.redOffset),b},b.concat=function(a){this.redOffset+=this.redMultiplier*a.redOffset,this.greenOffset+=this.greenMultiplier*a.greenOffset,this.blueOffset+=this.blueMultiplier*a.blueOffset,this.alphaOffset+=this.alphaMultiplier*a.alphaOffset,this.redMultiplier*=a.redMultiplier,this.greenMultiplier*=a.greenMultiplier,this.blueMultiplier*=a.blueMultiplier,this.alphaMultiplier*=a.alphaMultiplier},b.toString=function(){return"[ColorTransform (redMultiplier="+this.redMultiplier+", greenMultiplier="+this.greenMultiplier+", blueMultiplier="+this.blueMultiplier+", alphaMultiplier="+this.alphaMultiplier+", redOffset="+this.redOffset+", greenOffset="+this.greenOffset+", blueOffset="+this.blueOffset+", alphaOffset="+this.alphaOffset+")]"},a}();createjs.BitmapData=b,createjs.BitmapDataChannel=k,createjs.ColorTransform=l}(window),function(){window.abcya=window.abcya||{};var a={RUN_MODE:"Production",FPS:61,DO_ORIENTATION_BLOCK:!0,EXIT_URL:"../../../",FORCE_NORMAL_RATIO:!1,FORCE_SHOW_BUTTONS:!0,GAME_ORIENTATION:"Portrait",GAME_FONTS:["vagrounded_btregular","odin"],USES_STORAGE:!1,STORAGE_PREFIX:"starter_game",STORAGE_TYPE:"local",TIMING_MODE:createjs.Ticker.TIMEOUT,FORCE43_OVERRIDE:!0,GROUP_IMAGE_ASSETS_PATH:"./assets/images/",GROUP_AUDIO_ASSETS_PATH:"./assets/audio/",GAME_IMAGE_ASSETS_PATH:"./assets/images/",GAME_AUDIO_ASSETS_PATH:"./assets/audio/",DATA_ASSETS_PATH:"./assets/data/",COMMON_IMAGE_MANIFEST:[],GROUP_IMAGE_MANIFEST:[{id:"confirmData",src:"confirm-assets.json"},{id:"confirmSheet",src:"confirm-assets.png"},{id:"background1",src:"background1.png"},{id:"background2",src:"background2.png"},{id:"background3",src:"background3.png"},{id:"background4",src:"background4.png"},{id:"background5",src:"background5.png"},{id:"background6",src:"background6.png"},{id:"background7",src:"background7.png"},{id:"background8",src:"background8.png"},{id:"background9",src:"background9.png"},{id:"background10",src:"background10.png"},{id:"background11",src:"background11.png"},{id:"bit-font-0",src:"bit-font-0.png"},{id:"bit-font-1",src:"bit-font-1.png"},{id:"bit-font-2",src:"bit-font-2.png"},{id:"bit-font-3",src:"bit-font-3.png"},{id:"bit-font-4",src:"bit-font-4.png"},{id:"bit-font-5",src:"bit-font-5.png"},{id:"bit-font-6",src:"bit-font-6.png"},{id:"bit-font-7",src:"bit-font-7.png"},{id:"bit-font-8",src:"bit-font-8.png"},{id:"bit-font-9",src:"bit-font-9.png"},{id:"blocker",src:"blocker.png"},{id:"blocker_angry",src:"blocker_angry.png"},{id:"flower",src:"flower.png"},{id:"game_board",src:"game_board.png"},{id:"how_to_play_button",src:"how_to_play_button.png"},{id:"how_to_screen",src:"how_to_screen.png"},{id:"play_button",src:"play_button.png"},{id:"play_button_yellow",src:"play_button_yellow.png"},{id:"score_button",src:"score_button.png"},{id:"score_dialog",src:"score_dialog.png"},{id:"title_background",src:"title_background.png"},{id:"ufo",src:"ufo.png"},{id:"magnet_ball",src:"magnet_ball.png"},{id:"plain_ball",src:"plain_ball.png"},{id:"ghost_ball",src:"ghost_ball.png"},{id:"gravity_ball",src:"gravity_ball.png"},{id:"blue_ball",src:"blue_ball.png"},{id:"fire_ball",src:"fire_ball.png"},{id:"silver_coin",src:"silver_coin.png"},{id:"blue_coin",src:"blue_coin.png"},{id:"fire_coin",src:"fire_coin.png"},{id:"ghost_coin",src:"ghost_coin.png"},{id:"gravity_coin",src:"gravity_coin.png"},{id:"magnet_coin",src:"magnet_coin.png"},{id:"gold_coin",src:"gold_coin.png"},{id:"extra_coin",src:"extra_coin.png"},{id:"silver_coin_explode_sheet",src:"silver_coin_explode_sheet.png"},{id:"gold_coin_explode_sheet",src:"gold_coin_explode_sheet.png"},{id:"fire_coin_explode_sheet",src:"fire_coin_explode_sheet.png"},{id:"blue_coin_explode_sheet",src:"blue_coin_explode_sheet.png"},{id:"magnet_coin_explode_sheet",src:"magnet_coin_explode_sheet.png"},{id:"gravity_coin_explode_sheet",src:"gravity_coin_explode_sheet.png"},{id:"ghost_coin_explode_sheet",src:"ghost_coin_explode_sheet.png"},{id:"fire_particle",src:"fire.png"},{id:"star_particle",src:"stars.png"},{id:"back_button",src:"back_button.png"},{id:"ok_button",src:"ok_button.png"},{id:"hand",src:"hand.png"},{id:"how_to_play",src:"how_to_play.png"},{id:"gold_particle",src:"gold_stars.png"}],LOCAL_IMAGE_MANIFEST:[],COMMON_SOUND_MANIFEST:[],GROUP_SOUND_MANIFEST:[{id:"click",src:"click.mp3",data:3},{id:"BungeeGoldCoin",src:"BungeeGoldCoin.mp3",data:3},{id:"BungeeSilverCoin",src:"BungeeSilverCoin.mp3",data:3},{id:"BungeeSkull",src:"BungeeSkull.mp3",data:3},{id:"BungeeSpecial",src:"BungeeSpecial.mp3",data:3},{id:"clear_board",src:"clear_board.mp3",data:3},{id:"CoinTheme",src:"Coin-Theme.mp3",data:3},{id:"destroy_blocker",src:"destroy_blocker.mp3",data:3},{id:"fling_ball",src:"fling_ball.mp3",data:3},{id:"ghost_ball_sound",src:"ghost_ball.mp3",data:3},{id:"pop_up",src:"pop_up.mp3",data:3},{id:"total_score",src:"total_score_high_score.mp3",data:3},{id:"ouch",src:"ouch.mp3",data:3},{id:"score_tally_loop",src:"score_tally_loop.mp3",data:3},{id:"extra_ball",src:"extra_ball.mp3",data:3}],LOCAL_SOUND_MANIFEST:[],MIN_ADD_VALUE:5,BALL_SIZE:50,KEY_UP_COLOR:"#EEEEEE",KEY_DOWN_COLOR:"#999"};window.abcya.GameConfig=a}(),function(){window.abcya=window.abcya||{};var a={GS_PRELOAD:0,GS_RUNSCENE:1,GS_INTRO:3,GS_INST:4,GS_GAME:5,GS_END:6,GS_ABOUT:7,GS_RESULTS:8,GS_DONUT:9,GS_PICK_SHAPE:10,GS_PICK_FROST_COLOR:11,GS_PICK_SPRINKLES:12,GS_PICK_SPRINKLES_COLOR:13},b={GE_GO_CLICK:"handle_go_click",GE_SHOW_INTRO:"show_intro",GE_SHOW_INST:"show_inst",GE_SHOW_GAME:"show_game",GE_SHOW_END:"show_end",GE_SHOW_ABOUT:"show_about",GE_SHOW_RESULTS:"show_results",GE_SHOW_DONUT:"show_donut",GE_SHOW_PICK_SHAPE:"show_pick_shape",GE_SHOW_PICK_FROST_COLOR:"show_pick_frost_color",GE_SHOW_PICK_SPRINKLES:"show_pick_sprinkles",GE_SHOW_PICK_SPRINKLES_COLOR:"show_pick_sprinkles_color"},c={DESKTOP:"desktop",IPAD:"pad",IPHONE:"iphone",ANDROID:"android",KINDLE:"kindle",DO_EXIT:"do_exit",EXIT_URL:"../../../",CANCEL_DIALOG:"cancel_dialog",TOGGLE_FULLSCREEN:"toggle_fullscreen",PORTRAIT:"Portrait",LANDSCAPE:"Landscape",ORIENTATION_DIMS:[1024,768,576],COMMON_IMAGE_ASSETS_PATH:"../../../assets/images/",COMMON_AUDIO_ASSETS_PATH:"../../../assets/audio/"};window.abcya.GameStates=a,window.abcya.GameStateEvents=b,window.abcya.GameConstants=c}(),function(a){function b(){this.platformData=null,this.canvas=null,this.gameWrapper=null,this.stage=null,this.screen_width=null,this.screen_height=null,this.isWidescreen=null,this.hasFocus=!0,this.isMobile=!1,this.deviceType=null,this.tranformTypePrefix="",this.preloader=null,this.sceneManager=null,this.assets=null,this.orientation=null,this.orientationDimensions=null,this.isMuted=!1,this.isPaused=!1,this.force43=!1,this.curCSSLeft=null,this.curCSSTop=null,this.curCSSScale=null,this.initialize()}a.abcya=a.abcya||{};var c=b.prototype={};c.initialize=function(){this.platformData=abcyaWindow.abcya.platformData,this.orientation=abcya.GameConfig.GAME_ORIENTATION,this.isMobile=this.platformData.isMobile,this.force43=this.platformData.force43,this.force43_overide=abcya.GameConfig.FORCE43_OVERRIDE,this.tranformTypePrefix=this.platformData.tranformTypePrefix,this.deviceType=this.platformData.deviceType,this.canvas=document.getElementById("gameCanvas"),this.gameWrapper=document.getElementById("gameWrapper"),this.stage=new createjs.Stage(this.canvas),this.orientation===abcya.GameConstants.PORTRAIT?this.orientationDimensions={normal:{width:abcya.GameConstants.ORIENTATION_DIMS[1],height:abcya.GameConstants.ORIENTATION_DIMS[0]},widescreen:{width:abcya.GameConstants.ORIENTATION_DIMS[2],height:abcya.GameConstants.ORIENTATION_DIMS[0]}}:this.orientationDimensions={normal:{width:abcya.GameConstants.ORIENTATION_DIMS[0],height:abcya.GameConstants.ORIENTATION_DIMS[1]},widescreen:{width:abcya.GameConstants.ORIENTATION_DIMS[0],height:abcya.GameConstants.ORIENTATION_DIMS[2]}},this.stage.width=this.orientationDimensions.normal.width,this.stage.height=this.orientationDimensions.normal.height,this.platformData.allowsTouch===!0&&createjs.Touch.isSupported()&&createjs.Touch.enable(this.stage),this.platformData.allowsMouseover===!0&&this.stage.enableMouseOver(),this.platformData.pauseEvent&&a.parent.addEventListener(this.platformData.pauseEvent,this.handleViewFocusEvent.bind(this),!1),createjs.Ticker.timingMode=abcya.GameConfig.TIMING_MODE,createjs.Ticker.maxDelta=50,createjs.Ticker.setFPS(abcya.GameConfig.FPS)},c.setGameRatio=function(){if(this.force43===!0||this.force43_overide)return void this.force4x3();var b=a.innerWidth,c=a.innerHeight,d=Math.max(b,c),e=Math.min(b,c),f=d/e,g=this.isWidescreen;f<1.4?(this.isWidescreen=!1,this.stage.canvas.width=this.orientationDimensions.normal.width,this.stage.canvas.height=this.orientationDimensions.normal.height):(this.isWidescreen=!0,this.stage.canvas.width=this.orientationDimensions.widescreen.width,this.stage.canvas.height=this.orientationDimensions.widescreen.height),this.screen_width=this.canvas.width,this.screen_height=this.canvas.height,this.updateBgImage(),game&&g!=this.isWidescreen&&this.layoutScreens()},c.force4x3=function(){var a=this.isWidescreen;this.isWidescreen=!1,this.stage.canvas.width=this.orientationDimensions.normal.width,this.stage.canvas.height=this.orientationDimensions.normal.height,this.screen_width=this.canvas.width,this.screen_height=this.canvas.height,this.updateBgImage(),game&&a!=this.isWidescreen&&this.layoutScreens()},c.updateBgImage=function(){if(!abcya.GameConfig.HAS_BG_IMG){var a=this.isWidescreen?"BlankBackground_16x9.png":"BlankBackground_4x3.png";document.getElementById("bg").src=abcya.GameConstants.COMMON_IMAGE_ASSETS_PATH+this.orientation+a}},c.resizeGame=function(){a.top.scrollTo(0,0),this.setGameRatio();var b,c=a.innerWidth,d=a.innerHeight,e=this.screen_width/this.screen_height,f=a.innerWidth,g=a.innerHeight,h=f/g,i=0,j=0;h>e?(f=g*e,b=f/this.screen_width):(g=f/e,b=g/this.screen_height),this.platformData.maxViewScale>0&&b>this.platformData.maxViewScale?(b=1,j=(d-game.screen_height)/2,i=(c-game.screen_width)/2):(j=(d-g)/2,i=(c-f)/2),this.curCSSLeft=i,this.curCSSTop=j,this.curCSSScale=b,this.gameWrapper.style.left=pxValue(i),this.gameWrapper.style.top=pxValue(j),this.canvas.style.left=pxValue(i),this.canvas.style.top=pxValue(j);var k=document.getElementById("bg");k.setAttribute("style",this.tranformTypePrefix+"transform:scale("+b+")"),
this.canvas.setAttribute("style",this.tranformTypePrefix+"transform:scale("+b+")"),this.sceneManager&&this.sceneManager.gameResized&&this.sceneManager.gameResized()},c.focusCheck=function(a){"pagehide"==a.type||"blur"==a.type||1==document.hidden||1==document.webkitHidden?game.hasFocus=!1:game.hasFocus=!0,game.isPaused||game.sceneManager&&game.sceneManager.forcePauseState&&game.sceneManager.forcePauseState(!game.hasFocus)},c.handleViewFocusEvent=function(a){this.setPaused(a.detail.paused)},c.setPaused=function(a){this.isPaused=a,game.sceneManager&&game.sceneManager.forcePauseState&&game.sceneManager.forcePauseState(this.isPaused)},c.initGame=function(){a.onresize=this.resizeGame.bind(this),this.resizeGame(),document.addEventListener("visibilitychange",this.focusCheck,!1),document.addEventListener("webkitvisibilitychange",this.focusCheck,!1),document.addEventListener("pagehide",this.focusCheck,!1),document.addEventListener("pageshow",this.focusCheck,!1),this.assets=new abcya.AssetsManager,game.assets=this.assets,this.assets.setDownloadCompleted(this.handlePreloadComplete.bind(this)),this.assets.startPreload()},c.handlePreloadComplete=function(){this.preloader=new abcya.PreloadScreen,this.preloader.on("PRELOAD_CLICK",this.startGame,this),this.stage.addChild(this.preloader),this.stage.update(),this.assets.setDownloadCompleted(this.gameAssetsReady.bind(this)),this.assets.setPreloadViewUpdate(this.preloader),this.assets.startDownload(),this.gameWrapper.style.visibility="visible"},c.gameAssetsReady=function(){this.preloader.addClick(),abcya.GameConfig.DELAYED_SOUND_QUEUE&&abcya.GameConfig.DELAYED_SOUND_QUEUE.length>0&&this.assets.startDelayedDownload()},c.startGame=function(a){this.stage.removeChild(this.preloader),this.preloader=null,this.sceneManager=new abcya.SceneManager},c.playSound=function(a,b,c){var d=null;if(b||(b=0),b===!0&&(b=-1),c||(c=0),!game.isMuted){var e=(new createjs.PlayPropsConfig).set({interrupt:createjs.Sound.INTERRUPT_ANY,loop:b,delay:c});d=createjs.Sound.play(a,e)}return d},c.layoutScreens=function(){this.preloader?this.preloader.layoutRatio():this.sceneManager&&this.sceneManager.layoutScreens()},a.abcya.GameMain=b}(window),function(a){function b(){this.initialize()}a.abcya=a.abcya||{};var c=b.prototype={};c.currentScene=null,c.currentStateFunction=null,c.bgImage=null,c.bg=null,c.fpsLabel=null,c.music=null,c.initialize=function(){game.level=1,game.addNum=5,game.score=0,game.themePlaying=!1;var a=game.isWidescreen?"mainBgWide":"mainBg";this.gameBg=new createjs.Bitmap(game.assets.getAsset(a)),game.stage.addChild(this.gameBg),this.fpsLabel=new createjs.Text("--fps","14pt odin","#FFF"),createjs.Ticker.on("tick",this.gameLoop,this),this.changeState(abcya.GameStates.GS_INTRO)},c.changeState=function(a){switch(a){case abcya.GameStates.GS_RUNSCENE:this.currentStateFunction=this.gameStateRunScene;break;case abcya.GameStates.GS_INTRO:this.currentStateFunction=this.gameStateShowIntro;break;case abcya.GameStates.GS_INST:this.currentStateFunction=this.gameStateShowInst;break;case abcya.GameStates.GS_GAME:this.currentStateFunction=this.gameStateShowGame;break;case abcya.GameStates.GS_END:this.currentStateFunction=this.gameStateShowEnd;break;case abcya.GameStates.GS_ABOUT:this.currentStateFunction=this.gameStateShowAbout;break;case abcya.GameStates.GS_RESULTS:this.currentStateFunction=this.gameStateShowResults;break;case abcya.GameStates.GS_DONUT:this.currentStateFunction=this.gameStateShowDonut;break;case abcya.GameStates.GS_PICK_SHAPE:this.currentStateFunction=this.gameStateShowPickShape;break;case abcya.GameStates.GS_PICK_FROST_COLOR:this.currentStateFunction=this.gameStateShowPickFrostColor;break;case abcya.GameStates.GS_PICK_SPRINKLES:this.currentStateFunction=this.gameStateShowPickSprinkles;break;case abcya.GameStates.GS_PICK_SPRINKLES_COLOR:this.currentStateFunction=this.gameStateShowPickSprinklesColor}},c.gameStateRunScene=function(a){game.hasFocus&&(this.currentScene.tick&&this.currentScene.tick(a),null!=game.gameBackground&&game.gameBackground.tick())},c.gameStateShowIntro=function(a){var b=new abcya.IntroScreen;b.on(abcya.GameStateEvents.GE_SHOW_INST,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INST}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowInst=function(a){var b=new abcya.InstructionsScreen;b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_RESULTS,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_RESULTS}),b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowGame=function(a){var b=new abcya.GameScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.on(abcya.GameStateEvents.GE_SHOW_RESULTS,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_RESULTS}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowAbout=function(a){var b=new abcya.AboutScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowResults=function(a){var b=new abcya.ResultsScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.on(abcya.GameStateEvents.GE_SHOW_DONUT,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_DONUT}),b.on(abcya.GameStateEvents.GE_SHOW_PICK_SHAPE,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_PICK_SHAPE}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowDonut=function(a){var b=new abcya.DonutScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.on(abcya.GameStateEvents.GE_SHOW_DONUT,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_DONUT}),b.on(abcya.GameStateEvents.GE_SHOW_PICK_SHAPE,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_PICK_SHAPE}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowPickShape=function(a){var b=new abcya.PickShapeScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.on(abcya.GameStateEvents.GE_SHOW_DONUT,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_DONUT}),b.on(abcya.GameStateEvents.GE_SHOW_PICK_FROST_COLOR,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_PICK_FROST_COLOR}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowPickFrostColor=function(a){var b=new abcya.PickFrostColorScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.on(abcya.GameStateEvents.GE_SHOW_DONUT,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_DONUT}),b.on(abcya.GameStateEvents.GE_SHOW_PICK_SPRINKLES,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_PICK_SPRINKLES}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowPickSprinkles=function(a){var b=new abcya.PickSprinklesScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.on(abcya.GameStateEvents.GE_SHOW_DONUT,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_DONUT}),b.on(abcya.GameStateEvents.GE_SHOW_PICK_SPRINKLES_COLOR,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_PICK_SPRINKLES_COLOR}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowPickSprinklesColor=function(a){var b=new abcya.PickSprinklesColorScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.on(abcya.GameStateEvents.GE_SHOW_GAME,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_GAME}),b.on(abcya.GameStateEvents.GE_SHOW_END,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_END}),b.on(abcya.GameStateEvents.GE_SHOW_DONUT,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_DONUT}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.gameStateShowEnd=function(a){var b=new abcya.EndScreen;b.on(abcya.GameStateEvents.GE_SHOW_INTRO,this.onStateEvent,this,!1,{state:abcya.GameStates.GS_INTRO}),b.addEventListener("TOGGLE_MUSIC",this.controlMusic.bind(this)),game.stage.addChild(b),this.currentScene=b,this.changeState(abcya.GameStates.GS_RUNSCENE)},c.onStateEvent=function(a,b){this.changeState(b.state)},c.gameLoop=function(a){null!=this.currentStateFunction&&this.currentStateFunction(a),game.stage.update(a)},c.controlMusic=function(a){1==a._musicOn?null==this.music&&this.playMusic():(game.themePlaying=!1,null!=this.music&&(this.music.stop(),this.music=null))},c.playMusic=function(){this.music=createjs.Sound.play("music"),this.music.volume=.3,this.music.addEventListener("complete",this.playMusic.bind(this)),game.themePlaying=!0},c.layoutScreens=function(){if(this.currentScene){var a=game.isWidescreen?"mainBgWide":"mainBg";this.gameBg.image=game.assets.getAsset(a),game.gameBackground&&game.gameBackground.updateSize(game.screen_width,game.screen_height),this.currentScene.layoutRatio,this.currentScene.layoutRatio()}},a.abcya.SceneManager=b}(window),function(a){function b(a){this.Container_constructor(),this.initialize(a)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container),d=32,e=20,f=8;c.soundInstance;var g,h,i,j;c.animatedSprite=null,c.isIOS=!1,c.audioFileName=null,c.bitmap=null,c.initialize=function(a){var b=new createjs.Bitmap(game.assets.getAsset(a));this.bitmap=b,centerRegPoints(this.bitmap),this.addChild(this.bitmap);var c=navigator.userAgent.toLowerCase().indexOf("iphone"),d=navigator.userAgent.toLowerCase().indexOf("ipad"),e=navigator.userAgent.toLowerCase().indexOf("ipod");(c>-1||d>-1||e>-1)&&(this.isIOS=!0),this.init()},c.talkAudio=function(a){this.audioFileName=a,this.startPlayback()},c.init=function(){var a=createjs.Sound.activePlugin.context;g=a.createAnalyser(),g.fftSize=d,g.smoothingTimeConstant=.1,g.connect(a.destination);var b=createjs.Sound.activePlugin.dynamicsCompressorNode;b.disconnect(),b.connect(g),h=new Float32Array(g.frequencyBinCount),i=new Uint8Array(g.frequencyBinCount),j=new Uint8Array(g.frequencyBinCount),circleFreqChunk=g.frequencyBinCount/f},c.startPlayback=function(){this.soundInstance||(this.soundInstance=createjs.Sound.play(this.audioFileName,createjs.Sound.INTERRUPT_ANY),this.soundInstance.addEventListener("complete",this.soundDone.bind(this)),createjs.Ticker.addEventListener("tick",this.tick.bind(this)),createjs.Ticker.setInterval(e))},c.tick=function(a){g.getFloatFrequencyData(h),g.getByteFrequencyData(i),g.getByteTimeDomainData(j);for(var b=0;b<f;b++){for(var c=0,d=0,e=circleFreqChunk;e;e--){var k=(f-b)*circleFreqChunk-e;c+=i[k],d+=j[k]}c=c/circleFreqChunk/255;var l=2;this.isIOS&&(l=4);var m=l*c-.6;m<1.15&&(m=.2),this.bitmap.scaleY=m}},c.soundStop=function(){this.soundInstance&&(this.soundInstance.stop(),this.soundInstance.removeAllEventListeners(),this.soundInstance=null)},c.soundDone=function(){this.soundInstance.removeAllEventListeners(),this.soundInstance=null,log("sound completed");var a=new createjs.Event("SOUND_DONE");this.dispatchEvent(a)},a.abcya.AudioResponsiveSprite=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c){this.Container_constructor(),this.initialize(a,b,c)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.text=null,c.size=null,c.color=null,c.textLabel=null,c.value=0,c.graphics=[],c.initialize=function(a){this.setValue(a)},c.setValue=function(a){numberStr=a+" ";for(var b=numberStr.split(""),c=0;c<this.graphics.length;c++){var d=this.graphics[c];this.removeChild(d)}for(var c=0;c<b.length;c++){var d=new createjs.Bitmap(game.assets.getAsset("bit-font-"+b[c]));d.scaleX=d.scaleY=2.5,d.x=70*c,this.addChild(d),this.graphics.push(d)}},c.countToValue=function(a){for(var b=0,c=this.value+1;c<a+1;c++)createjs.Tween.get(this).wait(b).call(this.setValue,[c],this),b+=50;return b},c.stop=function(){this.soundLoop.stop()},a.abcya.BitFontNumber=createjs.promote(b,"Container")}(window);var Box2dHelper={};Box2dHelper.setup=function(){function a(){o=!0,r.pauseResume(!1),$("#paused").css({display:"none"})}function b(){o=!1,r.pauseResume(!0),$("#paused").css({display:"block"})}var c,d,e,f=Box2D.Common.Math.b2Vec2,g=Box2D.Dynamics.b2BodyDef,h=Box2D.Dynamics.b2Body,i=Box2D.Dynamics.b2FixtureDef,j=(Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2World),k=Box2D.Collision.Shapes.b2PolygonShape,l=Box2D.Collision.Shapes.b2CircleShape,m=Box2D.Dynamics.b2DebugDraw,n=0,o=!0;$("#debug").on("click",function(){$("#debugCanvas").toggle()}),$(document).ready(function(){p.canvas(),p.ticker(),r.setup(),window.onfocus=a,window.onblur=b});var p=function(){var a=function(){a=document.getElementById("demoCanvas"),d=document.getElementById("debugCanvas"),c=a.getContext("2d"),e=d.getContext("2d"),stage=new Stage(a),stage.snapPixelsEnabled=!0},b=function(){Ticker.setFPS(30),Ticker.useRAF=!0,Ticker.addListener(luxanimals.demo)};return{canvas:a,ticker:b}}(),q=function(){var a=function(){var a=new Bitmap("images/bird.png");a.x=Math.round(500*Math.random()),a.y=-30,a.regX=25,a.regY=25,a.snapToPixel=!0,a.mouseEnabled=!1,stage.addChild(a),r.createBird(a)};return{spawn:a}}(),r=function(){var a,b=30,c=20,d=1/c,n=Date.now(),o=0,p=[],q=[],r=[],s=function(){a=new j(new f(0,10),(!0)),t();var c=new i;c.density=1,c.restitution=1,c.shape=new k,c.shape.SetAsBox(550/b,10/b);var d=new g;d.type=h.b2_staticBody,d.position.x=-25/b,d.position.y=509/b;var e=a.CreateBody(d);e.CreateFixture(c);var l=new i;l.shape=new k,l.shape.SetAsBox(10/b,550/b);var m=new g;m.type=h.b2_staticBody,m.position.x=-9/b,m.position.y=-25/b;var n=a.CreateBody(m);n.CreateFixture(l);var o=new i;o.shape=new k,o.shape.SetAsBox(10/b,550/b);var p=new g;p.type=h.b2_staticBody,p.position.x=509/b,p.position.y=-25/b;var q=a.CreateBody(p);q.CreateFixture(o)},t=function(){var c=new m;c.SetSprite(e),c.SetDrawScale(b),c.SetFillAlpha(.7),c.SetLineThickness(1),c.SetFlags(m.e_shapeBit|m.e_jointBit),a.SetDebugDraw(c)},u=function(a,c){this.body=a,this.skin=c,this.update=function(){this.skin.rotation=this.body.GetAngle()*(180/Math.PI),this.skin.x=this.body.GetWorldCenter().x*b,this.skin.y=this.body.GetWorldCenter().y*b},q.push(this)},v=function(c){var d=new i;d.density=1,d.restitution=.6,d.shape=new l(24/b);var e=new g;e.type=h.b2_dynamicBody,e.position.x=c.x/b,e.position.y=c.y/b;var f=a.CreateBody(e);f.CreateFixture(d);var j=new u(f,c);f.SetUserData(j),r.push(f)},w=function(a){stage.removeChild(a.skin),q.splice(q.indexOf(a),1)},x=function(){var b=Date.now(),e=b-n;for(o+=e,n=b;o>=c;){for(var f=0,g=p.length;f<g;f++)w(p[f].GetUserData()),p[f].SetUserData(null),a.DestroyBody(p[f]);p=[];for(var f=0,g=q.length;f<g;f++)q[f].update();a.Step(d,10,10),o-=c,a.ClearForces(),a.m_debugDraw.m_sprite.graphics.clear(),a.DrawDebugData(),r.length>30&&(p.push(r[0]),r.splice(0,1))}},y=function(a){d=a?0:1/c,n=Date.now()};return{setup:s,update:x,createBird:v,pauseResume:y}}(),s=function(a,b){o&&(r.update(),stage.update(),n++,n%10===0&&(n=0,q.spawn()))};return{tick:s}}(),function(a){function b(){this.Container_constructor(),this.initialize(arguments)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.arguments=null,c.counter=0,c.callFunc=null,c.callObj=null,c.initialize=function(){this.counter=0},c.chainAnimations=function(){this.arguments=arguments;var a=this.arguments[this.counter];this.callObj=a[0],this.callFunc=a[1],this.callObj.addEventListener("ANIMATION_DONE",this.nextObject.bind(this))},c.nextObject=function(){if(log("NEXT OBJECT CALLED"),this.callFunc(),this.callObj.removeAllEventListeners(),this.counter++,!(this.counter>=this.arguments.length)){var a=this.arguments[this.counter];this.callObj=a[0],this.callFunc=a[1],this.callObj.addEventListener("ANIMATION_DONE",this.nextObject.bind(this))}},a.abcya.ChainAnimations=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c,d){this.Container_constructor(),this.initialize(a,b,c,d)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.text=null,c.size=null,c.color=null,c.textLabel=null,c.value=0,c.soundString=null,c.sound=null,c.enabled=!0,c.initialize=function(a,b,d,e){this.text=a,this.fontAndSize=b,this.color=d,this.soundString=e,log("ss = "+e),this.textLabel=new createjs.Text(a,b,d),this.textLabel.textAlign="center",this.addChild(this.textLabel);var f=new createjs.Shape;f.graphics.beginFill("#b4e3f6").drawRect(-.5*this.getBounds().width,0*this.getBounds().height,this.getBounds().width,this.getBounds().height),this.addChild(f),f.alpha=.01,this.on("mousedown",c.doClick.bind(this))},c.doClick=function(a){this.enabled&&(null!=this.sound&&this.sound.stop(),log("soundString = "+this.soundString),this.sound=createjs.Sound.play(this.soundString,{interrupt:createjs.Sound.INTERRUPT_ANY}),createjs.Tween.get(this,{loop:!1}).to({scaleX:1.1,scaleY:1.1},100,createjs.Ease.quadOut).to({scaleX:1,scaleY:1},100,createjs.Ease.quadOut))},c.play=function(){this.sound=createjs.Sound.play(this.soundString,{interrupt:createjs.Sound.INTERRUPT_ANY})},c.stop=function(){this.sound.stop()},a.abcya.ClickableText=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c){this.Container_constructor(),this.initialize(a,b,c)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.text=null,c.size=null,c.color=null,c.textLabel=null,c.value=0,c.initialize=function(a,b,c){this.textTemplate=a,this.size=b,this.color=c,this.textLabel=new createjs.Text("",b+"pt odin",c);var d=this.textTemplate.replace("_VALUE_",""+this.value);this.textLabel.text=d,this.textLabel.text.textAlign="center",this.addChild(this.textLabel)},c.addValue=function(a){var b=this.value+a;this.setValue(b)},c.addValueMoney=function(a){var b=this.value+a;this.setValueMoney(b)},c.subtractValue=function(a){var b=this.value-a;this.setValue(b)},c.subtractValueMoney=function(a){var b=this.value-a;this.setValueMoney(b)},c.setValueMoney=function(a){this.value=a;var b=(a/100).toFixed(2),c=this.textTemplate.replace("_VALUE_",""+b);this.textLabel.text=c},c.setValue=function(a){this.value=a;var b=this.textTemplate.replace("_VALUE_",""+a);this.textLabel.text=b},c.getValue=function(){return this.value},c.getValueString=function(){return this.textLabel.text},c.doClick=function(){this.enabled&&createjs.Sound.play("click")},c.countToValue=function(a){for(var b=0,c=this.value+1;c<a+1;c++)createjs.Tween.get(this).wait(b).call(this.setValue,[c],this),b+=50;return b},a.abcya.CounterText=createjs.promote(b,"Container")}(window),function(a){function b(a,c){this.Container_constructor(),this.initialize(a,c),b.instances.push(this)}b.instances=[],a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.spriteSheet=null,c.name=null,c.enabled=!0,c.originX=null,c.originY=null,c.hitTargets=[],c.missTargets=[],c.hitListener=null,c.movedListener=null,c.partialHitListener=null,c.faceValue=0,c.outListener=null,c.inTarget=!1,c.dropMoneySound=null,c.removeMoneySound=null,c.lastPosX=null,c.lastPosY=null,c.lastTouchX=0,c.lastTouchY=0,c.stillRotating=!1,c.selected=!1,b.currentPieceNumber=0,b.cleanUp=function(){b.instances=[]},b.deselectAll=function(){for(var a=b.instances.length,c=0;c<a;c++){var d=b.instances[c];d.deselect()}},b.hideAll=function(){for(var a=b.instances.length,c=0;c<a;c++){var d=b.instances[c];d.alpha=0}},b.checkCollisionAll_orig=function(){var a=b.instances.length;log("instances total = "+a);for(var c=0;c<a;c++){var d=b.instances[c],e=d.checkIntersectionWithTarget();log(e?"true = "+c:"false = "+c)}return!1},b.checkCollisionAll=function(a,c){for(var d=new abcya.MultiSprite(a,c),e=b.instances.length,f=0;f<e;f++){var g=b.instances[f];d.addSprite(g)}centerRegPoints(d),d.x=c.x,d.y=c.y,d.cache(0,0,d.getBounds().width,d.getBounds().height);var h=new createjs.Bitmap(d.cacheCanvas);h.setBounds(c.getBounds().x,c.getBounds().y,c.getBounds().width,c.getBounds().height),centerRegPoints(h),h.x=c.x,h.y=c.y;var i=ndgmr.checkPixelCollision3(h,c,0);return log(i?"-----> true ":"------> false"),i},c.initialize=function(a,b){this.hitTargets=[],this.sprite=new createjs.Sprite(a,b),this.name=b,this.spriteSheet=a,centerRegPoints(this.sprite),this.addChild(this.sprite),this.sprite.addEventListener("pressmove",c.handlePress.bind(this)),this.sprite.on("mousedown",c.doClick.bind(this)),this.sprite.on("pressup",c.doClickUp.bind(this)),this.deselect()},c.select=function(){this.selected=!0},c.deselect=function(){this.selected=!1},c.setAllDisabled=function(){for(var a=b.instances.length,c=0;c<a;c++){var d=b.instances[c];d.setButtonOff()}},c.setAllEnabled=function(){for(var a=b.instances.length,c=0;c<a;c++){var d=b.instances[c];d.setButtonOn()}},c.handlePress=function(a){this.enabled&&(this.x=a.stageX,this.y=a.stageY)},c.handlePressRotate=function(a){if(this.selected&&this.rotate){if(0==this.lastTouchX&&0==this.lastTouchY)return this.lastTouchX=a.stageX,void(this.lastTouchY=a.stageY);var b=57.3*Math.atan2(this.y-this.lastTouchY,this.x-this.lastTouchX),c=57.3*Math.atan2(this.y-a.stageY,this.x-a.stageX),d=c-b;this.rotation+=d,this.lastTouchX=a.stageX,this.lastTouchY=a.stageY}},c.doneRotate=function(){this.stillRotating=!1},c.doClickRotate=function(a){this.selected&&(this.stillRotating||(this.rotate=!0,this.lastTouchX=a.stageX,this.lastTouchY=a.stageY))},c.doClickUpRotate=function(a){if(this.selected){this.rotate=!1;var b=0,c=this.rotation;c<=-360&&(c=this.rotation%360),c<0&&(c+=360),c>=360&&(c=this.rotation%360),b=c>-22.5&&c<=22.5?0:c>22.5&&c<=67.5?45:c>67.5&&c<=112.5?90:c>112.5&&c<=157.5?135:c>157.5&&c<=202.5?180:c>202.5&&c<=247.5?225:c>247.5&&c<=292.5?270:c>292.5&&c<=337.5?315:360,this.rotation<0,this.rotation=c,this.stillRotating=!0,createjs.Sound.play("click",createjs.Sound.INTERRUPT_ANY),createjs.Tween.get(this).to({rotation:b},500,createjs.Ease.bounceOut).call(this.doneRotate,[],this),this.movedListener(this)}},c.getRotation=function(a){var b=a.rotation;return b<=-360&&(b=a.rotation%360),b<0&&(b+=360),b>=360&&(b=a.rotation%360),b},c.moveToLastPosition=function(){createjs.Tween.get(this).wait(0).to({x:this.lastPosX,y:this.lastPosY},500,createjs.Ease.quadOut)},c.doClick=function(){this.enabled&&(b.deselectAll(),this.select(),this.parent.setChildIndex(this,this.parent.getNumChildren()-1))},c.doClickUp=function(a){var b=game.canvas.width,c=game.canvas.height,d=a.stageX-b/2,e=a.stageY-c/2;return void log("x = width/2 + "+d+", y = height/2 + "+e)},c.sameRotation=function(a,b){if(this.name.indexOf("5")>-1){var c=this.getRotation(a)%90,d=this.getRotation(b)%90;return c==d}if(this.name.indexOf("4")>-1){var c=this.getRotation(a)%180,d=this.getRotation(b)%180;return c==d}var c=this.getRotation(a),d=this.getRotation(b);return c==d},c.checkIntersectionWithTarget=function(){if(null!=this.hitTargets){for(var a=0;a<this.hitTargets.length;a++){var b=this.hitTargets[a],c=ndgmr.checkPixelCollision2(this.sprite,b,0);if(c&&this.sameRotation(this,b))return!0}return!1}return!1},c.disappear=function(){createjs.Tween.get(this).to({scaleX:.8,scaleY:.8,alpha:1},100,createjs.Ease.quadOut).to({scaleX:1,scaleY:1,alpha:1},100,createjs.Ease.quadOut).to({scaleX:.8,scaleY:.8,alpha:1},100,createjs.Ease.quadOut).to({scaleX:1,scaleY:1,alpha:1},100,createjs.Ease.quadOut).to({scaleX:.8,scaleY:.8,alpha:1},100,createjs.Ease.quadOut).to({scaleX:1,scaleY:1,alpha:1},100,createjs.Ease.quadOut),createjs.Tween.get(this).wait(600).call(this.removeThis.bind(this),[],this)},c.removeThis=function(){null!=this.parent&&this.parent.removeChild(this)},c.setButtonOn=function(){this.enabled=!0,this.alpha=1},c.setButtonOff=function(){this.enabled=!1,this.alpha=.6},a.abcya.DraggableSprite=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.initialize=function(){this.drawingArea=new createjs.Bitmap(game.assets.getAsset("drawing_area")),this.addChild(this.drawingArea)},c.floodFill=function(a,b,c){this.cache(0,0,this.getBounds().width,this.getBounds().height);var d=new createjs.BitmapData(this.cacheCanvas),e=this.globalToLocal(a,b);d.floodFill(e.x,e.y,c);var f=new createjs.Bitmap(d.canvas);log("here"),this.addChild(f)},a.abcya.DrawingArea=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c,d){this.Container_constructor(),this.initialize(a,b,c,d)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.message=null,c.size=null,c.color=null,c.textLabel=null,c.currentString=null,c.currentLetter=0,c.currentMessage="",c.pencil=null,c.time=100,c.line=null,c.lastPosX=0,c.lastPosY=0,c.points=[],c.counter=0,c.initialize=function(a,b,c,d){this.message=a,this.size=b,this.color=c,this.pencil=d,this.textLabel=new createjs.Text("",b+"pt odin",c),this.addChild(this.textLabel),this.line=new createjs.Shape,this.addChild(this.line)},c.stopAnimation=function(){createjs.Tween.removeTweens(this.pencil)},c.startAnimation=function(){this.movePencil(0,this.startLetters)},c.startLetters=function(){waitDoFunction(this.time,this.drawLetter.bind(this),!0,this.message.length)},c.drawLetter=function(a){var b=this.message.charAt(this.currentLetter);this.currentMessage+=b,this.textLabel.text=this.currentMessage;var c=this.localToGlobal(this.textLabel.getBounds().x,this.textLabel.getBounds().y);if(this.pencil.x=c.x+this.textLabel.getBounds().width-70,this.currentLetter++," "!=b){var d=c.y-50,e=c.y+.5*this.textLabel.getBounds().height-50;createjs.Tween.get(this.pencil,{loop:!1}).to({y:e},50,null).to({y:d},50,null),this.currentLetter>=this.message.length&&(log("FIRING EVENT"),this.animationDone())}},c.movePencil=function(a,b){var c=Math.abs(this.pencil.x-this.x),d=Math.abs(this.pencil.y-this.y),e=Math.sqrt(c*c+d*d);createjs.Tween.get(this.pencil,{loop:!1}).to({x:this.x+a-70,y:this.y-70},2*e,null).call(b,[],this)},c.animationDone=function(){var a=new createjs.Event("ANIMATION_DONE");this.dispatchEvent(a)},c.startCircle=function(){log("start circle"),this.movePencil(this.getBounds().width,this.drawCircle)},c.drawCircle=function(){log("DRAW circle"),this.defineCircle(),this.drawPosX=0,this.drawPosY=0,this.line.graphics.setStrokeStyle(3),this.line.graphics.beginStroke("#fff"),this.line.graphics.moveTo(this.drawPosX,this.drawPosY),this.line.graphics.endStroke(),this.counter=0,waitDoFunction(6,this.drawPoints.bind(this),!0,this.points.length)},c.defineCircle=function(){log("DEFINE circle"),this.points=[];var a=this.textLabel.getBounds();a.x-=0,a.y-=0,a.width+=8,a.height+=10;for(var b=a.x+a.width,c=a.y,d=20,e=a.width/d,f=0;f<d;f++){var g=b-f*e;this.points.push({x:g,y:c})}for(var h=a.x,i=a.y+.5*a.height,j=.5*a.height,k=270;k>90;k-=20){var l=k*Math.PI/180,m=h+j*Math.cos(l),n=i+j*Math.sin(l);this.points.push({x:m,y:n})}for(var o=a.x,p=a.y+a.height,f=0;f<d;f++){var g=o+f*e;this.points.push({x:g,y:p})}for(var q=a.x+a.width,r=a.y+.5*a.height,s=.5*a.height,k=90;k>-150;k-=20){var l=k*Math.PI/180,m=q+s*Math.cos(l),n=r+s*Math.sin(l);this.points.push({x:m,y:n})}},c.drawPoints=function(){if(log("draw points"),this.counter+2>=this.points.length)return this.animationDone(),void(this.points=[]);this.line.graphics.beginStroke(this.color),this.line.graphics.moveTo(this.points[this.counter].x,this.points[this.counter].y),this.line.graphics.lineTo(this.points[this.counter+1].x,this.points[this.counter+1].y),this.counter++,this.line.graphics.endStroke();var a=this.localToGlobal(this.points[this.counter+1].x,this.points[this.counter+1].y);this.pencil.x=a.x-70,this.pencil.y=a.y-70},c.doClick=function(){this.enabled&&createjs.Sound.play("click")},a.abcya.DrawingText=createjs.promote(b,"Container")}(window),function(a){function b(a){this.Container_constructor(),this.initialize(a)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.size=null,c.time=null,c.particleCount=0,c.initialize=function(a){this.size=a,this.time=Date.now()},c.emit=function(a,b){switch(this.numParticles=b,createjs.Ticker.setInterval(25),createjs.Ticker.setFPS(40),a){case"fountain":createjs.Ticker.on("tick",this.fountain,this);break;case"gold_coin_explosion":this.sprinklesOn=!0,createjs.Ticker.on("tick",this.explosion2,this);break;case"silver_coin_explosion":this.sprinklesOn=!0,createjs.Ticker.on("tick",this.explosion3,this);break;case"snow":createjs.Ticker.on("tick",this.snow,this);break;case"sprinkles1":this.sprinklesOn=!0,createjs.Ticker.on("tick",this.sprinkles1,this);break;case"sprinkles2":this.sprinklesOn=!0,createjs.Ticker.on("tick",this.sprinkles2,this);break;case"sprinkles3":this.sprinklesOn=!0,createjs.Ticker.on("tick",this.sprinkles3,this);break;case"sprinkles4":this.sprinklesOn=!0,createjs.Ticker.on("tick",this.sprinkles4,this);break;default:log("default case"),this.emitterName=a,createjs.Ticker.on("tick",this.explodeSprinkles,this)}},c.createCircle=function(a,b,c){var d=new createjs.Shape;d.graphics.beginFill(a).drawCircle(0,0,c);var e=this.globalToLocal(this.x,this.y);d.x=e.x+Math.random()*game.screen_width,d.y=e.y;d.speedX=0,d.speedY=1+Math.random(),d.time=0,d.alpha=b,this.addChild(d)},c.createSprite=function(a){var b=new createjs.Bitmap(game.assets.getAsset(a)),c=this.globalToLocal(this.x,this.y);b.x=c.x+100*Math.random(),b.y=b.y,b.speedX=0,b.speedY=150+150*Math.random(),b.time=0,b.rotation=360*Math.random(),b.scaleX=b.scaleY=.5+Math.random(),this.addChild(b)},c.createSprite2=function(a){var b=new createjs.Sprite(game.assets.pieces2Sheet,a);null==b&&log("sprite is null"+b);this.globalToLocal(this.x,this.y);b.x=b.x+100*Math.random(),
b.y=b.y,b.speedX=50-100*Math.random(),b.speedY=50-100*Math.random(),b.time=0,b.rotation=360*Math.random(),b.scaleX=b.scaleY=.5+Math.random(),this.addChild(b)},c.sprinkles1=function(a){var b=Date.now(),c=b-this.time;this.time=b;var d=(game.canvas.width,game.canvas.height);this.getNumChildren()>13&&(this.sprinklesOn=!1),this.sprinklesOn&&this.createSprite("sprinkle1");for(var e=0;e<this.getNumChildren();e++){var f=this.getChildAt(e),g=this.globalToLocal(this.x,this.y);f.time+=c/1e3,f.y=g.y+f.speedY*f.time+9*(f.time*f.time),f.y>d/2-70&&this.removeChildAt(e)}},c.sprinkles2=function(a){var b=Date.now(),c=b-this.time;this.time=b;var d=(game.canvas.width,game.canvas.height);this.getNumChildren()>13&&(this.sprinklesOn=!1),this.sprinklesOn&&this.createSprite("sprinkle2");for(var e=0;e<this.getNumChildren();e++){var f=this.getChildAt(e),g=this.globalToLocal(this.x,this.y);f.time+=c/1e3,f.y=g.y+f.speedY*f.time+9*(f.time*f.time),f.y>d/2-70&&this.removeChildAt(e)}},c.sprinkles3=function(a){var b=Date.now(),c=b-this.time;this.time=b;var d=(game.canvas.width,game.canvas.height);this.getNumChildren()>13&&(this.sprinklesOn=!1),this.sprinklesOn&&this.createSprite("sprinkle3");for(var e=0;e<this.getNumChildren();e++){var f=this.getChildAt(e),g=this.globalToLocal(this.x,this.y);f.time+=c/1e3,f.y=g.y+f.speedY*f.time+9*(f.time*f.time),f.y>d/2-70&&this.removeChildAt(e)}},c.sprinkles4=function(a){var b=Date.now(),c=b-this.time;this.time=b;var d=(game.canvas.width,game.canvas.height);this.getNumChildren()>13&&(this.sprinklesOn=!1),this.sprinklesOn&&this.createSprite("sprinkle4");for(var e=0;e<this.getNumChildren();e++){var f=this.getChildAt(e),g=this.globalToLocal(this.x,this.y);f.time+=c/1e3,f.y=g.y+f.speedY*f.time+9*(f.time*f.time),f.y>d/2-70&&this.removeChildAt(e)}},c.snow=function(){var b=Date.now(),c=b-this.time;this.time=b;var d=4*Math.random();this.createCircle("white",1,d);for(var e=0;e<this.getNumChildren();e++){var f=this.getChildAt(e),g=this.globalToLocal(this.x,this.y);f.time+=c/1e3,f.y=g.y+f.speedY*f.time+9*(f.time*f.time),f.y>a.innerHeight+this.size+200&&(f.y=-20)}},c.fountain=function(){var b=Date.now(),c=b-this.time;this.time=b,this.createCircle("red",1,this.size);for(var d=0;d<this.getNumChildren();d++){var e=this.getChildAt(d),f=this.globalToLocal(this.x,this.y);e.time+=c/1e3,e.x+=1*e.speedX/(e.time+1),e.y=f.y+e.speedY*e.time+90*(e.time*e.time),e.y>a.innerHeight+this.size&&(this.removeChildAt(d),d--)}},c.explodeSprinkles=function(){var b=this.emitterName,c=Date.now(),d=c-this.time;this.time=c,this.particleCount<this.numParticles&&(this.createSprite2(b),this.particleCount++);for(var e=0;e<this.getNumChildren();e++){var f=this.getChildAt(e);this.globalToLocal(this.x,this.y);f.time+=d/1e3,f.x+=f.speedX,f.y+=f.speedY,(f.y>a.innerHeight+this.size||f.time>5)&&(this.removeChildAt(e),0==this.getNumChildren()&&this.removeAllEventListeners(),e--)}},c.explosion2=function(a){var b=Date.now(),c=b-this.time;this.time=b;game.canvas.width,game.canvas.height;this.getNumChildren()>13&&(this.sprinklesOn=!1),this.sprinklesOn&&this.createSprite3("gold_particle");for(var d=0;d<this.getNumChildren();d++){var e=this.getChildAt(d);this.globalToLocal(this.x,this.y);e.time+=c/1e3,e.x+=.1*e.speedX,e.y+=.1*e.speedY,e.time>2&&this.removeChildAt(d)}},c.explosion3=function(a){var b=Date.now(),c=b-this.time;this.time=b;game.canvas.width,game.canvas.height;this.getNumChildren()>1&&(this.sprinklesOn=!1),this.sprinklesOn&&this.createSprite3("star_particle");for(var d=0;d<this.getNumChildren();d++){var e=this.getChildAt(d);e.scaleX=e.scaleY=.5;this.globalToLocal(this.x,this.y);e.time+=c/1e3,e.x+=.1*e.speedX,e.y+=.1*e.speedY,e.time>2&&this.removeChildAt(d)}},c.createSprite3=function(a){var b=new createjs.Bitmap(game.assets.getAsset(a));null==b&&log("sprite is null"+b);this.globalToLocal(this.x,this.y);b.x=b.x+100*Math.random(),b.y=b.y,b.speedX=50-100*Math.random(),b.speedY=50-100*Math.random(),b.time=0,b.rotation=360*Math.random(),this.addChild(b)},c.explosion=function(){var b=Date.now(),c=b-this.time;this.time=b;var d=randomNumber(1,4),e="white",f=1;1==d?(e="#ffffff",f=.7):2==d?(e="#4b745b",f=1):3==d?(e="#769167",f=1):4==d&&(e="#768c3d",f=1),this.particleCount<this.numParticles&&(this.createCircle(e,f,this.size),this.particleCount++);for(var g=0;g<this.getNumChildren();g++){var h=this.getChildAt(g);this.globalToLocal(this.x,this.y);h.time+=c/1e3,h.x+=h.speedX,h.y+=h.speedY,(h.y>a.innerHeight+this.size||h.time>3)&&(this.removeChildAt(g),0==this.getNumChildren()&&this.removeAllEventListeners(),g--)}},c.showBoundsRect=function(){var a=new createjs.Shape;a.graphics.beginStroke("#000"),a.graphics.setStrokeStyle(1),a.snapToPixel=!0,a.graphics.drawRect(0,0,this.getBounds().width,this.getBounds().height)},c.checkIntersect=function(){this.checkIntersection=function(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)}},a.abcya.Emitter=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c){this.Container_constructor(),this.initialize(a,b,c)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite1=null,c.sprite2=null,c.initialize=function(a,b,c){null==c?(log("spriteshet is null"),this.sprite1=new createjs.Bitmap(game.assets.getAsset(a)),this.sprite2=new createjs.Bitmap(game.assets.getAsset(b))):(log("spritesheEt is NOT null"),this.sprite1=new createjs.Sprite(c,a),this.sprite2=new createjs.Sprite(c,b)),centerRegPoints(this.sprite1),centerRegPoints(this.sprite2),this.sprite1.alpha=1,this.sprite2.alpha=0,this.addChild(this.sprite1),this.addChild(this.sprite2)},c.flipX=function(a){var b=this.scaleX;createjs.Tween.get(this,{loop:!1}).to({scaleX:.05},a/2,createjs.Ease.quadOut).call(this.flipAlphas,[],this).to({scaleX:b},a/2,createjs.Ease.quadOut)},c.flipY=function(a){var b=this.scaleY;createjs.Tween.get(this,{loop:!0}).to({scaleY:.05},a/2,null).call(this.flipAlphas,[],this).to({scaleY:b},a/2,null)},c.flipAlphas=function(){1==this.sprite1.alpha?(this.sprite1.alpha=0,this.sprite2.alpha=1):(this.sprite1.alpha=1,this.sprite2.alpha=0)},c.startMotion=function(){this.scaleX,this.scaleY;centerRegPoints(this),waitDoFunction(1e3,this.moveEyesRandom.bind(this),!0),createjs.Tween.get(this.outerEyes,{loop:!0}).wait(3e3).to({scaleY:.05},70,null).wait(120).to({scaleY:1},70,null),createjs.Tween.get(this.innerEyes,{loop:!0}).wait(3e3).to({scaleY:.05},70,null).wait(120).to({scaleY:1},70,null)},c.moveEyesRandom=function(){var a=5,b=randomNumber(0,2*a)-a,c=randomNumber(0,2*a)-a,d=this.innerEyes.x+b;d>a&&(d=a),d<-1*a&&(d=-1*a);var e=this.innerEyes.y+c;e>a&&(e=a),e<-1*a&&(e=-1*a),createjs.Tween.get(this.innerEyes,{loop:!1}).to({x:d,y:e},1e3,null)},c.setButtonOn=function(){this.enabled=!0,this.buttonSprite.alpha=1},c.setButtonOff=function(){this.enabled=!1,this.buttonSprite.alpha=.6},a.abcya.FlipSprite=createjs.promote(b,"Container")}(window),function(a){function b(a){this.Container_constructor(),this.initialize(a)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.bitmap=null,c.bitmapData=null,c.initialize=function(){},c.floodFill=function(a,b,c,d){d=d.substr(1),d=Number("0xFF"+d),log("color = "+d),this.addChild(a.clone(!0)),this.cache(this.getBounds().x,this.getBounds().y,this.getBounds().width,this.getBounds().height);var e=new createjs.BitmapData(this.cacheCanvas);e.floodFill(b,c,d);var f=new createjs.Bitmap(e.canvas);return log("here"),f},c.showBoundsRect=function(){var a=new createjs.Shape;a.graphics.beginStroke("#000"),a.graphics.setStrokeStyle(1),a.snapToPixel=!0,a.graphics.drawRect(0,0,this.getBounds().width,this.getBounds().height)},c.checkIntersect=function(){this.checkIntersection=function(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)}},a.abcya.FloodFillContainer=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.curWidth=null,c.curHeight=null,c.bgShape=null,c.bgColor=null,c.bgImage=null,c.bgImageName=null,c.clouds=null,c.cloudy=null,c.initialize=function(a,b){this.cloudy=!1,this.clouds=[],this.curWidth=a,this.curHeight=b},c.updateSize=function(a,b){this.curWidth=a,this.curHeight=b,this.setBounds(0,0,a,b),this.layoutBackground()},c.addBackgroundShape=function(a){this.bgColor=a,this.bgShape||(this.bgShape=new createjs.Shape),this.bgShape.cache(0,0,game.screen_width,game.screen_height),this.layoutBackground(),this.setBounds(0,0,game.screen_width,game.screen_height)},c.addBackgroundImage=function(a){this.bgImageName=a,this.bgImage&&this.removeChild(this.bgImage),this.bgImage=new createjs.Bitmap(game.assets.getAsset(this.bgImageName)),this.addChild(this.bgImage),this.bgImage.cache(0,0,this.bgImage.getBounds().width,this.bgImage.getBounds().height),this.layoutBackground()},c.setClouds=function(a){this.cloudy=a},c.layoutBackground=function(){this.bgShape&&(this.bgShape.uncache(),this.bgShape.graphics.clear(),this.bgShape.graphics.beginFill(this.bgColor),this.bgShape.graphics.drawRect(0,0,game.screen_width,game.screen_height),this.bgShape.cache(0,0,game.screen_width,game.screen_height)),this.bgImage&&(this.bgImage.uncache(),this.bgImage.x=0,this.bgImage.y=game.screen_height-this.bgImage.getBounds().height,this.bgImage.cache(0,0,this.bgImage.getBounds().width,this.bgImage.getBounds().height))},c.tick=function(){if(this.cloudy){if(this.clouds.length>0)for(var a=0;a<this.clouds.length;a++){var b=this.clouds[a];b.x+=b._velX,b.x>this.curWidth+50&&(this.removeChild(b),this.clouds.splice(a,1),a--)}this.clouds.length<4&&this.addNewCloud()}else if(this.clouds.length>0)for(;this.clouds.length>0;)this.removeChild(this.clouds.shift())},c.addNewCloud=function(){var a=new createjs.Sprite(game.assets.spriteSheet,"cloud-"+getRandom(1,2).toString());a.x=this.clouds.length<3?getRandom(0,this.curWidth):(a.getBounds().width+20)*-1,a.y=getRandom(0,this.curHeight/3),a.scaleX=getRandom(50,120)/100,a.scaleY=a.scaleX,a.alpha=getRandom(5,8)/10,a._velX=getRandom(5,10)/10,this.addChildAt(a,1),this.clouds.push(a)},c.addToCache=function(){this.cache(0,0,this.curWidth,this.curHeight)},a.abcya.GameBackground=createjs.promote(b,"Container")}(window),function(){window.abcya=window.abcya||{};var a={BALL_QUEUE:["plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball"],GAME_LEVEL:1,GOLD_COLLECTED:0,SILVER_COLLECTED:0,INSTRUCTIONS_SHOWN:!1,CURRENT_BALL:null,TOTAL_BLOCKERS:6};window.abcya.GameGlobals=a}(),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.buttonSprite=null,c.buttontext=null,c.enabled=!0,c.doAction=null,c.clickSound=null,c.initialize=function(a,b){this.name=a,null==b?(log("sprite name = "+a),this.buttonSprite=new createjs.Bitmap(game.assets.getAsset(a)),log("buttonSprite = "+this.buttonSprite)):this.buttonSprite=new createjs.Sprite(b,a),centerRegPoints(this.buttonSprite),this.addChild(this.buttonSprite),this.on("mousedown",c.doClick.bind(this))},c.doClick=function(a){if(this.enabled){null==this.clickSound?createjs.Sound.play("click",createjs.Sound.INTERRUPT_ANY):createjs.Sound.play(this.clickSound,createjs.Sound.INTERRUPT_ANY);var b=this.scaleX,c=this.scaleY;createjs.Tween.get(this).to({scaleX:.8*b,scaleY:.8*c,alpha:1},70,createjs.Ease.quadOut).to({scaleX:b,scaleY:c,alpha:1},70,createjs.Ease.quadOut),a._keyValue=this.name,this.doAction(a)}},c.enable=function(){this.enabled=!0,this.buttonSprite.alpha=1},c.disable=function(){this.enabled=!1,this.buttonSprite.alpha=0},c.addLabel=function(a,b,c){this.textLabel=new createjs.Text(a,b+"pt asap",c),this.textLabel.textAlign="center",this.textLabel.x=this.textLabel.getMeasuredWidth()/2-16,this.textLabel.y=-1*this.textLabel.getMeasuredHeight()/1.5,this.addChild(this.textLabel)},a.abcya.JButton=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.initialize=function(){},c.showBoundsRect=function(){var a=new createjs.Shape;a.graphics.beginStroke("#000"),a.graphics.setStrokeStyle(1),a.snapToPixel=!0,a.graphics.drawRect(0,0,this.getBounds().width,this.getBounds().height)},c.checkIntersect=function(){this.checkIntersection=function(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)}},a.abcya.JContainer=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c,d){this.Container_constructor(),this.initialize(a,b,c,d)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.dialogBitmap=null,c.button1=null,c.button2=null,c.clickSound1=null,c.clickSound2=null,c.button2=null,c.enabled=!0,c.doAction1=null,c.doAction2=null,c.doOnEnterAction=null,c.soundName=null,c.soundFile=null,c.inputField=null,c.inputFieldValue=null,c.initialize=function(a,b,d,e){this.dialogBitmap=new createjs.Bitmap(game.assets.getAsset(a)),centerRegPoints(this.dialogBitmap),this.addChild(this.dialogBitmap),null==e?(this.button1=new createjs.Bitmap(game.assets.getAsset(b)),d&&(this.button2=new createjs.Bitmap(game.assets.getAsset(d)))):(this.button1=new createjs.Sprite(e,b),d&&(this.button2=new createjs.Sprite(e,d))),centerRegPoints(this.button1),this.addChild(this.button1),null!=this.button2&&(centerRegPoints(this.button2),this.addChild(this.button2),this.button2.on("mousedown",c.doClick2.bind(this))),this.button1.on("mousedown",c.doClick1.bind(this)),createjs.Sound.play("pop_up",{interrupt:createjs.Sound.INTERRUPT_ANY})},c.playSound=function(){null!=this.soundName&&(this.soundFile=createjs.Sound.play(this.soundName,createjs.Sound.INTERRUPT_ANY))},c.center=function(){this.x=game.canvas.width/2,this.y=game.canvas.height/2},c.doClick1=function(){this.enabled&&(null!=this.soundFile&&this.soundFile.stop(),null==this.clickSound1?createjs.Sound.play("click",createjs.Sound.INTERRUPT_ANY):createjs.Sound.play(this.clickSound1,createjs.Sound.INTERRUPT_ANY),createjs.Tween.get(this.button1).to({scaleX:.8,scaleY:.8,alpha:1},70,createjs.Ease.quadOut),this.doAction1(),createjs.Tween.get(this.button1).wait(70).to({scaleX:1,scaleY:1,alpha:1},70,createjs.Ease.quadOut).call(this.removeDialog.bind(this),[],this))},c.doClick2=function(){this.enabled&&(null!=this.soundFile&&this.soundFile.stop(),null==this.clickSound2?createjs.Sound.play("click",createjs.Sound.INTERRUPT_ANY):createjs.Sound.play(this.clickSound2,createjs.Sound.INTERRUPT_ANY),createjs.Tween.get(this.button2).to({scaleX:.8,scaleY:.8,alpha:1},70,createjs.Ease.quadOut),this.doAction2(),createjs.Tween.get(this.button2).wait(70).to({scaleX:1,scaleY:1,alpha:1},70,createjs.Ease.quadOut).call(this.removeDialog.bind(this),[],this))},c.addLabel=function(a,b,c,d,e,f){var g=new createjs.Text(a,b+"pt odin",c);g.x=d,g.y=e,null==f?g.textAlign="left":g.textAlign=f,this.addChild(g)},c.removeDialog=function(){null!=this.parent&&this.parent.removeChild(this)},c.setButtonOn=function(){this.enabled=!0,this.alpha=1},c.setButtonOff=function(){this.enabled=!1,this.alpha=.6},c.getInput=function(a,b){var c=document.createElement("input");c.setAttribute("id","userInput"),c.setAttribute("value",""),c.setAttribute("style","width:370px; height:60px"),c.style.fontSize="44px";var d=new createjs.DOMElement(document.getElementById("textInputHolder"));d.htmlElement.appendChild(c),this.inputField=new createjs.DOMElement(document.getElementById("userInput")),this.addChild(this.inputField),this.inputField.x=a,this.inputField.y=b},c.doAction=function(){},a.abcya.JDialog=createjs.promote(b,"Container")}(window),function(a){function b(a,c,d){this.Container_constructor(),this.initialize(a,c,d),b.instances.push(this)}b.instances=[],a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.type=null,c.name=null,c.enabled=!0,c.toggleOn=!1,c.doAction=null,c.currentTween=null,c.buttonType=1,c.shape=null,c.selectSize=74,c.number=null,b.getSelectedIndexes=function(a){for(var c=[],d=b.instances.length,e=0;e<d;e++){var f=b.instances[e];f.type!=a&&null!=a||f.toggleOn&&c.push(e)}return c},b.isOneSelected=function(a){var c=b.instances.length;log("len = "+c+", type = "+a);for(var d=0;d<c;d++){var e=b.instances[d];if((e.type==a||null==a)&&e.toggleOn)return!0}return!1},b.getLargestButtonWidth=function(a){var c=b.instances.length;log("len = "+c+", type = "+a);for(var d=0,e=0;e<c;e++){var f=b.instances[e];f.type!=a&&null!=a||f.getBounds().width>d&&(d=f.getBounds().width)}return d},b.areTwoSelected=function(a){var c=b.instances.length;log("len = "+c+", type = "+a);for(var d=0,e=0;e<c;e++){var f=b.instances[e];f.type!=a&&null!=a||f.toggleOn&&d++}return 2==d},b.deselectAll=function(a){var c=b.instances.length;log("len = "+c+", type = "+a);for(var d=0;d<c;d++){var e=b.instances[d];e.type!=a&&null!=a||e.deselect()}},b.disableAll=function(a){for(var c=b.instances.length,d=0;d<c;d++){var e=b.instances[d];e.type!=a&&null!=a||e.disable()}},b.enableAll=function(a){for(var c=b.instances.length,d=0;d<c;d++){var e=b.instances[d];e.type!=a&&null!=a||e.enable()}},c.initialize=function(a,b,d){null!=a?this.sprite=new createjs.Sprite(a,b):this.sprite=new createjs.Bitmap(game.assets.getAsset(b)),this.name=b,this.type=d,this.sprite.alpha=1,centerRegPoints(this.sprite),this.addChild(this.sprite),this.on("mousedown",c.doClick.bind(this));var e=74;"shape"==d&&(e=88);var f=e,g=new createjs.Graphics;g.setStrokeStyle(4),g.beginStroke("#ffffff"),this.shape=new createjs.Shape(g),this.shape.graphics.drawDashedRect(-1.05*e,-1.05*f,2.1*e,2.1*f,7),log("width = "+e),this.addChild(this.shape),this.shape.alpha=0},createjs.Graphics.prototype.dashedLineTo=function(a,b,c,d,e){this.moveTo(a,b);for(var f=c-a,g=d-b,h=Math.floor(Math.sqrt(f*f+g*g)/e),i=f/h,j=g/h,k=0;k++<h;)a+=i,b+=j,this[k%2==0?"moveTo":"lineTo"](a,b);return this[k%2==0?"moveTo":"lineTo"](c,d),this},createjs.Graphics.prototype.drawDashedRect=function(a,b,c,d,e){this.moveTo(a,b);var f=a+c,g=b+d;return this.dashedLineTo(a,b,f,b,e),this.dashedLineTo(f,b,f,g,e),this.dashedLineTo(f,g,a,g,e),this.dashedLineTo(a,g,a,b,e),this},c.disable=function(){this.enabled=!1,this.alpha=0},c.enable=function(){this.enabled=!0,this.alpha=1},c.doClick=function(){if(2!=this.buttonType||!b.areTwoSelected()){if(3==this.buttonType&&b.deselectAll(this.type),this.toggleOn=!this.toggleOn,this.toggleOn?("grow"==this.type?this.scaleX=this.scaleY=1.2:this.shape.alpha=1,this.toggleOn=!0):"grow"==this.type?this.scaleX=this.scaleY=.8:this.shape.alpha=0,createjs.Sound.play("click"),this.toggleOn){var a=new createjs.Event("TOGGLE_ON");this.dispatchEvent(a)}else{var a=new createjs.Event("TOGGLE_OFF");this.dispatchEvent(a)}1!=this.buttonType&&3!=this.buttonType||!b.isOneSelected()||this.doAction(this),2==this.buttonType&&b.areTwoSelected()&&(log("two are selected"),this.doAction(this))}},c.deselect=function(){this.toggleOn=!1,"grow"==this.type?this.scaleX=this.scaleY=.8:this.shape.alpha=0},a.abcya.JToggleButton=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c){this.Container_constructor(),this.initialize(a,b,c)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.keyShape=null,c.keyText=null,c.keyValue=null,c.keyId=null,c.isDown=null,c.upColor=null,c.downColor=null,c.initialize=function(a,b,c){this.keyWidth=b,this.keyHeight=c,this.keyValue=a,this.keyValue.indexOf("shift")!=-1&&(this.keyValue="shift"),"shift"==this.keyValue||"enter"==this.keyValue||"delete"==this.keyValue?this.keyWidth=2*b:"space"==this.keyValue&&(this.keyWidth=5*b),this.keyId=a+"_key",this.keyShape=new createjs.Shape,this.addChild(this.keyShape),this.setBounds(0,0,this.keyWidth,this.keyHeight);var d=this.keyValue,e=20;this.keyText=createCenteredText(d,e,"odin","#333"),this.keyText.x=this.keyWidth/2,this.keyText.y=this.keyHeight/2+this.keyText.getBounds().height/2,this.addChild(this.keyText),this.cache(0,0,this.keyWidth,this.keyHeight)},c.upperCase=function(){if("shift"!=this.keyValue&&"enter"!=this.keyValue&&"delete"!=this.keyValue){log("uppercase called!"),this.removeChild(this.keyText),this.keyValue=this.keyValue.toUpperCase();var a=this.keyValue,b=20;this.keyText=createCenteredText(a,b,"odin","#333"),this.keyText.x=this.keyWidth/2,this.keyText.y=this.keyHeight/2+this.keyText.getBounds().height/2,this.addChild(this.keyText),this.cache(0,0,this.keyWidth,this.keyHeight)}},c.lowerCase=function(){if("shift"!=this.keyValue&&"enter"!=this.keyValue&&"delete"!=this.keyValue){this.removeChild(this.keyText),this.keyValue=this.keyValue.toLowerCase();var a=this.keyValue,b=20;this.keyText=createCenteredText(a,b,"odin","#333"),this.keyText.x=this.keyWidth/2,this.keyText.y=this.keyHeight/2+this.keyText.getBounds().height/2,this.addChild(this.keyText),this.cache(0,0,this.keyWidth,this.keyHeight)}},c.setKeyColors=function(a,b){this.upColor=a,this.downColor=b,this.showKeyPress(!1)},c.showKeyPress=function(a){this.uncache(),this.isDown=a,this.keyShape.graphics.clear();var b=1==this.isDown?this.downColor:this.upColor;this.keyShape.graphics.beginFill(b),this.keyShape.graphics.drawRoundRect(0,0,this.keyWidth,this.keyHeight,6),this.cache(0,0,this.keyWidth,this.keyHeight)},a.abcya.Key=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.keySizeWidth=null,c.keySizeHeight=null,c.keySpacing=null,c.keys=null,c.isActive=null,c.shiftOn=!1,c.initialize=function(){var a=new createjs.Shape;a.graphics.beginFill("#fddc9a").drawRect(-game.canvas.width/2,-6,game.canvas.width,380),this.addChild(a),this.isActive=!1,this.keySizeHeight=1==game.isWidescreen?45:55,this.keySizeWidth=58,this.keySpacing=1==game.isWidescreen?4:6,this.topRow=this.createRow(["1","2","3","4","5","6","7","8","9","0","-","=","delete"]),this.secondRow=this.createRow(["q","w","e","r","t","y","u","i","o","p","[","]","\\"]),this.midRow=this.createRow(["a","s","d","f","g","h","j","k","l",";","'","enter"]),this.bottomRow=this.createRow(["shiftL","z","x","c","v","b","n","m",",",".","/","shiftR"]),this.spaceRow=this.createRow(["space"]),this.keys=[this.topRow,this.secondRow,this.midRow,this.bottomRow,this.spaceRow],this.positionKeys()},c.positionKeys=function(){for(var a=abcya.GameConfig.KEY_DOWN_COLOR,b=0;b<this.keys.length;b++){var c=this.keys[b],d=c.length*(this.keySizeWidth+this.keySpacing)-this.keySpacing;3==b&&(d+=this.keySizeWidth),4==b&&(d+=4*this.keySizeWidth);var e=-(d/2);0!=b&&3!=b||(e-=this.keySizeWidth/2),1==b&&(e+=this.keySizeWidth/4),3==b&&(e+=this.keySizeWidth/4);for(var f=b*(this.keySizeHeight+this.keySpacing),g=0;g<c.length;g++){var h;h=abcya.GameConfig.KEY_UP_COLOR;var i=c[g];i.setKeyColors(h,a),i.endX=0==g?e:c[g-1].endX+c[g-1].keyWidth+this.keySpacing,i.endY=f,i.x=i.endX,i.y=i.endY,this.addChild(i)}}},c.handleKeyPress=function(a){if(1==this.isActive&&0==a.currentTarget.isDown){if("shift"==a.currentTarget.keyValue){if(log("shift pressed!"),this.shiftOn=!this.shiftOn,this.shiftOn){for(var b=0;b<this.secondRow.length;b++){var c=this.secondRow[b];c.upperCase()}for(var b=0;b<this.midRow.length;b++){var c=this.midRow[b];c.upperCase()}for(var b=0;b<this.bottomRow.length;b++){var c=this.bottomRow[b];c.upperCase()}}else{for(var b=0;b<this.secondRow.length;b++){var c=this.secondRow[b];c.lowerCase()}for(var b=0;b<this.midRow.length;b++){var c=this.midRow[b];c.lowerCase()}for(var b=0;b<this.bottomRow.length;b++){var c=this.bottomRow[b];c.lowerCase()}}return}a.currentTarget.showKeyPress(!0),a.currentTarget.on("pressup",this.handleKeyUp,this,!0);var d=new createjs.Event("KEY_PRESS");d._keyValue=a.currentTarget.keyValue,this.dispatchEvent(d)}},c.handleKeyUp=function(a){a.currentTarget.showKeyPress(!1)},c.createRow=function(a){for(var b=[];b.length<a.length;){var c=new abcya.Key(a[b.length],this.keySizeWidth,this.keySizeHeight);c.on("mousedown",this.handleKeyPress.bind(this)),b.push(c)}return b},a.abcya.Keyboard=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.taskList=null,c.currentTask=null,c.initialize=function(){c.taskList=[]},c.addTask=function(a,b){var c={taskText:a,exitWrong:b,curCharIndex:0};this.taskList.push(c)},c.checkKey=function(a){if(null!=this.currentTask);else for(var b=0;b<this.taskList.length;b++)if(this.taskList[b].taskText.charAt(0).toLowerCase()==a){this.currentTask=this.taskList[b],this.currentTask.curCharIndex=0;break}var c={_charIndex:-1};return null!=this.currentTask&&(this.currentTask.taskText.charAt(this.currentTask.curCharIndex).toLowerCase()==a?(c._charIndex=this.currentTask.curCharIndex,this.currentTask.curCharIndex++,this.currentTask.curCharIndex>this.currentTask.taskText.length-1&&(this.taskComplete(this.currentTask),this.currentTask=null)):1==this.currentTask.exitWrong&&(this.currentTask.curCharIndex=0,this.currentTask=null)),c},c.taskComplete=function(a){this.taskList.splice(this.taskList.indexOf(a),1);var b=new createjs.Event("TASK_COMPLETE");this.dispatchEvent(b)},a.abcya.KeyboardTasks=createjs.promote(b,"Container")}(window),function(a){function b(a){this.Container_constructor(),this.initialize(a)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.positionsArray=[],c.colorsArray=[],c.spritesOn=[],c.spritesOff=[],c.line=null,c.lastPt=null,c.initialize=function(a){this.positionsArray=a,this.colorsArray=[],this.spritesOn=[],this.spritesOff=[],this.lastPt=null,this.line=new createjs.Shape,this.addChild(this.line);for(var b=0;b<a.length;b++){var c=randomNumber(1,4),d="red";d=1==c?"red":2==c?"blue":3==c?"green":"yellow";var e=a[b],f=this.globalToLocal(e.x,e.y),g=new createjs.Sprite(game.assets.piecesSheet,d+"_light_on");centerRegPoints(g),g.x=f.x,g.y=f.y,g.alpha=0,this.addChild(g),this.spritesOn.push(g);var h=new createjs.Sprite(game.assets.piecesSheet,d+"_light_off");centerRegPoints(h),h.x=f.x,h.y=f.y,h.alpha=1,this.addChild(h),this.spritesOff.push(h),null!=this.lastPt&&this.drawPoints(this.lastPt,f),this.lastPt=f}},c.drawPoints=function(a,b){this.line.graphics.beginStroke("#000"),this.line.graphics.moveTo(a.x,a.y),this.line.graphics.lineTo(b.x,b.y),this.line.graphics.endStroke()},c.lightSequence1=function(){waitDoFunction(1e3,this.lightSequenceOn1.bind(this),!0)},c.lightSequenceOn1=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];a%2==0?b.alpha=1:b.alpha=0}waitDoFunction(500,this.lightSequenceOff1.bind(this))},c.lightSequenceOff1=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];(a+1)%2==0?b.alpha=1:b.alpha=0}},c.lightSequence2=function(){waitDoFunction(80,this.lightSequenceOn2.bind(this),!0),this.currentBulbOnIndex=0},c.lightSequenceOn2=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];a==this.currentBulbOnIndex?b.alpha=1:b.alpha=0}this.currentBulbOnIndex++,this.currentBulbOnIndex>=this.spritesOn.length&&(this.currentBulbOnIndex=0)},c.lightSequence3=function(){waitDoFunction(150,this.lightSequenceOn3.bind(this),!0),this.currentBulbOnIndex=0},c.lightSequenceOn3=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];a>=this.currentBulbOnIndex&&a<this.currentBulbOnIndex+5?b.alpha=1:b.alpha=0}this.currentBulbOnIndex++,this.currentBulbOnIndex>=this.spritesOn.length&&(this.currentBulbOnIndex=0)},c.doClick=function(){if(this.enabled){null==this.clickSound?createjs.Sound.play("click",createjs.Sound.INTERRUPT_ANY):createjs.Sound.play(this.clickSound,createjs.Sound.INTERRUPT_ANY);var a=this.scaleX,b=this.scaleY;createjs.Tween.get(this).to({scaleX:.8*a,scaleY:.8*b,alpha:1},70,createjs.Ease.quadOut).to({scaleX:a,scaleY:b,alpha:1},70,createjs.Ease.quadOut),this.doAction()}},c.enable=function(){this.enabled=!0,this.buttonSprite.alpha=1},c.disable=function(){this.enabled=!1,this.buttonSprite.alpha=0},c.addLabel=function(a,b,c){this.textLabel=new createjs.Text(a,b+"pt asap",c),this.textLabel.textAlign="center",this.textLabel.x=this.textLabel.getMeasuredWidth()/2-16,this.textLabel.y=-1*this.textLabel.getMeasuredHeight()/1.5,this.addChild(this.textLabel)},a.abcya.LightString=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.template=null,c.initialize=function(a,b){this.spriteSheet=a,this.template=b},c.addSprite=function(a){var b=new createjs.Sprite(this.spriteSheet,a.name);centerRegPoints(b);var c=this.template.globalToLocal(a.x,a.y);b.x=c.x,b.y=c.y,b.rotation=a.rotation,this.addChild(b)},a.abcya.MultiSprite=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.initialize=function(){},a.abcya.PaperContainer=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.spriteName=null,c.spriteSheet=null,c.bar=null,c.percentageShape=null,c.valueLabel=null,c.startingSeconds=60,c.tickerEnabled=!0,c.initialize=function(a,b){this.spriteName=a,this.spriteSheet=b,this.bar=this.makeSprite(a),centerRegPoints(this.bar),this.percentageShape=new createjs.Shape,this.percentageShape.graphics.beginFill("#1A75BA").drawRoundRect(0,0,0,10);var c=new createjs.Shape;c.graphics.beginFill("#1A75BA").drawRoundRect(-1*this.bar.getBounds().width/2,-1*this.bar.getBounds().height/2,this.bar.getBounds().width,this.bar.getBounds().height,10),this.percentageShape.mask=c,this.addChild(this.percentageShape),this.valueLabel=new createjs.Text("0","14pt odin","#8d5b39"),this.valueLabel.x=-1*this.bar.getBounds().width/2,this.valueLabel.y=-45,this.addChild(this.valueLabel),this.valueLabel.alpha=0},c.start=function(){this.startTime=createjs.Ticker.getTime(),this.ticker=createjs.Ticker.setInterval(25),createjs.Ticker.setFPS(20),createjs.Ticker.on("tick",this.handleTick,this)},c.stop=function(){this.removeEventListener("tick",this.ticker),this.tickerEnabled=!1},c.handleTick=function(a){this.tickerEnabled||a.remove(),this.totalSeconds=Math.floor((createjs.Ticker.getTime()-this.startTime)/1e3);var b=100*this.totalSeconds/this.startingSeconds;this.showPercent(b)},c.showPercent=function(a){if(a>=100){a=100,this.stop();var b=new createjs.Event("TIMER_DONE");this.dispatchEvent(b)}var c=a/100*this.bar.getBounds().width;this.removeChild(this.percentageShape),this.percentageShape=new createjs.Shape,this.percentageShape.graphics.beginFill("#fff").drawRoundRect(-1*this.bar.getBounds().width/2,-1*this.bar.getBounds().height/2,this.bar.getBounds().width,this.bar.getBounds().height,10),this.percentageShape.graphics.beginFill("#1A75BA").drawRoundRect(-1*this.bar.getBounds().width/2,-1*this.bar.getBounds().height/2,c,this.bar.getBounds().height,10);var d=8;this.percentageShape.graphics.beginFill("#1A75BA").drawRect(-1*this.bar.getBounds().width/2+(c-d),-1*this.bar.getBounds().height/2,d,this.bar.getBounds().height);var e=new createjs.Shape;e.graphics.beginFill("#1A75BA").drawRoundRect(-1*this.bar.getBounds().width/2,-1*this.bar.getBounds().height/2,this.bar.getBounds().width,this.bar.getBounds().height,10),this.percentageShape.mask=e,this.addChild(this.percentageShape)},c.makeSprite=function(a){var b=null;return b=null==this.spriteSheet?new createjs.Bitmap(game.assets.getAsset(a)):new createjs.Sprite(this.spriteSheet,a),centerRegPoints(b),b},a.abcya.PercentageBar=createjs.promote(b,"Container")}(window),function(a){function b(a,c,d){this.Container_constructor(),this.initialize(a,c,d),b.instances.push(this)}b.instances=[],a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.name=null,c.enabled=!0,
c.startX=0,c.startY=0,c.pressMoveAction=null,c.clickUpAction=null,b.cleanUp=function(){b.instances=[]},c.initialize=function(a,b,d){this.sprite=new createjs.Bitmap(game.assets.getAsset(a)),this.name=a,this.startX=b,this.startY=d,centerRegPoints(this.sprite),this.addChild(this.sprite),this.sprite.addEventListener("pressmove",c.handlePressMove.bind(this)),this.sprite.on("mousedown",c.doClick.bind(this)),this.sprite.on("pressup",c.doClickUp.bind(this)),this.deselect()},c.select=function(){this.selected=!0},c.deselect=function(){this.selected=!1},c.handlePressMove=function(a){if(this.enabled){var b=370;a.stageX>this.startX-b&&a.stageX<this.startX+b?this.x=a.stageX:a.stopPropagation();var c=240;a.stageY>this.startY&&a.stageY<this.startY+c?this.y=a.stageY:a.stopPropagation(),this.pressMoveAction()}},c.doneRotate=function(){this.stillRotating=!1},c.moveToLastPosition=function(){createjs.Tween.get(this).wait(0).to({x:this.lastPosX,y:this.lastPosY},500,createjs.Ease.quadOut)},c.doClick=function(){this.enabled&&this.parent.setChildIndex(this,this.parent.getNumChildren()-1)},c.doClickUp=function(a){this.enabled&&this.clickUpAction()},c.disappear=function(){createjs.Tween.get(this).to({scaleX:.8,scaleY:.8,alpha:1},100,createjs.Ease.quadOut).to({scaleX:1,scaleY:1,alpha:1},100,createjs.Ease.quadOut).to({scaleX:.8,scaleY:.8,alpha:1},100,createjs.Ease.quadOut).to({scaleX:1,scaleY:1,alpha:1},100,createjs.Ease.quadOut).to({scaleX:.8,scaleY:.8,alpha:1},100,createjs.Ease.quadOut).to({scaleX:1,scaleY:1,alpha:1},100,createjs.Ease.quadOut),createjs.Tween.get(this).wait(600).call(this.removeThis.bind(this),[],this)},c.removeThis=function(){null!=this.parent&&this.parent.removeChild(this)},a.abcya.ShootingBall=createjs.promote(b,"Container")}(window),function(a){function b(a){this.Container_constructor(),this.initialize(a)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.soundFile=null,c.time=null,c.loopedSound=null,c.textLabel=null,c.totalSeconds=0,c.ticker=null,c.tickerEnabled=!0,c.startTime=0,c.countDownFrom=100,c.initialize=function(a){this.soundFile=a},c.play=function(a){this.time=a,this.loopedSound=createjs.Sound.play(this.soundFile,createjs.Sound.INTERRUPT_ANY),this.loopedSound.addEventListener("complete",this.playAgain.bind(this)),this.startTimer()},c.playForever=function(){this.loopedSound=createjs.Sound.play(this.soundFile,createjs.Sound.INTERRUPT_ANY),this.loopedSound.addEventListener("complete",this.playAgain.bind(this))},c.playAgain=function(){this.loopedSound.play()},c.startTimer=function(){this.startTime=createjs.Ticker.getTime(),this.ticker=createjs.Ticker.setInterval(25),createjs.Ticker.setFPS(20),createjs.Ticker.on("tick",this.handleTick,this)},c.stopTimer=function(){this.removeEventListener("tick",this.ticker),this.tickerEnabled=!1},c.handleTick=function(a){this.tickerEnabled||a.remove(),this.timeElapsed=createjs.Ticker.getTime()-this.startTime;var b=this.time-this.timeElapsed;b<=0&&(this.loopedSound.stop(),this.sendTimerDoneEvent(),a.remove())},c.stop=function(){this.loopedSound.stop(),this.sendTimerDoneEvent(),this.tickerEnabled=!1},c.sendTimerDoneEvent=function(){var a=new createjs.Event("SOUND_DONE");this.dispatchEvent(a)},a.abcya.SoundLoop=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.spriteSheet=null,c.name=null,c.enabled=!0,c.initialize=function(a,b){this.sprite=new createjs.Sprite(a,b),this.name=b,this.spriteSheet=a,centerRegPoints(this.sprite),this.addChild(this.sprite),this.on("mousedown",c.doClick.bind(this))},c.doClick=function(){var a=new abcya.DraggableSprite(this.spriteSheet,this.name);a.x=this.x+10,a.y=this.y+10,a.originX=this.originX,a.originY=this.originY,this.parent.addChild(a)},a.abcya.SpriteGenerate=createjs.promote(b,"Container")}(window),function(a){function b(a,b,c){this.Container_constructor(),this.initialize(a,b,c)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.enabled=!0,c.doAction=null,c.textLabel=null,c.initialize=function(a,b,c){this.sprite=new createjs.Sprite(a,b),centerRegPoints(this.sprite),this.addChild(this.sprite),this.textLabel=new createjs.Text(c,"18pt odin","#a47f62"),centerRegPoints(this.textLabel);var d=this.textLabel.getBounds();this.textLabel.x=d.width/2+5,this.textLabel.y=-4,this.textLabel.textAlign="center",this.addChild(this.textLabel),this.hide()},c.doClick=function(){this.enabled&&this.doAction()},c.hide=function(){this.alpha=0},c.show=function(){this.alpha=1},a.abcya.SpriteLabel=createjs.promote(b,"Container")}(window),function(a){function b(a){this.Container_constructor(),this.initialize(a)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.enabled=!0,c.initialize=function(a){this.sprite=a,centerRegPoints(this.sprite),this.addChild(a)},c.doLoop=function(a,b,c,d,e){this.x=a,this.y=b,createjs.Tween.get(this,{loop:!0}).to({x:c,y:d},e,null).to({x:a,y:b},0,null)},a.abcya.SpriteLoop=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.sprite=null,c.enabled=!0,c.initialize=function(a,b){this.sprite=new createjs.Sprite(a,b),centerRegPoints(this.sprite),this.addChild(this.sprite)},c.doClick=function(){createjs.Tween.get(this).to({scaleX:.8,scaleY:.8,alpha:1},70,createjs.Ease.quadOut),createjs.Tween.get(this).wait(70).to({scaleX:1,scaleY:1,alpha:1},70,createjs.Ease.quadOut)},a.abcya.SpriteTarget=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.inputField=null,c.textLabel1=null,c.textLabel2=null,c.textLabel3=null,c.textLabel4=null,c.currentTextLabel=null,c.currentLineIndex=1,c.initialize=function(){this.drawingArea=new createjs.Bitmap(game.assets.getAsset("paper")),centerRegPoints(this.drawingArea),this.addChild(this.drawingArea),this.textLabel1=new createjs.Text("","66pt print_clearly","#000"),this.textLabel1.x=-340,this.textLabel1.y=this.getBounds().height/2-485,this.textLabel1.maxWidth=690,this.addChild(this.textLabel1),this.textLabel2=new createjs.Text("","66pt print_clearly","#000"),this.textLabel2.x=-340,this.textLabel2.y=this.getBounds().height/2-485+90,this.textLabel2.maxWidth=690,this.addChild(this.textLabel2),this.textLabel3=new createjs.Text("","66pt print_clearly","#000"),this.textLabel3.x=-340,this.textLabel3.y=this.getBounds().height/2-485+180,this.textLabel3.maxWidth=690,this.addChild(this.textLabel3),this.textLabel4=new createjs.Text("","66pt print_clearly","#000"),this.textLabel4.x=-340,this.textLabel4.y=this.getBounds().height/2-485+270,this.textLabel4.maxWidth=690,this.addChild(this.textLabel4),this.currentTextLabel=this.textLabel1,this.nameLabel=new createjs.Text("Created On ABCYa.com by "+abcya.GameGlobals.USER_NAME,"24pt print_clearly","#000"),this.nameLabel.x=0,this.nameLabel.y=180,this.nameLabel.maxWidth=690,this.nameLabel.textAlign="center",this.addChild(this.nameLabel)},c.nextTextLabel=function(){switch(this.currentLineIndex++,this.currentLineIndex>4&&(this.currentLineIndex=1),this.currentLineIndex){case 1:this.currentTextLabel=this.textLabel1;break;case 2:this.currentTextLabel=this.textLabel2;break;case 3:this.currentTextLabel=this.textLabel3;break;case 4:this.currentTextLabel=this.textLabel4}return this.currentLineIndex},c.floodFill=function(a,b,c){this.cache(0,0,this.getBounds().width,this.getBounds().height);var d=new createjs.BitmapData(this.cacheCanvas),e=this.globalToLocal(a,b);d.floodFill(e.x,e.y,c);var f=new createjs.Bitmap(d.canvas);log("here"),this.addChild(f)},c.cleanUp=function(){for(abcya.GameGlobals.TEXT_LINE1=this.inputField1.htmlElement.value,abcya.GameGlobals.TEXT_LINE2=this.inputField2.htmlElement.value,abcya.GameGlobals.TEXT_LINE3=this.inputField3.htmlElement.value,abcya.GameGlobals.TEXT_LINE4=this.inputField4.htmlElement.value,this.inputField1.htmlElement.style.visibility="hidden",this.removeChild(this.inputField1),this.inputField2.htmlElement.style.visibility="hidden",this.removeChild(this.inputField2),this.inputField3.htmlElement.style.visibility="hidden",this.removeChild(this.inputField3),this.inputField4.htmlElement.style.visibility="hidden",this.removeChild(this.inputField4);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this)},a.abcya.TextContainer=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.size=null,c.color=null,c.textLabel=null,c.totalSeconds=0,c.ticker=null,c.tickerEnabled=!0,c.startTime=0,c.initialize=function(a,b){this.size=a,this.color=b,this.textLabel=new createjs.Text("00:00",a+"pt odin",b),this.addChild(this.textLabel)},c.start=function(){this.startTime=createjs.Ticker.getTime(),this.ticker=createjs.Ticker.setInterval(25),createjs.Ticker.setFPS(20),createjs.Ticker.on("tick",this.handleTick,this)},c.stop=function(){this.removeEventListener("tick",this.ticker),this.tickerEnabled=!1},c.handleTick=function(a){this.tickerEnabled||a.remove(),this.totalSeconds=Math.floor((createjs.Ticker.getTime()-this.startTime)/1e3);var b=Math.floor(this.totalSeconds/60),c=this.totalSeconds-60*b,d=null;d=b<10?"0"+b:""+b;var e=null;e=c<10?"0"+c:""+c;var f=d+":"+e;this.textLabel.text=f},c.getTime=function(){return this.textLabel.text},a.abcya.TextTimer=createjs.promote(b,"Container")}(window),createjs.Tween.removeTweensById=function(a){for(var b=createjs.Tween._tweens,c=b.length-1;c>=0;c--)b[c]._target.identifier==a.identifier&&(b[c]._paused=!0,b.splice(c,1)),a.tweenjs_count=0},String.prototype.contains=function(a){return this.indexOf(a)!=-1},function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.trees=null,c.popUp=null,c.char1=null,c.char2=null,c.initialize=function(){var a=game.canvas.width,b=game.canvas.height,c=new createjs.Shape;c.graphics.beginFill("#f6d632").drawRect(0,0,a,b),this.addChild(c),this.nextButton=new abcya.JButton("back_button"),this.nextButton.x=a/2+430,this.nextButton.y=b/2+220,this.nextButton.doAction=this.cleanUp.bind(this),this.addChild(this.nextButton),this.nextButton.scaleX=this.nextButton.scaleY=.6,createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:1,scaleY:1},500,createjs.Ease.easeOut).to({scaleX:.6,scaleY:.6},200,createjs.Ease.easeOut)},c.cleanUp=function(){var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_SELECT_LEVEL)},a.abcya.AboutScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.trees=null,c.popUp=null,c.char1=null,c.char2=null,c.cumulativeX=0,c.cumulativeY=0,c.spritesOff=[],c.spritesOn=[],c.initialize=function(){this.spritesOff=[],this.spritesOn=[];var a=game.canvas.width,b=game.canvas.height;this.cumulativeX=0,this.cumulativeY=0,this.spritesOff=[],this.spritesOn=[],this.background=new createjs.Bitmap(game.assets.getAsset("decorate_background")),centerRegPoints(this.background),this.background.x=a/2,1==game.isWidescreen?this.background.y=b/2-90:this.background.y=b/2,this.addChild(this.background),this.background.addEventListener("pressmove",this.pressMove.bind(this)),this.background.on("mousedown",c.pressDown.bind(this)),this.background.on("pressup",c.pressUp.bind(this)),this.addBrightHouse();var d=abcya.GameGlobals.LIGHTS_EARNED-this.spritesOff.length;d<0&&(d=0),this.lightsLeftLabel=new createjs.Text("lights left: "+d,"24pt odin","#fff"),this.lightsLeftLabel.x=a/2+460,this.lightsLeftLabel.y=5,this.lightsLeftLabel.textAlign="right",this.addChild(this.lightsLeftLabel),this.nextButton=new abcya.JButton("go_button",game.assets.piecesSheet),this.nextButton.x=a/2+430,this.nextButton.y=b/2+220,this.nextButton.doAction=this.showMusicDialog.bind(this),this.addChild(this.nextButton),this.nextButton.scaleX=this.nextButton.scaleY=.6,createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:1,scaleY:1},500,createjs.Ease.easeOut).to({scaleX:.6,scaleY:.6},200,createjs.Ease.easeOut)},c.addBrightHouse=function(){var a=game.canvas.width,b=game.canvas.height,c=randomNumber(1,12);this.currentHouseNumber=c,this.largeHouse=new createjs.Bitmap(game.assets.getAsset("house"+c+"_light")),centerRegPoints(this.largeHouse),this.largeHouse.x=a/2,this.largeHouse.y=b-this.largeHouse.getBounds().height/2-10,this.addChild(this.largeHouse)},c.addDarkHouse=function(){var a=game.canvas.width,b=game.canvas.height;this.removeChild(this.largeHouse),this.largeHouse=new createjs.Bitmap(game.assets.getAsset("house"+this.currentHouseNumber+"_dark")),centerRegPoints(this.largeHouse),this.largeHouse.x=a/2,this.largeHouse.y=b-this.largeHouse.getBounds().height/2-10,this.addChild(this.largeHouse),this.setChildIndex(this.largeHouse,1),this.playAgainButton=new abcya.JButton("play_again"),this.playAgainButton.x=a/2+430,this.playAgainButton.y=b/2+220,this.playAgainButton.doAction=this.cleanUp.bind(this),this.addChild(this.playAgainButton),this.playAgainButton.scaleX=this.playAgainButton.scaleY=.6,createjs.Tween.get(this.playAgainButton,{loop:!1}).wait(100).to({scaleX:1,scaleY:1},500,createjs.Ease.easeOut).to({scaleX:.6,scaleY:.6},200,createjs.Ease.easeOut),this.lightsLeftLabel.alpha=0},c.showMusicDialog=function(){this.background.removeAllEventListeners(),this.removeChild(this.nextButton);var a=game.canvas.width,b=game.canvas.height;this.musicDialog=new abcya.JDialog("music_background","guitar_button","keyboard_button",game.assets.piecesSheet),this.musicDialog.button1.x=-200,this.musicDialog.button1.y=145,this.musicDialog.doAction1=this.startMusicGuitar.bind(this),this.musicDialog.button2.x=200,this.musicDialog.button2.y=145,this.musicDialog.doAction2=this.startMusicKeyboard.bind(this),this.musicDialog.x=a/2,1==game.isWidescreen?this.musicDialog.y=b/2+55:this.musicDialog.y=b/2,this.addChild(this.musicDialog)},c.startMusicGuitar=function(){this.musicDialog.alpha=0,this.musicDialog.x=2e3,this.removeChild(this.musicDialog),this.addDarkHouse(),this.sound=createjs.Sound.play("guitar",{interrupt:createjs.Sound.INTERRUPT_ANY,loop:-1}),this.startAlternatingSequences(800),this.makeSnow()},c.startMusicKeyboard=function(){this.musicDialog.alpha=0,this.musicDialog.x=2e3,this.removeChild(this.musicDialog),this.addDarkHouse(),this.sound=createjs.Sound.play("piano",{interrupt:createjs.Sound.INTERRUPT_ANY,loop:-1}),this.startAlternatingSequences(1200),this.makeSnow()},c.makeSnow=function(){var a=new abcya.Emitter(5);a.x=0,a.y=0,this.addChild(a),a.emit("snow",100)},c.pressDown=function(a){this.currentStroke=null,this.currentStroke=new createjs.Shape,this.addChild(this.currentStroke),this.cumulativeX=0,this.cumulativeY=0,this.oldX=null,this.oldY=null,this.addLight(a.stageX,a.stageY),this.spritesOn.length>=abcya.GameGlobals.LIGHTS_EARNED&&(a.remove(),this.showMusicDialog())},c.pressUp=function(a){this.oldX=null,this.oldY=null},c.pressMove=function(a){if(log("move"),this.oldX){this.currentStroke.graphics.beginStroke("#000").setStrokeStyle(1,"round").moveTo(this.oldX,this.oldY).lineTo(a.stageX,a.stageY);var b=Math.abs(this.oldX-a.stageX),c=Math.abs(this.oldY-a.stageY);this.cumulativeX+=b,this.cumulativeY+=c;var d=this.cumulativeX+this.cumulativeY}this.oldX=a.stageX,this.oldY=a.stageY,d>40&&(this.addLight(a.stageX,a.stageY),this.spritesOn.length>=abcya.GameGlobals.LIGHTS_EARNED&&(a.remove(),waitDoFunction(1200,this.showMusicDialog.bind(this))),this.cumulativeX=0,this.cumulativeY=0)},c.addLight=function(a,b){createjs.Sound.play("pop",createjs.Sound.INTERRUPT_ANY);var c=randomNumber(1,4),d="red";d=1==c?"red":2==c?"blue":3==c?"green":"yellow";var e=new createjs.Sprite(game.assets.piecesSheet,d+"_light_on");e.name=d,centerRegPoints(e),e.x=a,e.y=b,e.alpha=0,this.addChild(e),this.spritesOn.push(e);var f=new createjs.Sprite(game.assets.piecesSheet,d+"_light_off");f.name=d,centerRegPoints(f),f.x=a,f.y=b,f.alpha=1,this.addChild(f),this.spritesOff.push(f);var g=abcya.GameGlobals.LIGHTS_EARNED-this.spritesOff.length;g<0&&(g=0),this.lightsLeftLabel.text="lights left: "+g},c.startAlternatingSequences=function(a){a=1200,a=800,createjs.Tween.get(this,{loop:!0}).call(this.seq1,[],this).wait(4e3).call(this.seq2,[],this).wait(40*this.spritesOff.length).call(this.seq3,[],this).wait(50*this.spritesOff.length).call(this.seq4,[],this).wait(3200).call(this.seq5,[],this).wait(4800)},c.seq1=function(){waitDoFunction(800,this.lightSequenceOn1.bind(this),!0,5)},c.seq2=function(){waitDoFunction(40,this.lightSequenceOn2.bind(this),!0,this.spritesOff.length),this.currentBulbOnIndex=0},c.seq3=function(){waitDoFunction(50,this.lightSequenceOn3.bind(this),!0,this.spritesOff.length),this.currentBulbOnIndex=this.spritesOn.length},c.seq4=function(){waitDoFunction(400,this.lightSequenceOn4.bind(this),!0,8)},c.seq5=function(){waitDoFunction(300,this.lightSequenceOn5.bind(this),!0,16),this.currentColor="red"},c.stopSequences=function(){log("stop called"),createjs.Tween.removeTweensById(this),this.lightsOff()},c.stopSequence1=function(){log("stop called"),this.tween1.removeTween(),this.lightsOff()},c.stopSequence2=function(){log("stop called"),this.tween2.removeTween(),this.lightsOff()},c.stopSequence3=function(){log("stop called"),this.tween3.removeTween(),this.lightsOff()},c.lightsOff=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];b.alpha=0}},c.lightSequence1=function(){this.tween1=waitDoFunction(800,this.lightSequenceOn1.bind(this),!0),null==this.tween1&&log("tween is null!")},c.lightSequenceOn1=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];a%2==0?b.alpha=1:b.alpha=0}waitDoFunction(400,this.lightSequenceOff1.bind(this))},c.lightSequenceOff1=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];(a+1)%2==0?b.alpha=1:b.alpha=0}},c.lightSequence2=function(){this.tween2=waitDoFunction(80,this.lightSequenceOn2.bind(this),!0),this.currentBulbOnIndex=0},c.lightSequenceOn2=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];a==this.currentBulbOnIndex?b.alpha=1:b.alpha=0}this.currentBulbOnIndex++,this.currentBulbOnIndex>=this.spritesOn.length&&(this.currentBulbOnIndex=0)},c.lightSequence3=function(){this.tween3=waitDoFunction(150,this.lightSequenceOn3.bind(this),!0),this.currentBulbOnIndex=0},c.lightSequenceOn3=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];a>=this.currentBulbOnIndex&&a<this.currentBulbOnIndex+5?b.alpha=1:b.alpha=0}this.currentBulbOnIndex--,this.currentBulbOnIndex<0&&(this.currentBulbOnIndex=this.spritesOn.length)},c.lightSequence4=function(){waitDoFunction(400,this.lightSequenceOn4.bind(this),!0)},c.lightSequenceOn4=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];b.alpha=1}waitDoFunction(200,this.lightSequenceOff4.bind(this))},c.lightSequenceOff4=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];b.alpha=0}},c.lightSequence5=function(){waitDoFunction(400,this.lightSequenceOn5.bind(this),!0),this.currentColor="red"},c.lightSequenceOn5=function(){for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];b.name==this.currentColor?b.alpha=1:b.alpha=0}waitDoFunction(300,this.lightSequenceOff5.bind(this))},c.lightSequenceOff5=function(){"red"==this.currentColor?this.currentColor="blue":"blue"==this.currentColor?this.currentColor="yellow":"yellow"==this.currentColor?this.currentColor="green":"green"==this.currentColor&&(this.currentColor="red");for(var a=0;a<this.spritesOn.length;a++){var b=this.spritesOn[a];b.alpha=0}},c.cleanUp=function(){createjs.Tween.removeAllTweens(),this.sound.stop();var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_LIGHTS)},a.abcya.DecorateScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.biteNumber=0,c.initialize=function(){var a=game.canvas.width,b=game.canvas.height,c=new createjs.Shape;c.graphics.beginFill("#b4e3f6").drawRect(0,0,a,b),this.addChild(c),this.label=new createjs.Text("This donut looks yummy. Eat it up!","38pt odin","#fff"),this.label.textAlign="center",this.label.x=a/2,this.label.y=b/2-250,this.addChild(this.label),this.donutFrosting=new abcya.FrostingContainer(abcya.GameGlobals.DONUT_SHAPE),centerRegPoints(this.donutFrosting),this.donutFrosting.x=a/2,this.donutFrosting.y=b/2+25,this.addChild(this.donutFrosting),this.donutFrosting.scaleX=this.donutFrosting.scaleY=1.5,this.donutFrosting.enabled=!0,this.donutFrosting.doAction=this.explodeSprinkles.bind(this),this.sound=createjs.Sound.play("eat_donut",{interrupt:createjs.Sound.INTERRUPT_ANY})},c.explodeSprinkles=function(){this.biteNumber++;var a=game.canvas.width,b=game.canvas.height,c=new abcya.Emitter(5);1==this.biteNumber?(c.x=a/2+50,c.y=b/2+105):2==this.biteNumber?(c.x=a/2-90,c.y=b/2+80):3==this.biteNumber?(c.x=a/2+50,c.y=b/2-40):4==this.biteNumber?(c.x=a/2-90,c.y=b/2-40):5==this.biteNumber&&(c.x=a/2-10,c.y=b/2-70,waitDoFunction(1e3,this.showNextButton.bind(this))),this.addChild(c);var d="sp"+abcya.GameGlobals.SPRINKLE_TYPE+"c"+abcya.GameGlobals.SPRINKLE_COLOR;log("emitter name = "+d),c.emit(d,20)},c.showNextButton=function(){var a=game.canvas.width,b=game.canvas.height;this.removeChild(this.label),this.label=new createjs.Text("Play Again!","52pt odin","#fff"),this.label.textAlign="center",this.label.x=a/2-70,this.label.y=b/2-45,this.addChild(this.label),this.nextButton=new abcya.JButton("next_button",game.assets.piecesSheet),this.nextButton.x=a/2+170,this.nextButton.y=b/2+0,this.nextButton.doAction=this.cleanUp.bind(this),this.addChild(this.nextButton),createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut),this.sound=createjs.Sound.play("play_again",{interrupt:createjs.Sound.INTERRUPT_ANY})},c.cleanUp=function(){abcya.GameGlobals.SPRINKLES=[],abcya.GameGlobals.FROST_COLOR=0,abcya.GameGlobals.SPRINKLE_TYPE=1,abcya.GameGlobals.SPRINKLE_COLOR=1,this.sound.stop();var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_GAME)},a.abcya.DonutScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.trees=null,c.popUp=null,c.goBtn=null,c.char1=null,c.char2=null,c.initialize=function(){game.gameBackground.addBackgroundImage("sky-bg"),game.gameBackground.setClouds(!0),this.trees=[],this.plantTree(90,game.screen_height-100),this.plantTree(936,game.screen_height-100),this.char1=new abcya.Dino(1),this.char1.x=-this.char1.getBounds().width,this.char1.endX=20,this.char1.y=game.screen_height-this.char1.getBounds().height-50,this.addChild(this.char1),this.char2=new abcya.Dino(2),this.char2.x=game.screen_width,this.char2.endX=game.screen_width-this.char2.getBounds().width-20,this.char2.y=game.screen_height-this.char2.getBounds().height-50,this.addChild(this.char2),createjs.Tween.get(this).wait(200).call(this.addPopUp,null,this)},c.addPopUp=function(){if(0==game.themePlaying){var a=new createjs.Event("TOGGLE_MUSIC");a._musicOn=!0,this.dispatchEvent(a)}createjs.Tween.get(this.char1).wait(500).call(this.char1.walkIn,[this.char1.endX,500,"dance"],this.char1),createjs.Tween.get(this.char2).wait(1500).call(this.char2.walkIn,[this.char2.endX,500,"dance"],this.char2);var b=new abcya.EndDialog(["PLAY AGAIN"],"yes");b.x=game.screen_width/2-b.getBounds().width/2,b.y=-(b.getBounds().height/2),this.addChildAt(b,0),b.on("DIALOG_SELECT",this.handleDialogInput,this,!0),createjs.Tween.get(b).to({y:game.screen_height/2-b.getBounds().height/2-100},600,createjs.Ease.elasticOut)},c.handleDialogInput=function(a){this.cleanUp()},c.endReady=function(){},c.plantTree=function(a,b){var c=new createjs.Sprite(game.assets.spriteSheet,"tree");c.regX=c.getBounds().width/2,c.regY=c.getBounds().height,c.x=a,c.y=b,c.scaleY=0,c.alpha=0,this.addChild(c),this.trees.push(!0),createjs.Tween.get(c).to({alpha:1,scaleY:1},700,createjs.Ease.bounceOut)},c.cleanUp=function(){for(createjs.Sound.play("click");this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_INTRO)},c.tick=function(a){this.char1&&this.char1.tick(),this.char1&&this.char2.tick()},c.layoutRatio=function(){},a.abcya.EndScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container),d=30,e=20,f=1/e,g=!0;c.shootingBall=null,c.shootingBall2=null,c.currentBall=null,c.currentBall2=null,c.totalSilverCoinsCollected=0,c.totalGoldCoinsCollected=0,c.ballIsSpawned=!1,c.objectsCollected=0,c.ballsInPlay=0,c.initialize=function(){var a=game.canvas.width,b=game.canvas.height;this.backgroundImage=new createjs.Bitmap(game.assets.getAsset("background"+abcya.GameGlobals.GAME_LEVEL)),this.addChild(this.backgroundImage),this.backgroundImage.scaleX=1.2,this.backgroundImage.scaleY=1.1,this.gameBoard=new createjs.Bitmap(game.assets.getAsset("game_board")),centerRegPoints(this.gameBoard),this.addChild(this.gameBoard),this.gameBoard.x=a/2,this.gameBoard.y=b-70,this.ballCounter=new abcya.CounterText("_VALUE_",32,"#000000"),this.ballCounter.x=a/2-185,this.ballCounter.y=b-75,this.ballCounter.setValue(0),this.addChild(this.ballCounter),this.silverCounter=new abcya.CounterText("_VALUE_",20,"#000000"),this.silverCounter.x=a/2+118,this.silverCounter.y=b-70,this.silverCounter.setValue(abcya.GameGlobals.SILVER_COLLECTED),this.addChild(this.silverCounter),this.goldCounter=new abcya.CounterText("_VALUE_",20,"#000000"),this.goldCounter.x=a/2+200,this.goldCounter.y=b-70,this.goldCounter.setValue(abcya.GameGlobals.GOLD_COLLECTED),this.addChild(this.goldCounter),this.box2d.setup(this),createjs.Ticker.on("tick",this.handleTick,this),this.createCoinGrid(),this.ballSpawn(),abcya.GameGlobals.INSTRUCTIONS_SHOWN||this.showInstructions(),this.bgShape=new createjs.Shape,this.bgShape.graphics.beginFill("#ffffff").drawRect(0,0,a,b),this.addChild(this.bgShape),this.bgShape.alpha=0},c.nextLevel=function(){this.bgShape.alpha=1,createjs.Tween.get(this.bgShape).to({alpha:0},1500,null),abcya.GameGlobals.GAME_LEVEL++,abcya.GameGlobals.GAME_LEVEL>9&&(abcya.GameGlobals.GAME_LEVEL=1),createjs.Sound.play("clear_board",{interrupt:createjs.Sound.INTERRUPT_ANY}),this.box2d.removeActorsExceptBalls();game.canvas.width,game.canvas.height;this.removeChild(this.backgroundImage),this.backgroundImage=new createjs.Bitmap(game.assets.getAsset("background"+abcya.GameGlobals.GAME_LEVEL)),this.addChild(this.backgroundImage),this.backgroundImage.scaleX=1.2,this.backgroundImage.scaleY=1.1,this.setChildIndex(this.backgroundImage,0),this.createCoinGrid()},c.showInstructions=function(){abcya.GameGlobals.INSTRUCTIONS_SHOWN=!0,this.instructionDialog=new abcya.JDialog("how_to_play","ok_button"),this.instructionDialog.x=game.canvas.width/2,this.instructionDialog.y=game.canvas.height/2,this.instructionDialog.doAction1=this.closeInstructionDialog.bind(this),this.instructionDialog.button1.y+=100,this.addChild(this.instructionDialog),this.shootingBall.enabled=!1,this.hand=new createjs.Bitmap(game.assets.getAsset("hand")),centerRegPoints(this.hand),this.hand.regY=this.hand.getBounds().height,this.hand.x=game.canvas.width/2,this.hand.y=game.canvas.height-100,this.addChild(this.hand),createjs.Tween.get(this.hand,{loop:!0}).to({y:game.canvas.height-50},1500,null).to({y:game.canvas.height-100},1500,null)},c.closeInstructionDialog=function(){this.removeChild(this.instructionDialog),this.removeChild(this.hand),this.shootingBall.enabled=!0},c.gameOver=function(){this.zeroBallCounter(),log("game over!"),this.scoreDialog=new abcya.JDialog("score_dialog","play_button_yellow"),this.scoreDialog.x=game.canvas.width/2,this.scoreDialog.y=game.canvas.height/2-150,this.scoreDialog.doAction1=this.closeScoreDialog.bind(this),this.scoreDialog.button1.scaleX=this.scoreDialog.button1.scaleY=.75,this.scoreDialog.button1.y+=305,createjs.Tween.get(this.shootingBall).wait(500).call(this.showSilverCollected,[],this).wait(800).call(this.showGoldCollected,[],this).wait(800).call(this.showTotalScore,[],this),this.addChild(this.scoreDialog)},c.showSilverCollected=function(){var a=new createjs.Text("x "+this.totalSilverCoinsCollected,"44pt odin","#000000");a.text.textAlign="center",a.x=10,a.y-=135,this.scoreDialog.addChild(a),createjs.Sound.play("BungeeSilverCoin",{interrupt:createjs.Sound.INTERRUPT_ANY})},c.showGoldCollected=function(){var a=new createjs.Text("x "+this.totalGoldCoinsCollected,"44pt odin","#000000");a.text.textAlign="center",a.x=10,a.y-=60,this.scoreDialog.addChild(a),createjs.Sound.play("BungeeGoldCoin",{interrupt:createjs.Sound.INTERRUPT_ANY})},c.showTotalScore=function(){var a=2*this.totalGoldCoinsCollected+this.totalSilverCoinsCollected;this.bitFontNumber=new abcya.BitFontNumber(a),this.bitFontNumber.x-=this.bitFontNumber.getBounds().width/2+5,this.bitFontNumber.y+=65,this.scoreDialog.addChild(this.bitFontNumber),createjs.Sound.play("total_score",{interrupt:createjs.Sound.INTERRUPT_ANY})},c.closeScoreDialog=function(){this.removeChild(this.scoreDialog),abcya.GameGlobals.BALL_QUEUE=["plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball","plain_ball"],abcya.GameGlobals.GAME_LEVEL=1,abcya.GameGlobals.GOLD_COLLECTED=0,abcya.GameGlobals.SILVER_COLLECTED=0,abcya.GameGlobals.INSTRUCTIONS_SHOWN=!1,abcya.GameGlobals.CURRENT_BALL=null,this.cleanUp()},c.ballSpawn=function(){this.ballsInPlay++,this.ballIsSpawned=!0;var a=abcya.GameGlobals.BALL_QUEUE.shift();log("ball spawned = "+a),this.shootingBall=new abcya.ShootingBall(a,game.canvas.width/2,game.canvas.height-207),this.shootingBall.x=game.canvas.width/2,this.shootingBall.y=game.canvas.height-207,this.addChild(this.shootingBall),this.shootingBall.pressMoveAction=this.showRubberBand.bind(this),this.shootingBall.clickUpAction=this.shootBall.bind(this),this.shootingBall.alpha=0,this.shootingBall.scaleX=this.shootingBall.scaleY=2,"blue_ball"==a&&(this.shootingBall2=new abcya.ShootingBall(a,game.canvas.width/2,game.canvas.height-207),this.shootingBall2.x=game.canvas.width/2,this.shootingBall2.y=game.canvas.height-207,this.addChild(this.shootingBall2),this.shootingBall2.alpha=0,this.shootingBall2.scaleX=this.shootingBall2.scaleY=2,this.ballsInPlay++),this.showRubberBand(),createjs.Tween.get(this.shootingBall).wait(300).to({alpha:1},1,createjs.Ease.quadOut),this.addBallCounter()},c.addBallCounter=function(){this.ballCounter.setValue(abcya.GameGlobals.BALL_QUEUE.length)},c.zeroBallCounter=function(){this.ballCounter.setValue(0)},c.addGoldCollected=function(){this.totalGoldCoinsCollected++},c.addSilverCollected=function(){this.totalSilverCoinsCollected++},c.addObjectCollected=function(){this.objectsCollected++,126==this.objectsCollected&&(this.objectsCollected=0,this.nextLevel())},c.coinSpawn=function(a){var b=new createjs.Bitmap(game.assets.getAsset(a));
b.x=Math.round(500*Math.random()),b.y=-30,centerRegPoints(b),b.snapToPixel=!0,b.mouseEnabled=!1,this.addChild(b),this.box2d.createCoin(b)},c.coinFall=function(a){var b=a.skin;createjs.Tween.get(b).to({x:0,y:game.canvas.height+100},1500,createjs.Ease.quadOut).call(this.removeSprite,[a],this)},c.removeSprite=function(a){var b=a.skin;b.parent&&b.parent.removeChild(b)},c.coinExplode=function(a){var b=a.name,c={images:[game.assets.getAsset(b+"_explode_sheet")],frames:{width:150,height:150},animations:{explode:[0,5]}},d=new createjs.SpriteSheet(c);d.framerate=10,null==d&&log("spriteSheet is null!!!");var e=new createjs.Sprite(d);e.addEventListener("animationend",function(){e.parent.removeChild(e)}),centerRegPoints(e),e.x=a.x,e.y=a.y,e.gotoAndPlay("explode",1),this.addChild(e),e.parent.setChildIndex(e,2)},c.box2d=function(){var a,b=Date.now(),c=0,g=[],h=[],i=[],j=[],k=[],l=null,m=function(a){g.push(a)},n=function(b){l=b,a=new Box2D.Dynamics.b2World(new Box2D.Common.Math.b2Vec2(0,3),(!0));var c=new Box2D.Dynamics.b2ContactListener;c.BeginContact=function(b){var c=(b.GetFixtureA(),b.GetFixtureB(),b.GetFixtureA().GetBody()),d=b.GetFixtureB().GetBody(),e=null,f=null,j=c.GetUserData(),k=d.GetUserData();j&&(e=j.skin),k&&(f=k.skin);var l=c.GetFixtureList(),m=l.GetFilterData(),n=d.GetFixtureList(),o=n.GetFilterData();if(null!=f&&16==m.categoryBits&&f.name.contains("magnet")){a.SetGravity(new Box2D.Common.Math.b2Vec2(0,0)),f.hitTopWall=!0;var p=0,q=0;p=f.hitLeftWall?15:-15,d.SetLinearVelocity(new Box2D.Common.Math.b2Vec2(p,q))}if(null!=e&&16==o.categoryBits&&e.name.contains("magnet")){a.SetGravity(new Box2D.Common.Math.b2Vec2(0,0)),e.hitTopWall=!0;var p=0,q=0;p=e.hitLeftWall?15:-15,c.SetLinearVelocity(new Box2D.Common.Math.b2Vec2(p,q))}if(null!=f&&8==m.categoryBits&&f.name.contains("magnet")){f.hitLeftWall=!0;var p=0,q=0;q=f.hitTopWall?15:-15,d.SetLinearVelocity(new Box2D.Common.Math.b2Vec2(p,q))}if(null!=e&&8==o.categoryBits&&e.name.contains("magnet")){e.hitLeftWall=!0;var p=0,q=0;q=e.hitTopWall?15:-15,c.SetLinearVelocity(new Box2D.Common.Math.b2Vec2(p,q))}if(null!=f&&32==m.categoryBits&&f.name.contains("magnet")){f.hitRightWall=!0;var p=0,q=0;q=f.hitTopWall?15:-15,d.SetLinearVelocity(new Box2D.Common.Math.b2Vec2(p,q))}if(null!=e&&32==o.categoryBits&&e.name.contains("magnet")){e.hitRightWall=!0;var p=0,q=0;q=e.hitTopWall?15:-15,c.SetLinearVelocity(new Box2D.Common.Math.b2Vec2(p,q))}null!=e&&("blocker"==e.name?(h.push(j),"fire_ball"==f.name&&(g.push(c),createjs.Sound.play("destroy_blocker",{interrupt:createjs.Sound.INTERRUPT_ANY}),abcya.GameGlobals.TOTAL_BLOCKERS--,abcya.GameGlobals.TOTAL_BLOCKERS<0&&(abcya.GameGlobals.TOTAL_BLOCKERS=0))):e.name.contains("coin")&&(g.push(c),i.push(j))),null!=f&&("blocker"==f.name?(h.push(k),"fire_ball"==e.name&&(g.push(d),createjs.Sound.play("destroy_blocker",{interrupt:createjs.Sound.INTERRUPT_ANY}),abcya.GameGlobals.TOTAL_BLOCKERS--,abcya.GameGlobals.TOTAL_BLOCKERS<0&&(abcya.GameGlobals.TOTAL_BLOCKERS=0))):f.name.contains("coin")&&(g.push(d),i.push(k)))},a.SetContactListener(c);var e=new Box2D.Dynamics.b2FixtureDef;e.density=1,e.restitution=.1,e.shape=new Box2D.Collision.Shapes.b2PolygonShape,e.shape.SetAsBox(game.canvas.height/d,1/d);var f=new Box2D.Dynamics.b2BodyDef;f.type=Box2D.Dynamics.b2Body.b2_staticBody,f.position.x=-25/d,f.position.y=-10/d;var j=a.CreateBody(f);e.filter.categoryBits=16,j.CreateFixture(e);var k=new Box2D.Dynamics.b2FixtureDef;k.density=1,k.restitution=.8,k.shape=new Box2D.Collision.Shapes.b2PolygonShape,k.filter.categoryBits=8,k.shape.SetAsBox(1/d,game.canvas.height/d);var m=new Box2D.Dynamics.b2BodyDef;m.type=Box2D.Dynamics.b2Body.b2_staticBody,m.position.x=-9/d,m.position.y=-25/d;var n=a.CreateBody(m);n.CreateFixture(k);var o=new Box2D.Dynamics.b2FixtureDef;o.shape=new Box2D.Collision.Shapes.b2PolygonShape,o.density=1,o.restitution=.8,o.filter.categoryBits=32,o.shape.SetAsBox(1/d,game.canvas.height/d);var p=new Box2D.Dynamics.b2BodyDef;p.type=Box2D.Dynamics.b2Body.b2_staticBody,p.position.x=game.canvas.width/d,p.position.y=-25/d;var q=a.CreateBody(p);q.CreateFixture(o)},o=function(a,b,c){this.body=a,this.skin=b,c&&(this.skin2=c),this.update=function(){"plain_ball"==this.skin.name&&(this.skin.rotation=this.body.GetAngle()*(180/Math.PI)),this.skin.x=this.body.GetWorldCenter().x*d,this.skin.y=this.body.GetWorldCenter().y*d,c&&(this.skin2.rotation=this.body.GetAngle()*(180/Math.PI),this.skin2.x=this.body.GetWorldCenter().x*d,this.skin2.y=this.body.GetWorldCenter().y*d)},j.push(this)},p=function(b){var c=new Box2D.Dynamics.b2FixtureDef;c.isSensor=!0,c.density=1,c.restitution=.6,c.shape=new Box2D.Collision.Shapes.b2CircleShape(24/d);var e=new Box2D.Dynamics.b2BodyDef;e.type=Box2D.Dynamics.b2Body.b2_staticBody,e.position.x=b.x/d,e.position.y=b.y/d;var f=a.CreateBody(e);f.CreateFixture(c);var g=new o(f,b);f.SetUserData(g),k.push(f)},q=function(b,c){var e=new Box2D.Dynamics.b2FixtureDef;e.density=1,e.restitution=.6,e.shape=new Box2D.Collision.Shapes.b2CircleShape(24/d),e.filter.categoryBits=4;var f=new Box2D.Dynamics.b2BodyDef;f.type=Box2D.Dynamics.b2Body.b2_staticBody,f.position.x=b.x/d,f.position.y=b.y/d;var g=a.CreateBody(f);g.CreateFixture(e);var h=new o(g,b,c);g.SetUserData(h),k.push(g)},r=function(b){var c=new Box2D.Dynamics.b2FixtureDef;c.density=1.6,c.restitution=.6,c.shape=new Box2D.Collision.Shapes.b2CircleShape(24/d),c.filter.categoryBits=2;var e=new Box2D.Dynamics.b2BodyDef;e.type=Box2D.Dynamics.b2Body.b2_staticBody,e.position.x=b.x/d,e.position.y=b.y/d;var f=a.CreateBody(e);f.CreateFixture(c);var g=new o(f,b);return f.SetUserData(g),k.push(f),f},s=function(b){var c=new Box2D.Dynamics.b2FixtureDef;c.density=1.6,c.restitution=.6,c.shape=new Box2D.Collision.Shapes.b2CircleShape(24/d),c.filter.categoryBits=2,c.filter.maskBits=-5;var e=new Box2D.Dynamics.b2BodyDef;e.type=Box2D.Dynamics.b2Body.b2_staticBody,e.position.x=b.x/d,e.position.y=b.y/d;var f=a.CreateBody(e);f.CreateFixture(c);var g=new o(f,b);return f.SetUserData(g),k.push(f),f},t=function(a){null!=a&&(null!=a.skin&&null!=a.skin.parent&&a.skin.parent.removeChild(a.skin),j.splice(j.indexOf(a),1))},u=function(){for(var b=a.GetBodyList();b;b=b.GetNext()){var c=b.GetUserData();null!=c&&(c.skin.name.contains("ball")||(t(b.GetUserData()),b.SetUserData(null),a.DestroyBody(b)))}g=[],h=[]},v=function(b){for(var c=a.GetBodyList();c;c=c.GetNext()){var d=c.GetUserData();null!=d&&d.skin==b&&(l.ballsInPlay--,t(c.GetUserData()),c.SetUserData(null),a.DestroyBody(c))}},w=function(){var d=Date.now(),k=d-b;for(c+=k,b=d;c>=e;){for(var m=0,n=i.length;m<n;m++){var o=i[m],p=o.skin;if(l.addObjectCollected(),"extra_coin"==p.name)l.coinFall(o),abcya.GameGlobals.BALL_QUEUE.unshift("plain_ball"),l.addBallCounter(),createjs.Sound.play("extra_ball",{interrupt:createjs.Sound.INTERRUPT_ANY}),1!=l.ballIsSpawned&&abcya.GameGlobals.BALL_QUEUE.length>0&&l.ballSpawn();else{if("gold_coin"==p.name||"silver_coin"==p.name)"gold_coin"==p.name?(this.emitter=new abcya.Emitter(5),this.emitter.x=p.x-50,this.emitter.y=p.y,this.emitter.emit(p.name+"_explosion",30),l.addChild(this.emitter),l.addGoldCollected(),createjs.Sound.play("BungeeGoldCoin",{interrupt:createjs.Sound.INTERRUPT_ANY})):"silver_coin"==p.name&&(l.addSilverCollected(),createjs.Sound.play("BungeeSilverCoin",{interrupt:createjs.Sound.INTERRUPT_ANY}));else{var q=p.name.split("_"),r=q[0]+"_ball";log("SPECIAL ball name = "+r),abcya.GameGlobals.BALL_QUEUE.unshift(r),l.addBallCounter(),createjs.Sound.play("BungeeSpecial",{interrupt:createjs.Sound.INTERRUPT_ANY}),1!=l.ballIsSpawned&&abcya.GameGlobals.BALL_QUEUE.length>0&&l.ballSpawn()}l.coinExplode(p)}}i=[];for(var m=0,n=g.length;m<n;m++){var o=g[m].GetUserData();o&&o.skin&&"extra_coin"!=o.skin.name&&t(g[m].GetUserData()),"silver_coin"==o.skin.name?l.silverCounter.addValue(1):"gold_coin"==o.skin.name&&l.goldCounter.addValue(1),g[m].SetUserData(null),a.DestroyBody(g[m])}g=[];for(var m=0,n=h.length;m<n;m++){var p=h[m].skin2;createjs.Tween.get(p).to({alpha:1},1,null).to({scaleX:1.2,scaleY:1.2},150,createjs.Ease.quadOut).to({scaleX:1,scaleY:1},75,createjs.Ease.quadOut).to({alpha:0},1,null),createjs.Sound.play("ouch",{interrupt:createjs.Sound.INTERRUPT_ANY})}h=[];for(var m=0,n=j.length;m<n;m++)j[m].update(),j[m].skin.y>game.canvas.height+100&&(l.ballsInPlay--,"magnet_ball"==j[m].skin.name&&a.SetGravity(new Box2D.Common.Math.b2Vec2(0,3)),g.push(j[m].body),0==abcya.GameGlobals.BALL_QUEUE.length&&l.ballsInPlay<=0&&1!=l.ballIsSpawned&&l.gameOver());a.Step(f,10,10),c-=e,a.ClearForces()}},x=function(a){f=a?0:1/e,b=Date.now()};return{setup:n,removeBody:m,update:w,createCoin:p,createBall:r,createGhost:s,createBlocker:q,removeActorsExceptBalls:u,removeBall:v,pauseResume:x}}(),c.handleTick=function(a,b){g&&this.box2d.update()},c.showRubberBand=function(){this.removeChild(this.leftLine),this.removeChild(this.rightLine),this.leftLine=new createjs.Shape,this.addChild(this.leftLine),this.leftLine.graphics.beginStroke("#000000"),this.leftLine.graphics.setStrokeStyle(3),this.leftLine.graphics.moveTo(198,game.canvas.height-190),this.leftLine.graphics.lineTo(this.shootingBall.x,this.shootingBall.y+20),this.leftLine.graphics.endStroke(),this.rightLine=new createjs.Shape,this.addChild(this.rightLine),this.rightLine.graphics.beginStroke("#000000"),this.rightLine.graphics.setStrokeStyle(3),this.rightLine.graphics.moveTo(570,game.canvas.height-190),this.rightLine.graphics.lineTo(this.shootingBall.x,this.shootingBall.y+20),this.rightLine.graphics.endStroke(),this.shootingBall.parent.setChildIndex(this.shootingBall,this.getNumChildren()-1)},c.showStraightRubberBand=function(){this.removeChild(this.leftLine),this.removeChild(this.rightLine),this.leftLine=new createjs.Shape,this.addChild(this.leftLine),this.leftLine.graphics.beginStroke("#000000"),this.leftLine.graphics.setStrokeStyle(3),this.leftLine.graphics.moveTo(198,game.canvas.height-190),this.leftLine.graphics.lineTo(game.canvas.width/2,game.canvas.height-207+20),this.leftLine.graphics.endStroke(),this.rightLine=new createjs.Shape,this.addChild(this.rightLine),this.rightLine.graphics.beginStroke("#000000"),this.rightLine.graphics.setStrokeStyle(3),this.rightLine.graphics.moveTo(570,game.canvas.height-190),this.rightLine.graphics.lineTo(game.canvas.width/2,game.canvas.height-207+20),this.rightLine.graphics.endStroke()},c.launchAngle=function(){var a=this.shootingBall.startX,b=this.shootingBall.startY,c=a-this.shootingBall.x,d=b-this.shootingBall.y,e=Math.abs(c)+Math.abs(d),f=0;c<0&&d>0?f=Math.PI:c<0&&d<0?f=Math.PI:c>0&&d<0&&(f=2*Math.PI),0==c&&(c=1);var g=Math.atan(d/c)+f;return[g,e]},c.shootBall=function(){this.shootingBall.scaleX=this.shootingBall.scaleY=1.25,this.shootingBall2&&(this.shootingBall2.scaleX=this.shootingBall2.scaleY=1.25),this.ballIsSpawned=!1,"ghost_ball"==this.shootingBall.name||"magnet_ball"==this.shootingBall.name?(this.currentBall=this.box2d.createGhost(this.shootingBall),createjs.Sound.play("ghost_ball_sound",{interrupt:createjs.Sound.INTERRUPT_ANY})):"blue_ball"==this.shootingBall.name?(this.currentBall=this.box2d.createBall(this.shootingBall),this.currentBall2=this.box2d.createBall(this.shootingBall2),createjs.Sound.play("fling_ball",{interrupt:createjs.Sound.INTERRUPT_ANY})):(this.currentBall=this.box2d.createBall(this.shootingBall),createjs.Sound.play("fling_ball",{interrupt:createjs.Sound.INTERRUPT_ANY})),this.currentBall.SetType(Box2D.Dynamics.b2Body.b2_dynamicBody),null!=this.currentBall2&&(this.currentBall2.SetType(Box2D.Dynamics.b2Body.b2_dynamicBody),this.shootingBall2.alpha=1);var a=this.launchAngle(),b=a[0],c=a[1];0==c&&(c=1);var e=Math.log(c)*Math.log(c)*70,f=e*Math.cos(b),g=e*Math.sin(b);this.currentBall.ApplyImpulse(new Box2D.Common.Math.b2Vec2(f/d,g/d),this.currentBall.GetWorldCenter());var h=this.shootingBall;if(createjs.Tween.get(this,{loop:!1}).wait(8e3).call(this.removeBallAfterDelay,[h],this),this.currentBall=void 0,null!=this.currentBall2){var i=e*Math.cos(b-.15),j=e*Math.sin(b-.15);this.currentBall2.ApplyImpulse(new Box2D.Common.Math.b2Vec2(i/d,j/d),this.currentBall2.GetWorldCenter());var k=this.shootingBall2;createjs.Tween.get(this,{loop:!1}).wait(8e3).call(this.removeBallAfterDelay,[k],this),this.currentBall2=void 0}abcya.GameGlobals.BALL_QUEUE.length>0?this.ballSpawn():this.showStraightRubberBand()},c.removeBallAfterDelay=function(a){null!=a&&this.box2d.removeBall(a)},c.createCoinGrid=function(){var a=this.choosePositions();log("coinsArray length = "+a.length),this.gridStuff=[];for(var b=0,c=0;c<12;c++)for(var d=0;d<11;d++){var e=a[b],f=createSprite(e);this.gridStuff.push(f);var g=null;if(f.x=68*d+45,f.y=60*c+50,"blocker"==e?(g=createSprite("blocker_angry"),g.x=65*d+60,g.y=60*c+50,g.alpha=0,this.box2d.createBlocker(f,g)):this.box2d.createCoin(f),this.addChild(f),g&&(this.addChild(g),this.gridStuff.push(g)),"gold_coin"==f.name){var h=randomNumber(1,300);createjs.Tween.get(f,{loop:!0}).wait(h).to({scaleX:.2},1200,createjs.Ease.easeOut).to({scaleX:-1},800,createjs.Ease.easeIn).to({scaleX:-.2},1200,createjs.Ease.easeOut).to({scaleX:1},800,createjs.Ease.easeIn)}b++}},c.choosePositions=function(){var a=4+(6-abcya.GameGlobals.TOTAL_BLOCKERS),b=4,c=abcya.GameGlobals.TOTAL_BLOCKERS,d=3,e=132,f=randomUniqueArray(1,132,e),g=[];this.goldCoinPositions=[],this.specialCoinPositions=[],this.blockerPositions=[];for(var h=randomUniqueArray(1,5,4),i=0,j=0;j<e;j++){var k=f[j];if(j<a)g[k-1]="gold_coin";else if(j<a+b){var l=h[i];i++;var m=null;switch(l){case 1:m="blue_coin";break;case 2:m="gravity_coin";break;case 3:m="fire_coin";break;case 4:m="magnet_coin";break;case 5:m="ghost_coin"}g[k-1]=m}else j<a+b+c?g[k-1]="blocker":j<a+b+c+d?g[k-1]="extra_coin":g[k-1]="silver_coin"}return g},c.toggleMusic=function(){if(1==game.themePlaying){game.themePlaying=!1;var a=new createjs.Event("TOGGLE_MUSIC");a._musicOn=!1,this.dispatchEvent(a),this.hud.showMusicState(!1)}else{game.themePlaying=!0;var a=new createjs.Event("TOGGLE_MUSIC");a._musicOn=!0,this.dispatchEvent(a),this.hud.showMusicState(!0)}},c.cleanUp=function(){var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_INTRO)},c.layoutRatio=function(){game.screen_width,game.screen_height;game.isWidescreen===!0},a.abcya.GameScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.initialize=function(){var a=game.canvas.width,b=game.canvas.height,c=new createjs.Bitmap(game.assets.getAsset("how_to_screen"));centerRegPoints(c),this.addChild(c),c.x=a/2,c.y=b/2,this.okButton=new abcya.JButton("ok_button"),this.okButton.x=a/2,this.okButton.y=b/2+400,this.okButton.doAction=this.cleanUp.bind(this),this.addChild(this.okButton),createjs.Tween.get(this.okButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,null).to({scaleX:1.5,scaleY:1.5},200,null)},c.cleanUp=function(){var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_INTRO)},a.abcya.InstructionsScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container),d=0,e=!0;c.soundID=null,c.playButton=null,c.howButton=null,c.initialize=function(){this.soundID=createjs.Sound.play("CoinTheme",{interrupt:createjs.Sound.INTERRUPT_ANY});var a=game.canvas.width,b=game.canvas.height;this.points=[];var c=new createjs.Bitmap(game.assets.getAsset("title_background"));this.addChild(c),c.scaleX=1,c.scaleY=game.isWidescreen===!0?.75:1;for(var d=0;d<2;d++){var e=new createjs.Bitmap(game.assets.getAsset("gold_coin"));centerRegPoints(e),e.x=80+600*d,e.y=80,this.addChild(e),createjs.Tween.get(e,{loop:!0}).to({scaleX:.2},600,createjs.Ease.easeOut).to({scaleX:-1},400,createjs.Ease.easeOut).to({scaleX:-.2},600,createjs.Ease.easeOut).to({scaleX:1},400,createjs.Ease.easeOut)}for(var d=0;d<4;d++){var e=new createjs.Bitmap(game.assets.getAsset("gold_coin"));centerRegPoints(e),e.x=210+125*d,e.y=280,this.addChild(e),createjs.Tween.get(e,{loop:!0}).to({scaleX:.2},600,createjs.Ease.easeOut).to({scaleX:-1},400,createjs.Ease.easeOut).to({scaleX:-.2},600,createjs.Ease.easeOut).to({scaleX:1},400,createjs.Ease.easeOut)}for(var d=0;d<4;d++){var e=new createjs.Bitmap(game.assets.getAsset("gold_coin"));centerRegPoints(e),e.x=210+125*d,e.y=540,this.addChild(e),createjs.Tween.get(e,{loop:!0}).to({scaleX:.2},600,createjs.Ease.easeOut).to({scaleX:-1},400,createjs.Ease.easeOut).to({scaleX:-.2},600,createjs.Ease.easeOut).to({scaleX:1},400,createjs.Ease.easeOut)}var f=new createjs.Bitmap(game.assets.getAsset("flower"));centerRegPoints(f),f.regY=f.getBounds().height,f.x=80,f.y=b-40,this.addChild(f),f.scaleY=.2,f.scaleX=.5,createjs.Tween.get(f,{loop:!1}).to({scaleY:1},2e3,createjs.Ease.easeOut),createjs.Tween.get(f,{loop:!1}).to({scaleX:1},2e3,createjs.Ease.easeOut),createjs.Tween.get(f,{loop:!0}).to({rotation:10},2e3,createjs.Ease.easeOut).to({rotation:-10},2e3,createjs.Ease.easeOut).to({rotation:0},1e3,createjs.Ease.easeOut);var g=new createjs.Bitmap(game.assets.getAsset("ufo"));centerRegPoints(g),g.regY=f.getBounds().height,g.x=150,g.y=220,this.addChild(g),createjs.Tween.get(g,{loop:!0}).to({x:600},3e3,null).to({x:150},3e3,null),this.playButton=new abcya.JButton("play_button"),this.playButton.x=a/2,this.playButton.y=b/2+190,this.playButton.doAction=this.cleanUp.bind(this),this.addChild(this.playButton),createjs.Tween.get(this.playButton,{loop:!1}).to({scaleX:1.5,scaleY:1.5},300,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut),this.howButton=new abcya.JButton("how_to_play_button"),this.howButton.x=a/2,this.howButton.y=b/2+340,this.howButton.doAction=this.showInstructions.bind(this),this.addChild(this.howButton),createjs.Tween.get(this.howButton,{loop:!1}).wait(500).to({scaleX:1.5,scaleY:1.5},300,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut),waitDoFunction(2e3,this.spillCoins.bind(this))},c.spillCoins=function(){this.box2d.setup(),createjs.Ticker.on("tick",this.handleTick,this)},c.coinSpawn=function(){var a=new createjs.Bitmap(game.assets.getAsset("gold_coin"));a.x=Math.round(Math.random()*game.canvas.width),a.y=-30,centerRegPoints(a),a.snapToPixel=!0,a.mouseEnabled=!1,this.addChild(a),this.box2d.createCoin(a)},c.box2d=function(){var a,b=30,c=20,d=1/c,e=Date.now(),f=0,g=[],h=[],i=[],j=function(){a=new Box2D.Dynamics.b2World(new Box2D.Common.Math.b2Vec2(0,10),(!0));var c=new Box2D.Dynamics.b2FixtureDef;c.density=1,c.restitution=.1,c.shape=new Box2D.Collision.Shapes.b2PolygonShape,c.shape.SetAsBox(game.canvas.height/b,10/b);var d=new Box2D.Dynamics.b2BodyDef;d.type=Box2D.Dynamics.b2Body.b2_staticBody,d.position.x=-25/b,d.position.y=1009/b;var e=a.CreateBody(d);e.CreateFixture(c);var f=new Box2D.Dynamics.b2FixtureDef;f.shape=new Box2D.Collision.Shapes.b2PolygonShape,f.shape.SetAsBox(20/b,game.canvas.height/b);var g=new Box2D.Dynamics.b2BodyDef;g.type=Box2D.Dynamics.b2Body.b2_staticBody,g.position.x=-9/b,g.position.y=-25/b;var h=a.CreateBody(g);h.CreateFixture(f);var i=new Box2D.Dynamics.b2FixtureDef;i.shape=new Box2D.Collision.Shapes.b2PolygonShape,i.shape.SetAsBox(20/b,game.canvas.height/b);var j=new Box2D.Dynamics.b2BodyDef;j.type=Box2D.Dynamics.b2Body.b2_staticBody,j.position.x=game.canvas.width/b,j.position.y=-25/b;var k=a.CreateBody(j);k.CreateFixture(i)},k=function(a,c){this.body=a,this.skin=c,this.update=function(){this.skin.rotation=this.body.GetAngle()*(180/Math.PI),this.skin.x=this.body.GetWorldCenter().x*b,this.skin.y=this.body.GetWorldCenter().y*b},h.push(this)},l=function(c){var d=new Box2D.Dynamics.b2FixtureDef;d.density=1,d.restitution=.6,d.shape=new Box2D.Collision.Shapes.b2CircleShape(24/b);var e=new Box2D.Dynamics.b2BodyDef;e.type=Box2D.Dynamics.b2Body.b2_dynamicBody,e.position.x=c.x/b,e.position.y=c.y/b;var f=a.CreateBody(e);f.CreateFixture(d);var g=new k(f,c);f.SetUserData(g),i.push(f)},m=function(a){null!=a.skin&&null!=a.skin.parent&&a.skin.parent.removeChild(a.skin),h.splice(h.indexOf(a),1)},n=function(){var b=Date.now(),j=b-e;for(f+=j,e=b;f>=c;){for(var k=0,l=g.length;k<l;k++)m(g[k].GetUserData()),g[k].SetUserData(null),a.DestroyBody(g[k]);g=[];for(var k=0,l=h.length;k<l;k++)h[k].update();a.Step(d,10,10),f-=c,a.ClearForces(),i.length>20&&(g.push(i[0]),i.splice(0,1))}},o=function(a){d=a?0:1/c,e=Date.now()};return{setup:j,update:n,createCoin:l,pauseResume:o}}(),c.handleTick=function(a,b){e&&(this.box2d.update(),d++,d%40===0&&(d=0,this.coinSpawn()))},c.nextScene=function(){createjs.Tween.get(this.sameWord,{loop:!1}).wait(100).to({x:this.sameWord.x-500},1e3,createjs.Ease.bounceOut),waitDoFunction(1e3,this.cleanUp.bind(this))},c.createSprite=function(a,b,c,d,e){var f=game.canvas.width,g=game.canvas.height,a=new createjs.Sprite(game.assets.piecesSheet,a);return centerRegPoints(a),a.x=f/2-b-d,a.y=g/2-c-e,this.addChild(a),a},c.showInstructions=function(){for(createjs.Tween.removeAllTweens(),this.soundID&&this.soundID.stop();this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_INST)},c.cleanUp=function(){for(createjs.Tween.removeAllTweens(),this.soundID&&this.soundID.stop();this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_GAME)},c.layoutRatio=function(){return},a.abcya.IntroScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.trees=null,c.popUp=null,c.char1=null,c.char2=null,c.initialize=function(){var a=game.canvas.width,b=game.canvas.height,c=new createjs.Bitmap(game.assets.getAsset("lights_background"));centerRegPoints(c),this.addChild(c),c.x=a/2,c.y=b/2+70;var d=(abcya.GameGlobals.PROBLEMS_ANSWERED_CORRECT.length,abcya.GameGlobals.PROBLEMS_ANSWERED_WRONG.length,"You have "+abcya.GameGlobals.LIGHTS_EARNED+" lights!"),e=new createjs.Text(d,"45pt odin","#eee");if(e.x=a/2-0,e.y=b/2-100,e.textAlign="center",this.addChild(e),abcya.GameGlobals.LIGHTS_EARNED>0){var f="Draw with your finger to put them up!",g=new createjs.Text(f,"45pt odin","#eee");g.x=a/2-0,g.y=b/2+40,g.textAlign="center",this.addChild(g)}else{var f="Please try again!",g=new createjs.Text(f,"45pt odin","#eee");g.x=a/2-0,g.y=b/2+40,g.textAlign="center",this.addChild(g)}this.nextButton=new abcya.JButton("go_button",game.assets.piecesSheet),this.nextButton.x=a/2+430,this.nextButton.y=b/2+220,this.nextButton.doAction=this.cleanUp.bind(this),this.addChild(this.nextButton),this.nextButton.scaleX=this.nextButton.scaleY=.6,createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:1,scaleY:1},500,createjs.Ease.easeOut).to({scaleX:.6,scaleY:.6},200,createjs.Ease.easeOut)},c.cleanUp=function(){var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),abcya.GameGlobals.LIGHTS_EARNED>0?this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_DECORATE):this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_SELECT_LEVEL)},a.abcya.LightsScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.buttons=[],c.initialize=function(){var a=game.canvas.width,b=game.canvas.height;this.buttons=[],this.sound=createjs.Sound.play("pick_frosting_color",{interrupt:createjs.Sound.INTERRUPT_ANY});var c=new createjs.Shape;c.graphics.beginFill("#b4e3f6").drawRect(0,0,a,b),this.addChild(c),this.label=new createjs.Text("Step 2: Pick a frosting color.","38pt odin","#fff"),this.label.textAlign="center",this.label.x=a/2,this.label.y=b/2-250,this.addChild(this.label),this.donutFrosting=new abcya.FrostingContainer(abcya.GameGlobals.DONUT_SHAPE),centerRegPoints(this.donutFrosting),this.donutFrosting.x=a/2,this.donutFrosting.y=b/2+25,this.addChild(this.donutFrosting);var d=makeHexColor(246,151,49);log("color = "+d);for(var e=0;e<12;e++){var f=new abcya.JToggleButton(game.assets.piecesSheet,"frost_color"+(e+1),"grow");f.buttonType=3,f.scaleX=f.scaleY=.8,f.doAction=this.buttonClicked.bind(this),f.number=e+1,this.buttons.push(f),this.addChild(f);switch(e){case 0:f.x=a/2-162-1e3,f.y=b/2+72,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x+1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 1:f.x=a/2-172-1e3,f.y=b/2-13,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x+1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 2:f.x=a/2-128-1e3,f.y=b/2-86,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x+1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 3:f.x=a/2-51,f.y=b/2-129-500,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x+0,y:f.y+500},700,createjs.Ease.elasticOut);break;case 4:f.x=a/2+41,f.y=b/2-132-500,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x+0,y:f.y+500},700,createjs.Ease.elasticOut);break;case 5:f.x=a/2+123,f.y=b/2-89-500,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x+0,y:f.y+500},700,createjs.Ease.elasticOut);break;case 6:f.x=a/2+166+1e3,f.y=b/2-13,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x-1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 7:f.x=a/2+156+1e3,f.y=b/2+70,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x-1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 8:f.x=a/2+114+1e3,f.y=b/2+149,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x-1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 9:f.x=a/2+37,f.y=b/2+183+500,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x+0,y:f.y-500},700,createjs.Ease.elasticOut);break;case 10:f.x=a/2-51,f.y=b/2+180+500,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x+0,y:f.y-500},700,createjs.Ease.elasticOut);break;case 11:f.x=a/2-127,f.y=b/2+144+500,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x+0,y:f.y-500},700,createjs.Ease.elasticOut)}}this.nextButton=new abcya.JButton("next_button",game.assets.piecesSheet),this.nextButton.x=a/2+350,this.nextButton.y=b/2+170,this.nextButton.doAction=this.nextAction.bind(this),this.addChild(this.nextButton),this.nextButton.enabled=!1,createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut)},c.nextAction=function(){for(var a=0;a<12;a++){var b=this.buttons[a];switch(a){case 0:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x-1e3,y:b.y},700,createjs.Ease.easeOut);break;case 1:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x-1e3,y:b.y},700,createjs.Ease.easeOut);break;case 2:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x-1e3,y:b.y},500,createjs.Ease.easeOut);break;case 3:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+0,y:b.y-500},500,createjs.Ease.easeOut);break;case 4:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x+0,y:b.y-500},500,createjs.Ease.easeOut);break;case 5:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x+0,y:b.y-500},500,createjs.Ease.easeOut);break;case 6:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+1e3,y:b.y},500,createjs.Ease.easeOut);break;case 7:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x+1e3,y:b.y},500,createjs.Ease.easeOut);break;case 8:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x+1e3,y:b.y},500,createjs.Ease.easeOut);break;case 9:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+0,y:b.y+500},500,createjs.Ease.easeOut);break;case 10:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x+0,y:b.y+500},500,createjs.Ease.easeOut);break;case 11:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x+0,y:b.y+500},500,createjs.Ease.easeOut)}}waitDoFunction(750,this.cleanUp.bind(this))},c.buttonClicked=function(a){game.canvas.width,game.canvas.height;log("button number = "+a.number),this.donutFrosting.addFrosting(a.number),this.nextButton.enabled=!0},c.cleanUp=function(){this.sound.stop();var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_PICK_SPRINKLES)},a.abcya.PickFrostColorScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.initialize=function(){var a=game.canvas.width,b=game.canvas.height,c=new createjs.Shape;c.graphics.beginFill("#b4e3f6").drawRect(0,0,a,b),this.addChild(c),this.sound=createjs.Sound.play("pick_donut_shape",{interrupt:createjs.Sound.INTERRUPT_ANY}),this.label=new createjs.Text("Step 1: Pick a donut shape.","38pt odin","#fff"),this.label.textAlign="center",this.label.x=a/2,this.label.y=b/2-200,this.addChild(this.label),this.sprite1=new abcya.JToggleButton(game.assets.piecesSheet,"donut_shape1","shape"),this.sprite1.buttonType=3,this.sprite1.doAction=this.buttonClicked1.bind(this),this.sprite1.x=a/2-300-1200,this.sprite1.y=b/2,this.addChild(this.sprite1),this.sprite2=new abcya.JToggleButton(game.assets.piecesSheet,"donut_shape2","shape"),this.sprite2.buttonType=3,this.sprite2.doAction=this.buttonClicked2.bind(this),this.sprite2.x=a/2-100-1200,this.sprite2.y=b/2,this.addChild(this.sprite2),this.sprite3=new abcya.JToggleButton(game.assets.piecesSheet,"donut_shape3","shape"),this.sprite3.buttonType=3,this.sprite3.doAction=this.buttonClicked3.bind(this),this.sprite3.x=a/2+100-1200,this.sprite3.y=b/2,this.addChild(this.sprite3),this.sprite4=new abcya.JToggleButton(game.assets.piecesSheet,"donut_shape4","shape"),this.sprite4.buttonType=3,this.sprite4.doAction=this.buttonClicked4.bind(this),this.sprite4.x=a/2+300-1200,this.sprite4.y=b/2,this.addChild(this.sprite4),this.nextButton=new abcya.JButton("next_button",game.assets.piecesSheet),this.nextButton.x=a/2,this.nextButton.y=b/2+200,this.nextButton.doAction=this.nextAction.bind(this),this.addChild(this.nextButton),this.nextButton.enabled=!1,createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut),createjs.Tween.get(this.sprite1,{loop:!1}).wait(450).to({x:this.sprite1.x+1200},700,createjs.Ease.elasticOut),createjs.Tween.get(this.sprite2,{loop:!1}).wait(300).to({x:this.sprite2.x+1200},700,createjs.Ease.elasticOut),createjs.Tween.get(this.sprite3,{loop:!1}).wait(150).to({x:this.sprite3.x+1200},700,createjs.Ease.elasticOut),createjs.Tween.get(this.sprite4,{loop:!1}).wait(0).to({x:this.sprite4.x+1200},700,createjs.Ease.elasticOut)},c.nextAction=function(){createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut),createjs.Tween.get(this.sprite1,{loop:!1}).wait(450).to({x:this.sprite1.x+1200},700,createjs.Ease.elasticOut),createjs.Tween.get(this.sprite2,{loop:!1}).wait(300).to({x:this.sprite2.x+1200},700,createjs.Ease.elasticOut),createjs.Tween.get(this.sprite3,{loop:!1}).wait(150).to({x:this.sprite3.x+1200},700,createjs.Ease.elasticOut),createjs.Tween.get(this.sprite4,{loop:!1}).wait(0).to({x:this.sprite4.x+1200},700,createjs.Ease.elasticOut),waitDoFunction(1150,this.cleanUp.bind(this))},c.buttonClicked1=function(){abcya.GameGlobals.DONUT_SHAPE=1,this.nextButton.enabled=!0},c.buttonClicked2=function(){abcya.GameGlobals.DONUT_SHAPE=2,this.nextButton.enabled=!0},c.buttonClicked3=function(){abcya.GameGlobals.DONUT_SHAPE=3,this.nextButton.enabled=!0},c.buttonClicked4=function(){abcya.GameGlobals.DONUT_SHAPE=4,this.nextButton.enabled=!0},c.cleanUp=function(){this.sound.stop();var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));
this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_PICK_FROST_COLOR)},a.abcya.PickShapeScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.buttons=[],c.initialize=function(){var a=game.canvas.width,b=game.canvas.height;this.buttons=[],this.sound=createjs.Sound.play("pick_sprinkle_color",{interrupt:createjs.Sound.INTERRUPT_ANY});var c=new createjs.Shape;c.graphics.beginFill("#b4e3f6").drawRect(0,0,a,b),this.addChild(c),this.label=new createjs.Text("Step 2: Pick a decoration color.","38pt odin","#fff"),this.label.textAlign="center",this.label.x=a/2,this.label.y=b/2-250,this.addChild(this.label),this.donutFrosting=new abcya.FrostingContainer(abcya.GameGlobals.DONUT_SHAPE),centerRegPoints(this.donutFrosting),this.donutFrosting.x=a/2,this.donutFrosting.y=b/2+25,this.addChild(this.donutFrosting);var d=makeHexColor(246,151,49);log("color = "+d);for(var e=0;e<12;e++){var f=new abcya.JToggleButton(game.assets.piecesSheet,"frost_color"+(e+1),"grow");f.buttonType=3,f.scaleX=f.scaleY=.8,f.doAction=this.buttonClicked.bind(this),f.number=e+1,this.buttons.push(f),this.addChild(f);switch(e){case 0:f.x=a/2-162-1e3,f.y=b/2+72,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x+1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 1:f.x=a/2-172-1e3,f.y=b/2-13,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x+1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 2:f.x=a/2-128-1e3,f.y=b/2-86,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x+1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 3:f.x=a/2-51,f.y=b/2-129-500,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x+0,y:f.y+500},700,createjs.Ease.elasticOut);break;case 4:f.x=a/2+41,f.y=b/2-132-500,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x+0,y:f.y+500},700,createjs.Ease.elasticOut);break;case 5:f.x=a/2+123,f.y=b/2-89-500,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x+0,y:f.y+500},700,createjs.Ease.elasticOut);break;case 6:f.x=a/2+166+1e3,f.y=b/2-13,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x-1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 7:f.x=a/2+156+1e3,f.y=b/2+70,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x-1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 8:f.x=a/2+114+1e3,f.y=b/2+149,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x-1e3,y:f.y},700,createjs.Ease.elasticOut);break;case 9:f.x=a/2+37,f.y=b/2+183+500,createjs.Tween.get(f,{loop:!1}).wait(0).to({x:f.x+0,y:f.y-500},700,createjs.Ease.elasticOut);break;case 10:f.x=a/2-51,f.y=b/2+180+500,createjs.Tween.get(f,{loop:!1}).wait(250).to({x:f.x+0,y:f.y-500},700,createjs.Ease.elasticOut);break;case 11:f.x=a/2-127,f.y=b/2+144+500,createjs.Tween.get(f,{loop:!1}).wait(500).to({x:f.x+0,y:f.y-500},700,createjs.Ease.elasticOut)}}this.nextButton=new abcya.JButton("next_button",game.assets.piecesSheet),this.nextButton.x=a/2+350,this.nextButton.y=b/2+170,this.nextButton.doAction=this.nextAction.bind(this),this.addChild(this.nextButton),this.nextButton.enabled=!1,createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut)},c.nextAction=function(){for(var a=0;a<12;a++){var b=this.buttons[a];switch(a){case 0:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x-1e3,y:b.y},700,createjs.Ease.easeOut);break;case 1:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x-1e3,y:b.y},700,createjs.Ease.easeOut);break;case 2:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x-1e3,y:b.y},500,createjs.Ease.easeOut);break;case 3:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+0,y:b.y-500},500,createjs.Ease.easeOut);break;case 4:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x+0,y:b.y-500},500,createjs.Ease.easeOut);break;case 5:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x+0,y:b.y-500},500,createjs.Ease.easeOut);break;case 6:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+1e3,y:b.y},500,createjs.Ease.easeOut);break;case 7:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x+1e3,y:b.y},500,createjs.Ease.easeOut);break;case 8:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x+1e3,y:b.y},500,createjs.Ease.easeOut);break;case 9:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+0,y:b.y+500},500,createjs.Ease.easeOut);break;case 10:createjs.Tween.get(b,{loop:!1}).wait(250).to({x:b.x+0,y:b.y+500},500,createjs.Ease.easeOut);break;case 11:createjs.Tween.get(b,{loop:!1}).wait(500).to({x:b.x+0,y:b.y+500},500,createjs.Ease.easeOut)}}waitDoFunction(750,this.cleanUp.bind(this))},c.buttonClicked=function(a){this.nextButton.enabled=!0,log("button number = "+a.number),this.donutFrosting.replaceSprinkles(abcya.GameGlobals.SPRINKLE_TYPE,a.number)},c.cleanUp=function(){this.sound.stop();var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_DONUT)},a.abcya.PickSprinklesColorScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.buttons=[],c.sprinkles=[],c.initialize=function(){this.buttons=[],this.sprinkles=[],this.sound=createjs.Sound.play("pick_sprinkle",{interrupt:createjs.Sound.INTERRUPT_ANY});var a=game.canvas.width,b=game.canvas.height,c=new createjs.Shape;c.graphics.beginFill("#b4e3f6").drawRect(0,0,a,b),this.addChild(c),this.label=new createjs.Text("Step 3: Pick a decoration shape.","38pt odin","#fff"),this.label.textAlign="center",this.label.x=a/2,this.label.y=b/2-250,this.addChild(this.label),this.donutFrosting=new abcya.FrostingContainer(abcya.GameGlobals.DONUT_SHAPE),centerRegPoints(this.donutFrosting),this.donutFrosting.x=a/2,this.donutFrosting.y=b/2+25,this.addChild(this.donutFrosting),this.nextButton=new abcya.JButton("next_button",game.assets.piecesSheet),this.nextButton.x=a/2+350,this.nextButton.y=b/2+170,this.nextButton.doAction=this.nextAction.bind(this),this.addChild(this.nextButton),this.nextButton.enabled=!1,createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut);for(var d=0;d<4;d++){var e=new abcya.JToggleButton(null,"sprinkles"+(d+1),"grow");e.buttonType=3,e.scaleX=e.scaleY=1,e.doAction=this.buttonClicked.bind(this),e.number=d+1,this.buttons.push(e),this.addChild(e);switch(d){case 0:e.x=a/2-162-1e3,e.y=b/2-100,createjs.Tween.get(e,{loop:!1}).wait(0).to({x:e.x+1e3,y:e.y},700,createjs.Ease.easeOut);break;case 1:e.x=a/2-162-1e3,e.y=b/2+100,createjs.Tween.get(e,{loop:!1}).wait(250).to({x:e.x+1e3,y:e.y},700,createjs.Ease.easeOut);break;case 2:e.x=a/2+162+1e3,e.y=b/2-100,createjs.Tween.get(e,{loop:!1}).wait(500).to({x:e.x-1e3,y:e.y},700,createjs.Ease.easeOut);break;case 3:e.x=a/2+162+1e3,e.y=b/2+100,createjs.Tween.get(e,{loop:!1}).wait(0).to({x:e.x-1e3,y:e.y},700,createjs.Ease.easeOut)}}},c.nextAction=function(){for(var a=0;a<12;a++){var b=this.buttons[a];switch(a){case 0:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x-1e3,y:b.y},600,createjs.Ease.easeOut);break;case 1:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x-1e3,y:b.y},600,createjs.Ease.easeOut);break;case 2:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+1e3,y:b.y},600,createjs.Ease.easeOut);break;case 3:createjs.Tween.get(b,{loop:!1}).wait(0).to({x:b.x+1e3,y:b.y},600,createjs.Ease.easeOut)}}waitDoFunction(750,this.cleanUp.bind(this))},c.buttonClicked=function(a){abcya.JToggleButton.disableAll();var b=game.canvas.width,c=game.canvas.height;log("button number = "+a.number),abcya.GameGlobals.SPRINKLE_TYPE=a.number,this.nextButton.enabled=!0;var d=new abcya.Emitter(5);d.x=b/2-50,d.y=c/2-175,this.addChild(d),d.emit("sprinkles"+a.number,20),this.donutFrosting.addSprinkles(a.number),this.donutFrosting.addSprinklesCallback=this.enableButtons.bind(this)},c.enableButtons=function(){log("enabling buttons"),abcya.JToggleButton.enableAll()},c.cleanUp=function(){this.sound.stop(),abcya.GameGlobals.SPRINKLES=this.donutFrosting.sprinkles;var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_PICK_SPRINKLES_COLOR)},a.abcya.PickSprinklesScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.initialize=function(){var a=game.canvas.width,b=game.canvas.height,c=new createjs.Shape;c.graphics.beginFill("#b4e3f6").drawRect(0,0,a,b),this.addChild(c),this.sound=createjs.Sound.play("finished_questions",{interrupt:createjs.Sound.INTERRUPT_ANY}),this.label=new createjs.Text("Fantastic! You finished all the questions.","38pt odin","#fff"),this.label.textAlign="center",this.label.x=a/2,this.label.y=b/2-125,this.addChild(this.label),this.label2=new createjs.Text("Now you can make your own donut!","38pt odin","#fff"),this.label2.textAlign="center",this.label2.x=a/2,this.label2.y=b/2-25,this.addChild(this.label2),this.nextButton=new abcya.JButton("next_button",game.assets.piecesSheet),this.nextButton.x=a/2,this.nextButton.y=b/2+170,this.nextButton.doAction=this.cleanUp.bind(this),this.addChild(this.nextButton),createjs.Tween.get(this.nextButton,{loop:!1}).wait(100).to({scaleX:2,scaleY:2},500,createjs.Ease.easeOut).to({scaleX:1,scaleY:1},200,createjs.Ease.easeOut)},c.cleanUp=function(){this.sound.stop();var a=new createjs.Event("TOGGLE_MUSIC");for(a._musicOn=!1,this.dispatchEvent(a);this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_PICK_SHAPE)},a.abcya.ResultsScreen=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.titleSprite=null,c.sound=null,c.initialize=function(){var a=game.canvas.width,b=game.canvas.height,c=new createjs.Shape;c.graphics.beginFill("#65ae5b").drawRect(0,0,a,b),this.addChild(c);var d=new createjs.Bitmap(game.assets.getAsset("select_background"));centerRegPoints(d),this.addChild(d),d.x=a/2,d.y=b/2+50;var e=new abcya.JToggleButton(game.assets.piecesSheet,"plus_button","operation");e.x=a/2-300,e.y=b/2-70,e.doAction=this.selectPlusOp.bind(this),this.addChild(e),e.scaleX=e.scaleY=0;var f=new abcya.JToggleButton(game.assets.piecesSheet,"minus_button","operation");f.x=a/2-100,f.y=b/2-70,f.doAction=this.selectMinusOp.bind(this),this.addChild(f),f.scaleX=f.scaleY=0;var g=new abcya.JToggleButton(game.assets.piecesSheet,"times_button","operation");g.x=a/2+100,g.y=b/2-70,g.doAction=this.selectTimesOp.bind(this),this.addChild(g),g.scaleX=g.scaleY=0;var h=new abcya.JToggleButton(game.assets.piecesSheet,"divide_button","operation");h.x=a/2+300,h.y=b/2-70,h.doAction=this.selectDivideOp.bind(this),this.addChild(h),h.scaleX=h.scaleY=0;var i=new abcya.JToggleButton(game.assets.piecesSheet,"1_button","difficulty");i.x=a/2-200,i.y=b/2+170,i.doAction=this.selectDifficultyOne.bind(this),this.addChild(i),i.scaleX=i.scaleY=0;var j=new abcya.JToggleButton(game.assets.piecesSheet,"2_button","difficulty");j.x=a/2-0,j.y=b/2+170,j.doAction=this.selectDifficultyTwo.bind(this),this.addChild(j),j.scaleX=j.scaleY=0;var k=new abcya.JToggleButton(game.assets.piecesSheet,"3_button","difficulty");k.x=a/2+200,k.y=b/2+170,k.doAction=this.selectDifficultyThree.bind(this),this.addChild(k),k.scaleX=k.scaleY=0,createjs.Tween.get(e,{loop:!1}).wait(0).to({scaleX:1.4,scaleY:1.4},250,createjs.Ease.easeIn).to({scaleX:1.2,scaleY:1.2},100,createjs.Ease.easeOut),createjs.Tween.get(f,{loop:!1}).wait(100).to({scaleX:1.4,scaleY:1.4},250,createjs.Ease.easeIn).to({scaleX:1.2,scaleY:1.2},100,createjs.Ease.easeOut),createjs.Tween.get(g,{loop:!1}).wait(200).to({scaleX:1.4,scaleY:1.4},250,createjs.Ease.easeIn).to({scaleX:1.2,scaleY:1.2},100,createjs.Ease.easeOut),createjs.Tween.get(h,{loop:!1}).wait(300).to({scaleX:1.4,scaleY:1.4},250,createjs.Ease.easeIn).to({scaleX:1.2,scaleY:1.2},100,createjs.Ease.easeOut),createjs.Tween.get(i,{loop:!1}).wait(400).to({scaleX:1.4,scaleY:1.4},250,createjs.Ease.easeIn).to({scaleX:1.2,scaleY:1.2},100,createjs.Ease.easeOut),createjs.Tween.get(j,{loop:!1}).wait(500).to({scaleX:1.4,scaleY:1.4},250,createjs.Ease.easeIn).to({scaleX:1.2,scaleY:1.2},100,createjs.Ease.easeOut),createjs.Tween.get(k,{loop:!1}).wait(600).to({scaleX:1.4,scaleY:1.4},250,createjs.Ease.easeIn).to({scaleX:1.2,scaleY:1.2},100,createjs.Ease.easeOut),waitDoFunction(1e3,this.playSound.bind(this))},c.playSound=function(){this.sound=createjs.Sound.play("pick_one",createjs.Sound.INTERRUPT_ANY)},c.selectPlusOp=function(){abcya.GameGlobals.CURRENT_OPERATION="plus",this.cleanUp()},c.selectMinusOp=function(){abcya.GameGlobals.CURRENT_OPERATION="minus",this.cleanUp()},c.selectTimesOp=function(){abcya.GameGlobals.CURRENT_OPERATION="times",this.cleanUp()},c.selectDivideOp=function(){abcya.GameGlobals.CURRENT_OPERATION="divide",this.cleanUp()},c.selectDifficultyOne=function(){abcya.GameGlobals.CURRENT_DIFFICULTY=1,this.cleanUp()},c.selectDifficultyTwo=function(){abcya.GameGlobals.CURRENT_DIFFICULTY=2,this.cleanUp()},c.selectDifficultyThree=function(){abcya.GameGlobals.CURRENT_DIFFICULTY=3,this.cleanUp()},c.cleanUp=function(){if(abcya.JToggleButton.isOneSelected("operation")&&abcya.JToggleButton.isOneSelected("difficulty")){for(abcya.JToggleButton.instances=[],this.sound.stop();this.getNumChildren()>0;)this.removeChild(this.getChildAt(0));this.parent.removeChild(this),this.dispatchEvent(abcya.GameStateEvents.GE_SHOW_GAME)}},c.layoutRatio=function(){game.screen_width,game.screen_height;game.isWidescreen===!0},a.abcya.SelectLevelScreen=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.buttons=null,c.bg=null,c.initialize=function(a,b){if(this.bg=new createjs.Sprite(game.assets.spriteSheet,"popup-bg"),this.addChild(this.bg),"nope"==b){var c=new createjs.Sprite(game.assets.spriteSheet,"game-over");c.x=this.bg.getBounds().width/2-c.getBounds().width/2,c.y=40,this.addChild(c)}else{this.bg.scaleX=.7;var d=createCenteredText("Awesome!\nYou finished the game!",30,"odin","#FFF");d.x=this.bg.getBounds().width/2*this.bg.scaleX,d.y=80,this.addChild(d)}for(var e=0;e<a.length;e++){var f=new abcya.EndDialogBtn(a[e]);f.x=this.bg.getBounds().width/2*this.bg.scaleX-f.getBounds().width/2,f.y=this.bg.getBounds().height/2+e*(f.getBounds().height+20),this.addChild(f),f.on("mousedown",this.handleBtnSelect,this,!0)}},c.handleBtnSelect=function(a){createjs.Sound.play("click");var b=new createjs.Event("DIALOG_SELECT");b._selectValue=a.currentTarget.btnValue,this.dispatchEvent(b)},a.abcya.EndDialog=createjs.promote(b,"Container")}(window),function(a){function b(a){this.Container_constructor(),this.initialize(a)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.btnValue=null,c.isSelected=null,c.initialize=function(a){this.btnValue=a;var b=new createjs.Text(this.btnValue,"36pt odin","#515152"),c=new createjs.Shape;c.graphics.beginFill("#000"),c.graphics.drawRect(0,0,b.getMeasuredWidth(),b.getMeasuredHeight()),this.addChild(c),c.alpha=.01,this.addChild(b),this.setBounds(0,0,b.getMeasuredWidth(),b.getMeasuredHeight()),this.isSelected=!1},a.abcya.EndDialogBtn=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.speakerBtn=null,c.infoBtn=null,c.initialize=function(){this.infoBtn=new createjs.Container;var a=new createjs.Sprite(game.assets.spriteSheet,"btnInfo");this.infoBtn.addChild(a);var b=new createjs.Shape;b.graphics.beginFill("#000"),b.graphics.drawRect(0,0,a.getBounds().width,a.getBounds().height),b.alpha=.01,this.infoBtn.addChildAt(b,0),this.speakerBtn=new createjs.Container;var c=new createjs.Sprite(game.assets.spriteSheet,"speaker-on");this.speakerBtn.display=c,this.speakerBtn.addChild(c);var d=new createjs.Shape;d.graphics.beginFill("#000"),d.graphics.drawRect(0,0,c.getBounds().width,c.getBounds().height),d.alpha=.01,this.speakerBtn.addChildAt(d,0);var e=new createjs.Sprite(game.assets.spriteSheet,"controls-separator");this.speakerBtn.x=e.getBounds().width/2+10,this.addChild(e,this.infoBtn,this.speakerBtn),this.infoBtn.on("mousedown",this.handleBtnClick.bind(this)),this.speakerBtn.on("mousedown",this.handleBtnClick.bind(this))},c.showSoundState=function(a){var b=a?"speaker-on":"speaker-off";this.speakerBtn.display.gotoAndStop(b)},c.handleBtnClick=function(a){var b=a.currentTarget===this.infoBtn?"info":"music",c=new createjs.Event("CONTROLS_CLICK");c._ctrlName=b,this.dispatchEvent(c)},a.abcya.GameControlBtns=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.scoreBox=null,c.gameControls=null,c.initialize=function(){this.scoreBox=new abcya.ScoreBox,this.addChild(this.scoreBox),this.gameControls=new abcya.GameControlBtns,this.addChild(this.gameControls),this.gameControls.addEventListener("CONTROLS_CLICK",this.handleUi.bind(this)),this.layoutHUD()},c.handleUi=function(a){var b=new createjs.Event("HUD_INPUT");b._inputType=a._ctrlName,this.dispatchEvent(b)},c.showMusicState=function(a){this.gameControls.showSoundState(a)},c.layoutHUD=function(){this.scoreBox.x=10,this.scoreBox.y=5,this.gameControls.x=game.screen_width-this.gameControls.getBounds().width-10,this.gameControls.y=10},a.abcya.GameHUD=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.btnClip=null,c.btnShadow=null,c.btnValue=null,c.isSelected=!1,c.initialize=function(a,b){this.isSelected=!1,this.btnValue=b,this.btnContainer=new createjs.Container;var c=new createjs.Sprite(game.assets.spriteSheet,a);this.btnContainer.addChild(c),this.btnContainer.regX=c.getBounds().width/2,this.btnContainer.regY=c.getBounds().height/2;var d=new createjs.Text(this.btnValue.toString(),"26pt odin","#515152");d.textBaseline="middle",d.x=c.getBounds().width/2-d.getMeasuredWidth()/2,d.y=d.getMeasuredLineHeight()+25,this.btnValue.toString().length>1,this.btnContainer.addChild(d),this.btnContainer.cache(0,0,this.btnContainer.getBounds().width,this.btnContainer.getBounds().height),this.btnShadow=new createjs.Sprite(game.assets.spriteSheet,"select-shadow"),this.btnShadow.regX=this.btnShadow.getBounds().width/2,this.btnShadow.regY=this.btnShadow.getBounds().height/2,this.btnShadow.y=this.btnContainer.getBounds().height/2,this.addChild(this.btnShadow,this.btnContainer)},c.setSelected=function(a){this.isSelected!==a&&(this.isSelected=a,a===!0?this.bounce():this.stopBounce())},c.bounce=function(){this.isSelected===!0&&null!=this.parent.parent&&(createjs.Tween.get(this.btnContainer).to({y:-20},200,createjs.Ease.quadOut).to({y:0},200,createjs.Ease.quadIn).call(this.bounce,null,this),createjs.Tween.get(this.btnShadow).to({scaleX:.8,scaleY:.8},200,createjs.Ease.quadOut).to({scaleX:1,scaleY:1},200,createjs.Ease.quadIn))},c.stopBounce=function(){this.btnShadow.scaleX=this.btnShadow.scaleY=1,this.btnContainer.y=0},a.abcya.LevelSelectBtn=createjs.promote(b,"Container")}(window),function(a){function b(a,b){this.Container_constructor(),this.initialize(a,b)}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.buttons=null,c.initialize=function(a,b){this.buttons=[];for(var c=a;c<=b;){var d=new abcya.LevelSelectBtn("egg-"+(this.buttons.length+1).toString(),c);d.alpha=0,this.addChild(d),this.buttons.push(d),c++}},c.showButtons=function(){for(var a=10,b=this.buttons[0].getBounds().width,c=this.buttons.length*(this.buttons[0].getBounds().width+a)-a,d=-(c/2)+b/2,e=0;e<this.buttons.length;e++){var f=this.buttons[e];f.endX=d+e*(f.getBounds().width+a),createjs.Tween.get(f).to({x:f.endX,alpha:1},500,createjs.Ease.sineOut),f.on("mousedown",this.selectBtn.bind(this))}createjs.Sound.play("slide1")},c.hideButtons=function(){for(var a=0;a<this.buttons.length;a++){var b=this.buttons[a];createjs.Tween.get(b).to({x:0,alpha:0},500,createjs.Ease.quadIn),b.off("mousedown",this.selectBtn.bind(this))}},c.selectBtn=function(a){for(var b=0;b<this.buttons.length;b++)this.buttons[b].setSelected(this.buttons[b]===a.currentTarget);var c=new createjs.Event("BTN_SELECT");c._info=a.currentTarget.btnValue,this.dispatchEvent(c)},a.abcya.LevelSelectGroup=createjs.promote(b,"Container")}(window),function(a){function b(){this.Container_constructor(),this.initialize()}a.abcya=a.abcya||{};var c=b.prototype=createjs.extend(b,createjs.Container);c.scoreNum=null,c.scoreTxt=null,c.targetTxt=null,c.bottomBorder=null,c.initialize=function(){this.scoreNum=0,this.scoreTxt=new createjs.Text("SCORE: "+this.scoreNum,"20pt odin","#FFF"),this.scoreTxt.textBaseline="middle",this.scoreTxt.y=this.scoreTxt.getMeasuredLineHeight(),this.addChild(this.scoreTxt),this.targetTxt=new createjs.Text("TARGET NUMBER: "+game.addNum,"20pt odin","#FFF"),this.targetTxt.textBaseline="middle",this.targetTxt.y=this.scoreTxt.y+this.targetTxt.getMeasuredLineHeight()+10,this.addChild(this.targetTxt),this.bottomBorder=new createjs.Sprite(game.assets.spriteSheet,"leaf-1"),this.bottomBorder.y=this.targetTxt.y+10,this.addChild(this.bottomBorder),this.cache(0,0,game.screen_width/2,this.bottomBorder.y+this.bottomBorder.getBounds().height)},c.updateScore=function(a){this.uncache(),this.scoreNum=a,this.scoreTxt.text="Score: "+this.scoreNum.toString(),this.cache(0,0,game.screen_width/2,this.bottomBorder.y+this.bottomBorder.getBounds().height)},a.abcya.ScoreBox=createjs.promote(b,"Container")}(window);